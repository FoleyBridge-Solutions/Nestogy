{
  "numStartups": 32,
  "installMethod": "unknown",
  "autoUpdates": true,
  "hasSeenTasksHint": true,
  "tipsHistory": {
    "new-user-warmup": 1,
    "memory-command": 7,
    "theme-command": 8,
    "enter-to-steer-in-relatime": 9,
    "todo-list": 10,
    "# for memory": 13,
    "ide-upsell-external-terminal": 21,
    "install-github-app": 13,
    "permissions": 14,
    "drag-and-drop-images": 15,
    "double-esc": 19,
    "continue": 19,
    "custom-commands": 22,
    "shift-tab": 19,
    "custom-agents": 20
  },
  "promptQueueUseCount": 104,
  "autoConnectIde": true,
  "firstStartTime": "2025-08-10T18:28:40.096Z",
  "userID": "fac51381edcc0c3329e1d01d04c39e9fe10ca9bb691dfba8392392c0d39911c6",
  "projects": {
    "/var/www/html/Nestogy": {
      "allowedTools": [],
      "history": [
        {
          "display": "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\n",
          "pastedContents": {}
        },
        {
          "display": "setup-tokend",
          "pastedContents": {}
        },
        {
          "display": "\nroot@nestogy:/var/www/html/Nestogy# claude -setup-token\nerror: unknown option '-setup-token'\nroot@nestogy:/var/www/html/Nestogy# claude --setup-token\nerror: unknown option '--setup-token'\nroot@nestogy:/var/www/html/Nestogy#\n",
          "pastedContents": {}
        },
        {
          "display": "/exit",
          "pastedContents": {}
        },
        {
          "display": "setup-tokende",
          "pastedContents": {}
        },
        {
          "display": "i dont have an anthropic key. i use the max subscription. i have to login",
          "pastedContents": {}
        },
        {
          "display": "[Pasted text #1 +30 lines]",
          "pastedContents": {
            "1": {
              "id": 1,
              "type": "text",
              "content": "root@nestogy:/var/www/html/Nestogy# sudo -u www-data claude /login\nException in PromiseRejectCallback:\nfile:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:751\n`)}catch(Q){O1(Q instanceof Error?Q:new Error(String(Q)))}}var f5Q=[{matches:(A)=>A.path===\"permissions.defaultMode\"&&A.code===\"invalid_enum_value\",tip:{suggestion:'Valid modes: \"acceptEdits\" (ask before file changes), \"plan\" (analysis only), \"bypassPermissions\" (auto-accept all), or \"default\" (standard behavior)',docLink:\"https://docs.anthropic.com/en/docs/claude-code/iam#permission-modes\"}},{matches:(A)=>A.path===\"apiKeyHelper\"&&A.code===\"invalid_type\",tip:{suggestion:'Provide a shell command that outputs your API key to stdout. The script should output only the API key. Example: \"/bin/generate_temp_api_key.sh\"'}},{matches:(A)=>A.path===\"cleanupPeriodDays\"&&A.code===\"too_small\"&&A.expected===\"0\",tip:{suggestion:\"Must be 0 or greater. Use 0 to disable automatic cleanup and keep chat transcripts forever, or set a positive number for days to retain (default is 30 days)\"}},{matches:(A)=>A.path.startsWith(\"env.\")&&A.code===\"invalid_type\",tip:{suggestion:'Environment variables must be strings. Wrap numbers and booleans in quotes. Example: \"DEBUG\": \"true\", \"PORT\": \"3000\"',docLink:\"https://docs.anthropic.com/en/docs/claude-code/settings#environment-variables\"}},{matches:(A)=>(A.path===\"permissions.allow\"||A.path===\"permissions.deny\")&&A.code===\"invalid_type\"&&A.expected===\"array\",tip:{suggestion:'Permission rules must be in an array. Format: [\"Tool(specifier)\"]. Examples: [\"Bash(npm run build)\", \"Edit(docs/**)\", \"Read(~/.zshrc)\"]. Use * for wildcards.'}},{matches:(A)=>A.path.includes(\"hooks\")&&A.code===\"invalid_type\",tip:{suggestion:'Hooks use a new format with matchers. Example: {\"PostToolUse\": [{\"matcher\": {\"tools\": [\"BashTool\"]}, \"hooks\": [{\"type\": \"command\", \"command\": \"echo Done\"}]}]}'}},{matches:(A)=>A.code===\"invalid_type\"&&A.expected===\"boolean\",tip:{suggestion:'Use true or false without quotes. Example: \"includeCoAuthoredBy\": true'}},{matches:(A)=>A.code===\"unrecognized_keys\",tip:{suggestion:\"Check for typos or refer to the documentation for valid fields\",docLink:\"https://docs.anthropic.com/en/docs/claude-code/settings\"}},{matches:(A)=>A.code===\"invalid_enum_value\"&&A.enumValues!==void 0,tip:{suggestion:void 0}},{matches:(A)=>A.code===\"invalid_type\"&&A.expected===\"object\"&&A.received===null&&A.path===\"\",tip:{suggestion:\"Check for missing commas, unmatched brackets, or trailing commas. Use a JSON validator to identify the exact syntax error.\"}},{matches:(A)=>A.path===\"permissions.additionalDirectories\"&&A.code===\"invalid_type\",tip:{suggestion:'Must be an array of directory paths. Example: [\"~/projects\", \"/tmp/workspace\"]. You can also use --add-dir flag or /add-dir command',docLink:\"https://docs.anthropic.com/en/docs/claude-code/iam#working-directories\"}}],h5Q={permissions:\"https://docs.anthropic.com/en/docs/claude-code/iam#configuring-permissions\",env:\"https://docs.anthropic.com/en/docs/claude-code/settings#environment-variables\",hooks:\"https://docs.anthropic.com/en/docs/claude-code/hooks\"};function LYA(A){let B=f5Q.find((Z)=>Z.matches(A));if(!B)return null;let Q={...B.tip};if(A.code===\"invalid_enum_value\"&&A.enumValues&&!Q.suggestion)Q.suggestion=`Valid values: ${A.enumValues.map((Z)=>`\"${Z}\"`).join(\", \")}`;if(!Q.docLink&&A.path){let Z=A.path.split(\".\")[0];if(Z)Q.docLink=h5Q[Z]}return Q}function MYA(A){return A.code===\"invalid_type\"}function RYA(A){return A.code===\"invalid_literal\"}function OYA(A){return A.code===\"invalid_enum_value\"}function g5Q(A){return A.code===\"unrecognized_keys\"}function TYA(A){return A.code===\"too_small\"}function PYA(A,B){return A.issues.map((Q)=>{let Z=Q.path.join(\".\"),D=Q.message,G,F,I,Y;if(OYA(Q))F=Q.options.map((J)=>String(J)),Y=Q.received;else if(RYA(Q))I=String(Q.expected),Y=Q.received;else if(MYA(Q))I=Q.expected,Y=Q.received;else if(TYA(Q))I=String(Q.minimum);else if(Q.code===\"custom\"&&\"params\"in Q)Y=Q.params.received;let W=LYA({path:Z,code:Q.code,expected:I,received:Y,enumValues:F,message:Q.message,value:Y});if(RYA(Q))G=`\"${Q.expected}\"`,D=`\"${Q.received}\" is not valid. Expected: ${G}`;else if(OYA(Q))G=F?.map((J)=>`\"${J}\"`).join(\", \"),D=`\"${Q.received}\" is not valid. Expected one of: ${G}`;else if(MYA(Q))if(Q.expected===\"object\"&&Q.received===\"null\"&&Z===\"\")D=\"Invalid or malformed JSON\";else D=`Expected ${Q.expected}, but received ${Q.received}`;else if(g5Q(Q)){let J=Q.keys.join(\", \");D=`Unrecognized field${Q.keys.length>1?\"s\":\"\"}: ${J}`}else if(TYA(Q))D=`Number must be greater than or equal to ${Q.minimum}`,G=String(Q.minimum);return{file:B,path:Z,message:D,expected:G,invalidValue:Y,suggestion:W?.suggestion,docLink:W?.docLink}})}import{join as SYA}from\"path\";function dr1(A,B){if(!A)return{};let Q={};for(let[Z,D]of Object.entries(A))Q[Z]={...D,scope:B};return Q}function jYA(A){let B=SYA(a0(),\".mcp.json\");uN(B,JSON.stringify(A,null,2),{encoding:\"utf8\"})}function u5Q(A){let B=[];function Q(D){return D.replace(/\\$\\{([^}]+)\\}/g,(G,F)=>{let[I,Y]=F.split(\":-\"),W=process.env[I];if(W!==void 0)return W;if(Y!==void 0)return Y;return B.push(I),G})}let Z;switch(A.type){case void 0:case\"stdio\":{let D=A;Z={...D,command:Q(D.command),args:D.args.map(Q),env:D.env?gj(D.env,Q):void 0};break}case\"sse\":case\"http\":{let D=A;Z={...D,url:Q(D.url),headers:D.headers?gj(D.headers,Q):void 0};break}case\"sse-ide\":case\"ws-ide\":Z=A;break}return{expanded:Z,missingVars:[...new Set(B)]}}function qh(A,B,Q){if(A.match(/[^a-zA-Z0-9_-]/))throw new Error(`Invalid name ${A}. Names can only contain letters, numbers, hyphens, and underscores.`);let Z=Or1.safeParse(B);if(!Z.success){let G=Z.error.errors.map((F)=>`${F.path.join(\".\")}: ${F.message}`).join(\", \");throw new Error(`Invalid configuration: ${G}`)}switch(Q){case\"project\":{let{servers:G}=nD(\"project\");if(G[A])throw new Error(`MCP server ${A} already exists in .mcp.json`);break}case\"user\":{if(E0().mcpServers?.[A])throw new Error(`MCP server ${A} already exists in user config`);break}case\"local\":{if(t9().mcpServers?.[A])throw new Error(`MCP server ${A} already exists in local config`);break}case\"dynamic\":throw new Error(\"Cannot add MCP server to scope: dynamic\")}let D=Z.data;switch(Q){case\"project\":{let{servers:G}=nD(\"project\"),F={};for(let[Y,W]of Object.entries(G)){let{scope:J,...X}=W;F[Y]=X}F[A]=D;let I={mcpServers:F};try{jYA(I)}catch(Y){throw new Error(`Failed to write to mcp.json: ${Y}`)}break}case\"user\":{let G=E0();if(!G.mcpServers)G.mcpServers={};G.mcpServers[A]=D,pA(G);break}case\"local\":{let G=t9();if(!G.mcpServers)G.mcpServers={};G.mcpServers[A]=D,k5(G);break}default:throw new Error(`Cannot add MCP server to scope: ${Q}`)}}function cr1(A,B){switch(B){case\"project\":{let{servers:Q}=nD(\"project\");if(!Q[A])throw new Error(`No MCP server found with name: ${A} in .mcp.json`);let Z={};for(let[G,F]of Object.entries(Q))if(G!==A){let{scope:I,...Y}=F;Z[G]=Y}let D={mcpServers:Z};try{jYA(D)}catch(G){throw new Error(`Failed to remove from .mcp.json: ${G}`)}break}case\"user\":{let Q=E0();if(!Q.mcpServers?.[A])throw new Error(`No user-scoped MCP server found with name: ${A}`);delete Q.mcpServers[A],pA(Q);break}case\"local\":{let Q=t9();if(!Q.mcpServers?.[A])throw new Error(`No project-local MCP server found with name: ${A}`);delete Q.mcpServers[A],k5(Q);break}default:throw new Error(`Cannot remove MCP server from scope: ${B}`)}}function nD(A){switch(A){case\"project\":{let B=SYA(a0(),\".mcp.json\");if(!k1().existsSync(B))return{servers:{},errors:[]};let{config:Z,errors:D}=lr1({filePath:B,expandVars:!0,scope:\"project\"});return{servers:dr1(Z?.mcpServers,A),errors:D}}case\"user\":{let B=E0().mcpServers;if(!B)return{servers:{},errors:[]};let{config:Q,errors:Z}=p91({configObject:{mcpServers:B},expandVars:!0,scope:\"user\"});return{servers:dr1(Q?.mcpServers,A),errors:Z}}case\"local\":{let B=t9().mcpServers;if(!B)return{servers:{},errors:[]};let{config:Q,errors:Z}=p91({configObject:{mcpServers:B},expandVars:!0,scope:\"local\"});return{servers:dr1(Q?.mcpServers,A),errors:Z}}}}function ai(A){let{servers:B}=nD(\"user\"),{servers:Q}=nD(\"project\"),{servers:Z}=nD(\"local\");if(Z[A])return Z[A];if(Q[A])return Q[A];if(B[A])return B[A];return null}function Wz(){let{servers:A}=nD(\"user\"),{servers:B}=nD(\"project\"),{servers:Q}=nD(\"local\"),Z={};for(let[G,F]of Object.entries(B))if(MC1(G)===\"approved\")Z[G]=F;let D=Object.assign({},A,Z,Q);return K1(\"tengu_mcp_servers\",{global:Object.keys(A).length,project:Object.keys(Z).length,user:Object.keys(Q).length}),D}function p91(A){let{configObject:B,expandVars:Q,scope:Z,filePath:D}=A,G=aIA.safeParse(B);if(!G.success)return{config:null,errors:G.error.issues.map((Y)=>({...D&&{file:D},path:Y.path.join(\".\"),message:\"Does not adhere to MCP server configuration schema\",mcpErrorMetadata:{scope:Z,severity:\"fatal\"}}))};let F=[],I={};for(let[Y,W]of Object.entries(G.data.mcpServers)){let J=W;if(Q){let{expanded:X,missingVars:V}=u5Q(W);if(V.length>0)F.push({...D&&{file:D},path:`mcpServers.${Y}`,message:`Missing environment variables: ${V.join(\", \")}`,suggestion:`Set the following environment variables: ${V.join(\", \")}`,mcpErrorMetadata:{scope:Z,serverName:Y,severity:\"warning\"}});J=X}if(T9()===\"windows\"&&(!J.type||J.type===\"stdio\")&&(J.command===\"npx\"||J.command.endsWith(\"\\\\npx\")||J.command.endsWith(\"/npx\")))F.push({...D&&{file:D},path:`mcpServers.${Y}`,message:\"Windows requires 'cmd /c' wrapper to execute npx\",suggestion:'Change command to \"cmd\" with args [\"/c\", \"npx\", ...]. See: https://docs.anthropic.com/en/docs/claude-code/mcp#configure-mcp-servers',mcpErrorMetadata:{scope:Z,serverName:Y,severity:\"warning\"}});I[Y]=J}return{config:{mcpServers:I},errors:F}}function lr1(A){let{filePath:B,expandVars:Q,scope:Z}=A,D=k1();if(!D.existsSync(B))return{config:null,errors:[{file:B,path:\"\",message:`MCP config file not found: ${B}`,suggestion:\"Check that the file path is correct\",mcpErrorMetadata:{scope:Z,severity:\"fatal\"}}]};let G;try{G=D.readFileSync(B,{encoding:\"utf8\"})}catch(I){return{config:null,errors:[{file:B,path:\"\",message:`Failed to read file: ${I}`,suggestion:\"Check file permissions and ensure the file exists\",mcpErrorMetadata:{scope:Z,severity:\"fatal\"}}]}}let F=R7(G);if(!F)return{config:null,errors:[{file:B,path:\"\",message:\"MCP config is not a valid JSON\",suggestion:\"Fix the JSON syntax errors in the file\",mcpErrorMetadata:{scope:Z,severity:\"fatal\"}}]};return p91({configObject:F,expandVars:Q,scope:Z,filePath:B})}import{stat as z3Q}from\"fs\";import{stat as E3Q,readdir as U3Q}from\"fs/promises\";import{EventEmitter as w3Q}from\"events\";import*as K6 from\"path\";import{stat as m5Q,lstat as yYA,readdir as d5Q,realpath as c5Q}from\"node:fs/promises\";import{Readable as l5Q}from\"node:stream\";import{resolve as kYA,relative as p5Q,join as i5Q,sep as n5Q}from\"node:path\";var DC={FILE_TYPE:\"files\",DIR_TYPE:\"directories\",FILE_DIR_TYPE:\"files_directories\",EVERYTHING_TYPE:\"all\"},pr1={root:\".\",fileFilter:(A)=>!0,directoryFilter:(A)=>!0,type:DC.FILE_TYPE,lstat:!1,depth:2147483648,alwaysStat:!1,highWaterMark:4096};Object.freeze(pr1);var bYA=\"READDIRP_RECURSIVE_ERROR\",a5Q=new Set([\"ENOENT\",\"EPERM\",\"EACCES\",\"ELOOP\",bYA]),_YA=[DC.DIR_TYPE,DC.EVERYTHING_TYPE,DC.FILE_DIR_TYPE,DC.FILE_TYPE],s5Q=new Set([DC.DIR_TYPE,DC.EVERYTHING_TYPE,DC.FILE_DIR_TYPE]),r5Q=new Set([DC.EVERYTHING_TYPE,DC.FILE_DIR_TYPE,DC.FILE_TYPE]),o5Q=(A)=>a5Q.has(A.code),t5Q=process.platform===\"win32\",xYA=(A)=>!0,vYA=(A)=>{if(A===void 0)return xYA;if(typeof A===\"function\")return A;if(typeof A===\"string\"){let B=A.trim();return(Q)=>Q.basename===B}if(Array.isArray(A)){let B=A.map((Q)=>Q.trim());return(Q)=>B.some((Z)=>Q.basename===Z)}return xYA};class fYA extends l5Q{constructor(A={}){super({objectMode:!0,autoDestroy:!0,highWaterMark:A.highWaterMark});let B={...pr1,...A},{root:Q,type:Z}=B;this._fileFilter=vYA(B.fileFilter),this._directoryFilter=vYA(B.directoryFilter);let D=B.lstat?yYA:m5Q;if(t5Q)this._stat=(G)=>D(G,{bigint:!0});else this._stat=D;this._maxDepth=B.depth??pr1.depth,this._wantsDir=Z?s5Q.has(Z):!1,this._wantsFile=Z?r5Q.has(Z):!1,this._wantsEverything=Z===DC.EVERYTHING_TYPE,this._root=kYA(Q),this._isDirent=!B.alwaysStat,this._statsProp=this._isDirent?\"dirent\":\"stats\",this._rdOptions={encoding:\"utf8\",withFileTypes:this._isDirent},this.parents=[this._exploreDir(Q,1)],this.reading=!1,this.parent=void 0}async _read(A){if(this.reading)return;this.reading=!0;try{while(!this.destroyed&&A>0){let B=this.parent,Q=B&&B.files;if(Q&&Q.length>0){let{path:Z,depth:D}=B,G=Q.splice(0,A).map((I)=>this._formatEntry(I,Z)),F=await Promise.all(G);for(let I of F){if(!I)continue;if(this.destroyed)return;let Y=await this._getEntryType(I);if(Y===\"directory\"&&this._directoryFilter(I)){if(D<=this._maxDepth)this.parents.push(this._exploreDir(I.fullPath,D+1));if(this._wantsDir)this.push(I),A--}else if((Y===\"file\"||this._includeAsFile(I))&&this._fileFilter(I)){if(this._wantsFile)this.push(I),A--}}}else{let Z=this.parents.pop();if(!Z){this.push(null);break}if(this.parent=await Z,this.destroyed)return}}}catch(B){this.destroy(B)}finally{this.reading=!1}}async _exploreDir(A,B){let Q;try{Q=await d5Q(A,this._rdOptions)}catch(Z){this._onError(Z)}return{files:Q,depth:B,path:A}}async _formatEntry(A,B){let Q,Z=this._isDirent?A.name:A;try{let D=kYA(i5Q(B,Z));Q={path:p5Q(this._root,D),fullPath:D,basename:Z},Q[this._statsProp]=this._isDirent?A:await this._stat(D)}catch(D){this._onError(D);return}return Q}_onError(A){if(o5Q(A)&&!this.destroyed)this.emit(\"warn\",A);else this.destroy(A)}async _getEntryType(A){if(!A&&this._statsProp in A)return\"\";let B=A[this._statsProp];if(B.isFile())return\"file\";if(B.isDirectory())return\"directory\";if(B&&B.isSymbolicLink()){let Q=A.fullPath;try{let Z=await c5Q(Q),D=await yYA(Z);if(D.isFile())return\"file\";if(D.isDirectory()){let G=Z.length;if(Q.startsWith(Z)&&Q.substr(G,1)===n5Q){let F=new Error(`Circular symlink detected: \"${Q}\" points to \"${Z}\"`);return F.code=bYA,this._onError(F)}return\"directory\"}}catch(Z){return this._onError(Z),\"\"}}}_includeAsFile(A){let B=A&&A[this._statsProp];return B&&this._wantsEverything&&!B.isDirectory()}}function hYA(A,B={}){let Q=B.entryType||B.type;if(Q===\"both\")Q=DC.FILE_DIR_TYPE;if(Q)B.type=Q;if(!A)throw new Error(\"readdirp: root argument is required. Usage: readdirp(root, options)\");else if(typeof A!==\"string\")throw new TypeError(\"readdirp: root argument must be a string. Usage: readdirp(root, options)\");else if(Q&&!_YA.includes(Q))throw new Error(`readdirp: Invalid type passed. Use one of ${_YA.join(\", \")}`);return B.root=A,new fYA(B)}import{watchFile as e5Q,unwatchFile as gYA,watch as A3Q}from\"fs\";import{open as B3Q,stat as mYA,lstat as Q3Q,realpath as ir1}from\"fs/promises\";import*as GZ from\"path\";import{type as Z3Q}from\"os\";var D3Q=\"data\",sr1=\"end\",dYA=\"close\",mC1=()=>{};var dC1=process.platform,rr1=dC1===\"win32\",G3Q=dC1===\"darwin\",F3Q=dC1===\"linux\",I3Q=dC1===\"freebsd\",cYA=Z3Q()===\"OS400\",O7={ALL:\"all\",READY:\"ready\",ADD:\"add\",CHANGE:\"change\",ADD_DIR:\"addDir\",UNLINK:\"unlink\",UNLINK_DIR:\"unlinkDir\",RAW:\"raw\",ERROR:\"error\"},Tw=O7,Y3Q=\"watch\",W3Q={lstat:Q3Q,stat:mYA},Nh=\"listeners\",hC1=\"errHandlers\",si=\"rawEmitters\",J3Q=[Nh,hC1,si],X3Q=new Set([\"3dm\",\"3ds\",\"3g2\",\"3gp\",\"7z\",\"a\",\"aac\",\"adp\",\"afdesign\",\"afphoto\",\"afpub\",\"ai\",\"aif\",\"aiff\",\"alz\",\"ape\",\"apk\",\"appimage\",\"ar\",\"arj\",\"asf\",\"au\",\"avi\",\"bak\",\"baml\",\"bh\",\"bin\",\"bk\",\"bmp\",\"btif\",\"bz2\",\"bzip2\",\"cab\",\"caf\",\"cgm\",\"class\",\"cmx\",\"cpio\",\"cr2\",\"cur\",\"dat\",\"dcm\",\"deb\",\"dex\",\"djvu\",\"dll\",\"dmg\",\"dng\",\"doc\",\"docm\",\"docx\",\"dot\",\"dotm\",\"dra\",\"DS_Store\",\"dsk\",\"dts\",\"dtshd\",\"dvb\",\"dwg\",\"dxf\",\"ecelp4800\",\"ecelp7470\",\"ecelp9600\",\"egg\",\"eol\",\"eot\",\"epub\",\"exe\",\"f4v\",\"fbs\",\"fh\",\"fla\",\"flac\",\"flatpak\",\"fli\",\"flv\",\"fpx\",\"fst\",\"fvt\",\"g3\",\"gh\",\"gif\",\"graffle\",\"gz\",\"gzip\",\"h261\",\"h263\",\"h264\",\"icns\",\"ico\",\"ief\",\"img\",\"ipa\",\"iso\",\"jar\",\"jpeg\",\"jpg\",\"jpgv\",\"jpm\",\"jxr\",\"key\",\"ktx\",\"lha\",\"lib\",\"lvp\",\"lz\",\"lzh\",\"lzma\",\"lzo\",\"m3u\",\"m4a\",\"m4v\",\"mar\",\"mdi\",\"mht\",\"mid\",\"midi\",\"mj2\",\"mka\",\"mkv\",\"mmr\",\"mng\",\"mobi\",\"mov\",\"movie\",\"mp3\",\"mp4\",\"mp4a\",\"mpeg\",\"mpg\",\"mpga\",\"mxu\",\"nef\",\"npx\",\"numbers\",\"nupkg\",\"o\",\"odp\",\"ods\",\"odt\",\"oga\",\"ogg\",\"ogv\",\"otf\",\"ott\",\"pages\",\"pbm\",\"pcx\",\"pdb\",\"pdf\",\"pea\",\"pgm\",\"pic\",\"png\",\"pnm\",\"pot\",\"potm\",\"potx\",\"ppa\",\"ppam\",\"ppm\",\"pps\",\"ppsm\",\"ppsx\",\"ppt\",\"pptm\",\"pptx\",\"psd\",\"pya\",\"pyc\",\"pyo\",\"pyv\",\"qt\",\"rar\",\"ras\",\"raw\",\"resources\",\"rgb\",\"rip\",\"rlc\",\"rmf\",\"rmvb\",\"rpm\",\"rtf\",\"rz\",\"s3m\",\"s7z\",\"scpt\",\"sgi\",\"shar\",\"snap\",\"sil\",\"sketch\",\"slk\",\"smv\",\"snk\",\"so\",\"stl\",\"suo\",\"sub\",\"swf\",\"tar\",\"tbz\",\"tbz2\",\"tga\",\"tgz\",\"thmx\",\"tif\",\"tiff\",\"tlz\",\"ttc\",\"ttf\",\"txz\",\"udf\",\"uvh\",\"uvi\",\"uvm\",\"uvp\",\"uvs\",\"uvu\",\"viv\",\"vob\",\"war\",\"wav\",\"wax\",\"wbmp\",\"wdp\",\"weba\",\"webm\",\"webp\",\"whl\",\"wim\",\"wm\",\"wma\",\"wmv\",\"wmx\",\"woff\",\"woff2\",\"wrm\",\"wvx\",\"xbm\",\"xif\",\"xla\",\"xlam\",\"xls\",\"xlsb\",\"xlsm\",\"xlsx\",\"xlt\",\"xltm\",\"xltx\",\"xm\",\"xmind\",\"xpi\",\"xpm\",\"xwd\",\"xz\",\"z\",\"zip\",\"zipx\"]),V3Q=(A)=>X3Q.has(GZ.extname(A).slice(1).toLowerCase()),ar1=(A,B)=>{if(A instanceof Set)A.forEach(B);else B(A)},i91=(A,B,Q)=>{let Z=A[B];if(!(Z instanceof Set))A[B]=Z=new Set([Z]);Z.add(Q)},K3Q=(A)=>(B)=>{let Q=A[B];if(Q instanceof Set)Q.clear();else delete A[B]},n91=(A,B,Q)=>{let Z=A[B];if(Z instanceof Set)Z.delete(Q);else if(Z===Q)delete A[B]},lYA=(A)=>A instanceof Set?A.size===0:!A,gC1=new Map;function uYA(A,B,Q,Z,D){let G=(F,I)=>{if(Q(A),D(F,I,{watchedPath:A}),I&&A!==I)uC1(GZ.resolve(A,I),Nh,GZ.join(A,I))};try{return A3Q(A,{persistent:B.persistent},G)}catch(F){Z(F);return}}var uC1=(A,B,Q,Z,D)=>{let G=gC1.get(A);if(!G)return;ar1(G[B],(F)=>{F(Q,Z,D)})},C3Q=(A,B,Q,Z)=>{let{listener:D,errHandler:G,rawEmitter:F}=Z,I=gC1.get(B),Y;if(!Q.persistent){if(Y=uYA(A,Q,D,G,F),!Y)return;return Y.close.bind(Y)}if(I)i91(I,Nh,D),i91(I,hC1,G),i91(I,si,F);else{if(Y=uYA(A,Q,uC1.bind(null,B,Nh),G,uC1.bind(null,B,si)),!Y)return;Y.on(Tw.ERROR,async(W)=>{let J=uC1.bind(null,B,hC1);if(I)I.watcherUnusable=!0;if(rr1&&W.code===\"EPERM\")try{await(await B3Q(A,\"r\")).close(),J(W)}catch(X){}else J(W)}),I={listeners:D,errHandlers:G,rawEmitters:F,watcher:Y},gC1.set(B,I)}return()=>{if(n91(I,Nh,D),n91(I,hC1,G),n91(I,si,F),lYA(I.listeners))I.watcher.close(),gC1.delete(B),J3Q.forEach(K3Q(I)),I.watcher=void 0,Object.freeze(I)}},nr1=new Map,H3Q=(A,B,Q,Z)=>{let{listener:D,rawEmitter:G}=Z,F=nr1.get(B),I=F&&F.options;if(I&&(I.persistent<Q.persistent||I.interval>Q.interval))gYA(B),F=void 0;if(F)i91(F,Nh,D),i91(F,si,G);else F={listeners:D,rawEmitters:G,options:Q,watcher:e5Q(B,Q,(Y,W)=>{ar1(F.rawEmitters,(X)=>{X(Tw.CHANGE,B,{curr:Y,prev:W})});let J=Y.mtimeMs;if(Y.size!==W.size||J>W.mtimeMs||J===0)ar1(F.listeners,(X)=>X(A,Y))})},nr1.set(B,F);return()=>{if(n91(F,Nh,D),n91(F,si,G),lYA(F.listeners))nr1.delete(B),gYA(B),F.options=F.watcher=void 0,Object.freeze(F)}};class or1{constructor(A){this.fsw=A,this._boundHandleError=(B)=>A._handleError(B)}_watchWithNodeFs(A,B){let Q=this.fsw.options,Z=GZ.dirname(A),D=GZ.basename(A);this.fsw._getWatchedDir(Z).add(D);let F=GZ.resolve(A),I={persistent:Q.persistent};if(!B)B=mC1;let Y;if(Q.usePolling){let W=Q.interval!==Q.binaryInterval;I.interval=W&&V3Q(D)?Q.binaryInterval:Q.interval,Y=H3Q(A,F,I,{listener:B,rawEmitter:this.fsw._emitRaw})}else Y=C3Q(A,F,I,{listener:B,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw});return Y}_handleFile(A,B,Q){if(this.fsw.closed)return;let Z=GZ.dirname(A),D=GZ.basename(A),G=this.fsw._getWatchedDir(Z),F=B;if(G.has(D))return;let I=async(W,J)=>{if(!this.fsw._throttle(Y3Q,A,5))return;if(!J||J.mtimeMs===0)try{let X=await mYA(A);if(this.fsw.closed)return;let{atimeMs:V,mtimeMs:K}=X;if(!V||V<=K||K!==F.mtimeMs)this.fsw._emit(Tw.CHANGE,A,X);if((G3Q||F3Q||I3Q)&&F.ino!==X.ino){this.fsw._closeFile(W),F=X;let C=this._watchWithNodeFs(A,I);if(C)this.fsw._addPathCloser(W,C)}else F=X}catch(X){this.fsw._remove(Z,D)}else if(G.has(D)){let{atimeMs:X,mtimeMs:V}=J;if(!X||X<=V||V!==F.mtimeMs)this.fsw._emit(Tw.CHANGE,A,J);F=J}},Y=this._watchWithNodeFs(A,I);if(!(Q&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(A)){if(!this.fsw._throttle(Tw.ADD,A,0))return;this.fsw._emit(Tw.ADD,A,B)}return Y}async _handleSymlink(A,B,Q,Z){if(this.fsw.closed)return;let D=A.fullPath,G=this.fsw._getWatchedDir(B);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let F;try{F=await ir1(Q)}catch(I){return this.fsw._emitReady(),!0}if(this.fsw.closed)return;if(G.has(Z)){if(this.fsw._symlinkPaths.get(D)!==F)this.fsw._symlinkPaths.set(D,F),this.fsw._emit(Tw.CHANGE,Q,A.stats)}else G.add(Z),this.fsw._symlinkPaths.set(D,F),this.fsw._emit(Tw.ADD,Q,A.stats);return this.fsw._emitReady(),!0}if(this.fsw._symlinkPaths.has(D))return!0;this.fsw._symlinkPaths.set(D,!0)}_handleRead(A,B,Q,Z,D,G,F){if(A=GZ.join(A,\"\"),F=this.fsw._throttle(\"readdir\",A,1000),!F)return;let I=this.fsw._getWatchedDir(Q.path),Y=new Set,W=this.fsw._readdirp(A,{fileFilter:(J)=>Q.filterPath(J),directoryFilter:(J)=>Q.filterDir(J)});if(!W)return;return W.on(D3Q,async(J)=>{if(this.fsw.closed){W=void 0;return}let X=J.path,V=GZ.join(A,X);if(Y.add(X),J.stats.isSymbolicLink()&&await this._handleSymlink(J,A,V,X))return;if(this.fsw.closed){W=void 0;return}if(X===Z||!Z&&!I.has(X))this.fsw._incrReadyCount(),V=GZ.join(D,GZ.relative(D,V)),this._addToNodeFs(V,B,Q,G+1)}).on(Tw.ERROR,this._boundHandleError),new Promise((J,X)=>{if(!W)return X();W.once(sr1,()=>{if(this.fsw.closed){W=void 0;return}let V=F?F.clear():!1;if(J(void 0),I.getChildren().filter((K)=>{return K!==A&&!Y.has(K)}).forEach((K)=>{this.fsw._remove(A,K)}),W=void 0,V)this._handleRead(A,!1,Q,Z,D,G,F)})})}async _handleDir(A,B,Q,Z,D,G,F){let I=this.fsw._getWatchedDir(GZ.dirname(A)),Y=I.has(GZ.basename(A));if(!(Q&&this.fsw.options.ignoreInitial)&&!D&&!Y)this.fsw._emit(Tw.ADD_DIR,A,B);I.add(GZ.basename(A)),this.fsw._getWatchedDir(A);let W,J,X=this.fsw.options.depth;if((X==null||Z<=X)&&!this.fsw._symlinkPaths.has(F)){if(!D){if(await this._handleRead(A,Q,G,D,A,Z,W),this.fsw.closed)return}J=this._watchWithNodeFs(A,(V,K)=>{if(K&&K.mtimeMs===0)return;this._handleRead(V,!1,G,D,A,Z,W)})}return J}async _addToNodeFs(A,B,Q,Z,D){let G=this.fsw._emitReady;if(this.fsw._isIgnored(A)||this.fsw.closed)return G(),!1;let F=this.fsw._getWatchHelpers(A);if(Q)F.filterPath=(I)=>Q.filterPath(I),F.filterDir=(I)=>Q.filterDir(I);try{let I=await W3Q[F.statMethod](F.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(F.watchPath,I))return G(),!1;let Y=this.fsw.options.followSymlinks,W;if(I.isDirectory()){let J=GZ.resolve(A),X=Y?await ir1(A):A;if(this.fsw.closed)return;if(W=await this._handleDir(F.watchPath,I,B,Z,D,F,X),this.fsw.closed)return;if(J!==X&&X!==void 0)this.fsw._symlinkPaths.set(J,X)}else if(I.isSymbolicLink()){let J=Y?await ir1(A):A;if(this.fsw.closed)return;let X=GZ.dirname(F.watchPath);if(this.fsw._getWatchedDir(X).add(F.watchPath),this.fsw._emit(Tw.ADD,F.watchPath,I),W=await this._handleDir(X,I,B,Z,A,F,J),this.fsw.closed)return;if(J!==void 0)this.fsw._symlinkPaths.set(GZ.resolve(A),J)}else W=this._handleFile(F.watchPath,I,B);if(G(),W)this.fsw._addPathCloser(A,W);return!1}catch(I){if(this.fsw._handleError(I))return G(),A}}}/*! chokidar - MIT License (c) 2012 Paul Miller (paulmillr.com) */var tr1=\"/\",$3Q=\"//\",rYA=\".\",q3Q=\"..\",N3Q=\"string\",L3Q=/\\\\/g,pYA=/\\/\\//,M3Q=/\\..*\\.(sw[px])$|~$|\\.subl.*\\.tmp/,R3Q=/^\\.[/\\\\]/;function cC1(A){return Array.isArray(A)?A:[A]}var er1=(A)=>typeof A===\"object\"&&A!==null&&!(A instanceof RegExp);function O3Q(A){if(typeof A===\"function\")return A;if(typeof A===\"string\")return(B)=>A===B;if(A instanceof RegExp)return(B)=>A.test(B);if(typeof A===\"object\"&&A!==null)return(B)=>{if(A.path===B)return!0;if(A.recursive){let Q=K6.relative(A.path,B);if(!Q)return!1;return!Q.startsWith(\"..\")&&!K6.isAbsolute(Q)}return!1};return()=>!1}function T3Q(A){if(typeof A!==\"string\")throw new Error(\"string expected\");A=K6.normalize(A),A=A.replace(/\\\\/g,\"/\");let B=!1;if(A.startsWith(\"//\"))B=!0;let Q=/\\/\\//;while(A.match(Q))A=A.replace(Q,\"/\");if(B)A=\"/\"+A;return A}function iYA(A,B,Q){let Z=T3Q(B);for(let D=0;D<A.length;D++){let G=A[D];if(G(Z,Q))return!0}return!1}function P3Q(A,B){if(A==null)throw new TypeError(\"anymatch: specify first argument\");let Z=cC1(A).map((D)=>O3Q(D));if(B==null)return(D,G)=>{return iYA(Z,D,G)};return iYA(Z,B)}var nYA=(A)=>{let B=cC1(A).flat();if(!B.every((Q)=>typeof Q===N3Q))throw new TypeError(`Non-string provided as watch path: ${B}`);return B.map(oYA)},aYA=(A)=>{let B=A.replace(L3Q,tr1),Q=!1;if(B.startsWith($3Q))Q=!0;while(B.match(pYA))B=B.replace(pYA,tr1);if(Q)B=tr1+B;return B},oYA=(A)=>aYA(K6.normalize(aYA(A))),sYA=(A=\"\")=>(B)=>{if(typeof B===\"string\")return oYA(K6.isAbsolute(B)?B:K6.join(A,B));else return B},S3Q=(A,B)=>{if(K6.isAbsolute(A))return A;return K6.join(B,A)},j3Q=Object.freeze(new Set);class tYA{constructor(A,B){this.path=A,this._removeWatcher=B,this.items=new Set}add(A){let{items:B}=this;if(!B)return;if(A!==rYA&&A!==q3Q)B.add(A)}async remove(A){let{items:B}=this;if(!B)return;if(B.delete(A),B.size>0)return;let Q=this.path;try{await U3Q(Q)}catch(Z){if(this._removeWatcher)this._removeWatcher(K6.dirname(Q),K6.basename(Q))}}has(A){let{items:B}=this;if(!B)return;return B.has(A)}getChildren(){let{items:A}=this;if(!A)return[];return[...A.values()]}dispose(){this.items.clear(),this.path=\"\",this._removeWatcher=mC1,this.items=j3Q,Object.freeze(this)}}var y3Q=\"stat\",k3Q=\"lstat\";class eYA{constructor(A,B,Q){this.fsw=Q;let Z=A;this.path=A=A.replace(R3Q,\"\"),this.watchPath=Z,this.fullWatchPath=K6.resolve(Z),this.dirParts=[],this.dirParts.forEach((D)=>{if(D.length>1)D.pop()}),this.followSymlinks=B,this.statMethod=B?y3Q:k3Q}entryPath(A){return K6.join(this.watchPath,K6.relative(this.watchPath,A.fullPath))}filterPath(A){let{stats:B}=A;if(B&&B.isSymbolicLink())return this.filterDir(A);let Q=this.entryPath(A);return this.fsw._isntIgnored(Q,B)&&this.fsw._hasReadPermissions(B)}filterDir(A){return this.fsw._isntIgnored(this.entryPath(A),A.stats)}}class Ao1 extends w3Q{constructor(A={}){super();this.closed=!1,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._streams=new Set,this._symlinkPaths=new Map,this._watched=new Map,this._pendingWrites=new Map,this._pendingUnlinks=new Map,this._readyCount=0,this._readyEmitted=!1;let B=A.awaitWriteFinish,Q={stabilityThreshold:2000,pollInterval:100},Z={persistent:!0,ignoreInitial:!1,ignorePermissionErrors:!1,interval:100,binaryInterval:300,followSymlinks:!0,usePolling:!1,atomic:!0,...A,ignored:A.ignored?cC1(A.ignored):cC1([]),awaitWriteFinish:B===!0?Q:typeof B===\"object\"?{...Q,...B}:!1};if(cYA)Z.usePolling=!0;if(Z.atomic===void 0)Z.atomic=!Z.usePolling;let D=process.env.CHOKIDAR_USEPOLLING;if(D!==void 0){let I=D.toLowerCase();if(I===\"false\"||I===\"0\")Z.usePolling=!1;else if(I===\"true\"||I===\"1\")Z.usePolling=!0;else Z.usePolling=!!I}let G=process.env.CHOKIDAR_INTERVAL;if(G)Z.interval=Number.parseInt(G,10);let F=0;this._emitReady=()=>{if(F++,F>=this._readyCount)this._emitReady=mC1,this._readyEmitted=!0,process.nextTick(()=>this.emit(O7.READY))},this._emitRaw=(...I)=>this.emit(O7.RAW,...I),this._boundRemove=this._remove.bind(this),this.options=Z,this._nodeFsHandler=new or1(this),Object.freeze(Z)}_addIgnoredPath(A){if(er1(A)){for(let B of this._ignoredPaths)if(er1(B)&&B.path===A.path&&B.recursive===A.recursive)return}this._ignoredPaths.add(A)}_removeIgnoredPath(A){if(this._ignoredPaths.delete(A),typeof A===\"string\"){for(let B of this._ignoredPaths)if(er1(B)&&B.path===A)this._ignoredPaths.delete(B)}}add(A,B,Q){let{cwd:Z}=this.options;this.closed=!1,this._closePromise=void 0;let D=nYA(A);if(Z)D=D.map((G)=>{return S3Q(G,Z)});if(D.forEach((G)=>{this._removeIgnoredPath(G)}),this._userIgnored=void 0,!this._readyCount)this._readyCount=0;return this._readyCount+=D.length,Promise.all(D.map(async(G)=>{let F=await this._nodeFsHandler._addToNodeFs(G,!Q,void 0,0,B);if(F)this._emitReady();return F})).then((G)=>{if(this.closed)return;G.forEach((F)=>{if(F)this.add(K6.dirname(F),K6.basename(B||F))})}),this}unwatch(A){if(this.closed)return this;let B=nYA(A),{cwd:Q}=this.options;return B.forEach((Z)=>{if(!K6.isAbsolute(Z)&&!this._closers.has(Z)){if(Q)Z=K6.join(Q,Z);Z=K6.resolve(Z)}if(this._closePath(Z),this._addIgnoredPath(Z),this._watched.has(Z))this._addIgnoredPath({path:Z,recursive:!0});this._userIgnored=void 0}),this}close(){if(this._closePromise)return this._closePromise;this.closed=!0,this.removeAllListeners();let A=[];return this._closers.forEach((B)=>B.forEach((Q)=>{let Z=Q();if(Z instanceof Promise)A.push(Z)})),this._streams.forEach((B)=>B.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach((B)=>B.dispose()),this._closers.clear(),this._watched.clear(),this._streams.clear(),this._symlinkPaths.clear(),this._throttled.clear(),this._closePromise=A.length?Promise.all(A).then(()=>{return}):Promise.resolve(),this._closePromise}getWatched(){let A={};return this._watched.forEach((B,Q)=>{let D=(this.options.cwd?K6.relative(this.options.cwd,Q):Q)||rYA;A[D]=B.getChildren().sort()}),A}emitWithAll(A,B){if(this.emit(A,...B),A!==O7.ERROR)this.emit(O7.ALL,A,...B)}async _emit(A,B,Q){if(this.closed)return;let Z=this.options;if(rr1)B=K6.normalize(B);if(Z.cwd)B=K6.relative(Z.cwd,B);let D=[B];if(Q!=null)D.push(Q);let G=Z.awaitWriteFinish,F;if(G&&(F=this._pendingWrites.get(B)))return F.lastChange=new Date,this;if(Z.atomic){if(A===O7.UNLINK)return this._pendingUnlinks.set(B,[A,...D]),setTimeout(()=>{this._pendingUnlinks.forEach((I,Y)=>{this.emit(...I),this.emit(O7.ALL,...I),this._pendingUnlinks.delete(Y)})},typeof Z.atomic===\"number\"?Z.atomic:100),this;if(A===O7.ADD&&this._pendingUnlinks.has(B))A=O7.CHANGE,this._pendingUnlinks.delete(B)}if(G&&(A===O7.ADD||A===O7.CHANGE)&&this._readyEmitted){let I=(Y,W)=>{if(Y)A=O7.ERROR,D[0]=Y,this.emitWithAll(A,D);else if(W){if(D.length>1)D[1]=W;else D.push(W);this.emitWithAll(A,D)}};return this._awaitWriteFinish(B,G.stabilityThreshold,A,I),this}if(A===O7.CHANGE){if(!this._throttle(O7.CHANGE,B,50))return this}if(Z.alwaysStat&&Q===void 0&&(A===O7.ADD||A===O7.ADD_DIR||A===O7.CHANGE)){let I=Z.cwd?K6.join(Z.cwd,B):B,Y;try{Y=await E3Q(I)}catch(W){}if(!Y||this.closed)return;D.push(Y)}return this.emitWithAll(A,D),this}_handleError(A){let B=A&&A.code;if(A&&B!==\"ENOENT\"&&B!==\"ENOTDIR\"&&(!this.options.ignorePermissionErrors||B!==\"EPERM\"&&B!==\"EACCES\"))this.emit(O7.ERROR,A);return A||this.closed}_throttle(A,B,Q){if(!this._throttled.has(A))this._throttled.set(A,new Map);let Z=this._throttled.get(A);if(!Z)throw new Error(\"invalid throttle\");let D=Z.get(B);if(D)return D.count++,!1;let G,F=()=>{let Y=Z.get(B),W=Y?Y.count:0;if(Z.delete(B),clearTimeout(G),Y)clearTimeout(Y.timeoutObject);return W};G=setTimeout(F,Q);let I={timeoutObject:G,clear:F,count:0};return Z.set(B,I),I}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(A,B,Q,Z){let D=this.options.awaitWriteFinish;if(typeof D!==\"object\")return;let G=D.pollInterval,F,I=A;if(this.options.cwd&&!K6.isAbsolute(A))I=K6.join(this.options.cwd,A);let Y=new Date,W=this._pendingWrites;function J(X){z3Q(I,(V,K)=>{if(V||!W.has(A)){if(V&&V.code!==\"ENOENT\")Z(V);return}let C=Number(new Date);if(X&&K.size!==X.size)W.get(A).lastChange=C;let H=W.get(A);if(C-H.lastChange>=B)W.delete(A),Z(void 0,K);else F=setTimeout(J,G,K)})}if(!W.has(A))W.set(A,{lastChange:Y,cancelWait:()=>{return W.delete(A),clearTimeout(F),Q}}),F=setTimeout(J,G)}_isIgnored(A,B){if(this.options.atomic&&M3Q.test(A))return!0;if(!this._userIgnored){let{cwd:Q}=this.options,D=(this.options.ignored||[]).map(sYA(Q)),F=[...[...this._ignoredPaths].map(sYA(Q)),...D];this._userIgnored=P3Q(F,void 0)}return this._userIgnored(A,B)}_isntIgnored(A,B){return!this._isIgnored(A,B)}_getWatchHelpers(A){return new eYA(A,this.options.followSymlinks,this)}_getWatchedDir(A){let B=K6.resolve(A);if(!this._watched.has(B))this._watched.set(B,new tYA(B,this._boundRemove));return this._watched.get(B)}_hasReadPermissions(A){if(this.options.ignorePermissionErrors)return!0;return Boolean(Number(A.mode)&256)}_remove(A,B,Q){let Z=K6.join(A,B),D=K6.resolve(Z);if(Q=Q!=null?Q:this._watched.has(Z)||this._watched.has(D),!this._throttle(\"remove\",Z,100))return;if(!Q&&this._watched.size===1)this.add(A,B,!0);this._getWatchedDir(Z).getChildren().forEach((X)=>this._remove(Z,X));let I=this._getWatchedDir(A),Y=I.has(B);if(I.remove(B),this._symlinkPaths.has(D))this._symlinkPaths.delete(D);let W=Z;if(this.options.cwd)W=K6.relative(this.options.cwd,Z);if(this.options.awaitWriteFinish&&this._pendingWrites.has(W)){if(this._pendingWrites.get(W).cancelWait()===O7.ADD)return}this._watched.delete(Z),this._watched.delete(D);let J=Q?O7.UNLINK_DIR:O7.UNLINK;if(Y&&!this._isIgnored(Z))this._emit(J,Z);this._closePath(Z)}_closePath(A){this._closeFile(A);let B=K6.dirname(A);this._getWatchedDir(B).remove(K6.basename(A))}_closeFile(A){let B=this._closers.get(A);if(!B)return;B.forEach((Q)=>Q()),this._closers.delete(A)}_addPathCloser(A,B){if(!B)return;let Q=this._closers.get(A);if(!Q)Q=[],this._closers.set(A,Q);Q.push(B)}_readdirp(A,B){if(this.closed)return;let Q={type:O7.ALL,alwaysStat:!0,lstat:!0,...B,depth:0},Z=hYA(A,Q);return this._streams.add(Z),Z.once(dYA,()=>{Z=void 0}),Z.once(sr1,()=>{if(Z)this._streams.delete(Z),Z=void 0}),Z}}function _3Q(A,B={}){let Q=new Ao1(B);return Q.add(A),Q}var AWA={watch:_3Q,FSWatcher:Ao1};import*as QWA from\"path\";var x3Q=1000,v3Q=500,b3Q=5000,ri=null,BWA=!1,ZWA=!1,lC1=new Map,a91=new Set;function f3Q(){if(BWA||ZWA)return;BWA=!0;let A=m3Q();if(A.length===0)return;F0(`Watching for changes in setting files ${A.join(\", \")}...`),ri=AWA.watch(A,{persistent:!0,ignoreInitial:!0,awaitWriteFinish:{stabilityThreshold:x3Q,pollInterval:v3Q},ignored:(B)=>B.split(QWA.sep).some((Q)=>Q===\".git\"),ignorePermissionErrors:!0,usePolling:!1,atomic:!0}),ri.on(\"change\",d3Q),ri.on(\"unlink\",c3Q)}function h3Q(){if(ZWA=!0,ri)ri.close(),ri=null;lC1.clear(),a91.clear()}function g3Q(A){return a91.add(A),()=>{a91.delete(A)}}function u3Q(A){let B=uO(A);if(B)lC1.set(B,Date.now())}function m3Q(){let A=k1();return $w.map((B)=>{let Q=uO(B);if(!Q)return;try{if(!A.statSync(Q).isFile())return}catch{return}return Q}).filter((B)=>B!==void 0)}function d3Q(A){let B=DWA(A);if(!B)return;let Q=lC1.get(A);if(Q&&Date.now()-Q<b3Q){lC1.delete(A);return}F0(`Detected change to ${A}`),a91.forEach((Z)=>Z(B))}function c3Q(A){let B=DWA(A);if(!B)return;F0(`Detected deletion of ${A}`),a91.forEach((Q)=>Q(B))}function DWA(A){return $w.find((B)=>uO(B)===A)}var pC1={initialize:f3Q,dispose:h3Q,subscribe:g3Q,markInternalWrite:u3Q};var r91=null;function Bo1(){switch(T9()){case\"macos\":return\"/Library/Application Support/ClaudeCode\";case\"windows\":return\"C:\\\\ProgramData\\\\ClaudeCode\";default:return\"/etc/claude-code\"}}function l3Q(){return o91(Bo1(),\"managed-settings.json\")}function p3Q(A){if(A.length===0)return\"unknown\";let B=A[0];if(!B)return\"unknown\";if(B.path.length>0)return B.path.join(\".\");return\"unknown\"}function i3Q(A,B){let Q=new Error(\"Invalid settings\"),Z=p3Q(B.issues);FWA.withScope((D)=>{if(A)D.setTag(\"settings_source\",u91(A));D.setTag(\"invalid_key\",Z),D.setContext(\"validation_error\",{errorMessage:B.message,issues:B.issues}),O1(Q)}),F0(`Invalid settings in ${A||\"unknown\"} source - key: ${Z}, error: ${B.message}`)}function n3Q(A,B){if(typeof A===\"object\"&&A&&\"code\"in A&&A.code===\"ENOENT\")F0(`Broken symlink or missing file encountered for settings.json at path: ${B}`);else O1(A instanceof Error?A:new Error(String(A)))}function IWA(A,B){let Q=k1();if(!Q.existsSync(A))return{settings:null,errors:[]};try{let{resolvedPath:Z}=CV(Q,A),D=TY(Z);if(D.trim()===\"\")return{settings:{},errors:[]};let G=R7(D),F=$YA.safeParse(G);if(!F.success)return i3Q(B,F.error),{settings:null,errors:PYA(F.error,A)};return{settings:F.data,errors:[]}}catch(Z){return n3Q(Z,A),{settings:null,errors:[]}}}function yC1(A){switch(A){case\"userSettings\":return s91(YQ());case\"policySettings\":case\"projectSettings\":case\"localSettings\":return s91(w9());case\"flagSettings\":{let B=nu1();return B?GWA(s91(B)):s91(w9())}}}function uO(A){switch(A){case\"userSettings\":return o91(yC1(A),\"settings.json\");case\"projectSettings\":case\"localSettings\":return o91(yC1(A),t91(A));case\"policySettings\":return l3Q();case\"flagSettings\":return nu1()}}function t91(A){switch(A){case\"projectSettings\":return o91(\".claude\",\"settings.json\");case\"localSettings\":return o91(\".claude\",\"settings.local.json\")}}function MY(A){let B=uO(A);if(!B)return null;let{settings:Q}=IWA(B,A);return Q}function h8(A,B){if(A===\"policySettings\"||A===\"flagSettings\")return{error:null};let Q=uO(A);if(!Q)return{error:null};try{let Z=GWA(Q);if(!k1().existsSync(Z))k1().mkdirSync(Z);let D=MY(A);if(!D&&k1().existsSync(Q)){let F=TY(Q),I=R7(F);if(I===null)return{error:new Error(`Invalid JSON syntax in settings file at ${Q}`)};if(I&&typeof I===\"object\")D=I,F0(`Using raw settings from ${Q} due to validation failure`)}let G=GW1(D||{},B,(F,I,Y,W)=>{if(I===void 0&&W&&typeof Y===\"string\"){delete W[Y];return}if(Array.isArray(I))return I;return});if(pC1.markInternalWrite(A),uN(Q,JSON.stringify(G,null,2)),e91(),A===\"localSettings\")ni(t91(\"localSettings\"),w9())}catch(Z){let D=new Error(`Failed to read raw settings from ${Q}: ${Z}`);return O1(D),{error:D}}return{error:null}}function a3Q(A,B){let Q=[...A,...B];return Array.from(new Set(Q))}function e91(){r91=null}function s3Q(){let A={},B=[],Q=new Set,Z=new Set;for(let G of $w){let F=uO(G);if(!F)continue;let I=s91(F);if(Z.has(I))continue;Z.add(I);let{settings:Y,errors:W}=IWA(F,G);for(let J of W){let X=`${J.file}:${J.path}:${J.message}`;if(!Q.has(X))Q.add(X),B.push(J)}if(Y)A=GW1(A,Y,(J,X)=>{if(Array.isArray(J)&&Array.isArray(X))return a3Q(J,X);return})}let D=[\"user\",\"project\",\"local\"];return B.push(...D.flatMap((G)=>nD(G).errors)),{settings:A,errors:B}}function W9(){let{settings:A}=dN();return A||{}}function dN(){if(r91!==null)return r91;return r91=s3Q(),r91}function Qo1(A,B=300000){let Q=new Map,Z=(...D)=>{let G=JSON.stringify(D),F=Q.get(G),I=Date.now();if(!F)Q.set(G,{value:A(...D),timestamp:I,refreshing:!1});if(F&&I-F.timestamp>B&&!F.refreshing)return F.refreshing=!0,Promise.resolve().then(()=>{let Y=A(...D);Q.set(G,{value:Y,timestamp:Date.now(),refreshing:!1})}).catch((Y)=>{O1(Y instanceof Error?Y:new Error(String(Y)));let W=Q.get(G);if(W)W.refreshing=!1}),F.value;return Q.get(G).value};return Z.cache={clear:()=>Q.clear()},Z}function YWA(A,B=300000){let Q=new Map,Z=async(...D)=>{let G=JSON.stringify(D),F=Q.get(G),I=Date.now();if(!F){let Y=await A(...D);return Q.set(G,{value:Y,timestamp:I,refreshing:!1}),Y}if(F&&I-F.timestamp>B&&!F.refreshing)return F.refreshing=!0,A(...D).then((Y)=>{Q.set(G,{value:Y,timestamp:Date.now(),refreshing:!1})}).catch((Y)=>{O1(Y instanceof Error?Y:new Error(String(Y)));let W=Q.get(G);if(W)W.refreshing=!1}),F.value;return Q.get(G).value};return Z.cache={clear:()=>Q.clear()},Z}function iC1(A,B){let Q=new Kw({max:1000}),Z=(...D)=>{let G=B(...D),F=Q.get(G);if(F!==void 0)return F;let I=A(...D);return Q.set(G,I),I};return Z.cache={clear:()=>Q.clear(),size:()=>Q.size},Z}import{createHash as r3Q}from\"crypto\";function AQ1(A=\"\"){let B=YQ(),Z=!process.env.CLAUDE_CONFIG_DIR?\"\":`-${r3Q(\"sha256\").update(B).digest(\"hex\").substring(0,8)}`;return`Claude Code${A}${Z}`}function WWA(){let A=AQ1(\"-credentials\");return{name:\"keychain\",read(){try{let B=FZ(`security find-generic-password -a $USER -w -s \"${A}\"`);if(B)return JSON.parse(B)}catch(B){return null}return null},update(B){try{let Z=JSON.stringify(B).replace(/\"/g,\"\\\\\\\"\"),D=`security add-generic-password -U -a $USER -s \"${A}\" -w \"${Z}\"`;return FZ(D),{success:!0}}catch(Q){return{success:!1}}},delete(){try{return FZ(`security delete-generic-password -a $USER -s \"${A}\"`),!0}catch(B){return!1}}}}import{join as o3Q}from\"path\";function Zo1(){let A=YQ(),B=\".credentials.json\",Q=o3Q(A,\".credentials.json\");return{name:\"plaintext\",read(){if(k1().existsSync(Q))try{let Z=k1().readFileSync(Q,{encoding:\"utf8\"});return JSON.parse(Z)}catch(Z){return null}return null},update(Z){try{if(!k1().existsSync(A))k1().mkdirSync(A);return k1().writeFileSync(Q,JSON.stringify(Z),{encoding:\"utf8\",flush:!1}),k1().chmodSync(Q,384),{success:!0,warning:\"Warning: Storing credentials in plaintext.\"}}catch(D){return{success:!1}}},delete(){if(k1().existsSync(Q))try{return k1().unlinkSync(Q),!0}catch(Z){return!1}return!0}}}function t3Q(A,B){return{name:`${A.name}-with-${B.name}-fallback`,read(){let Q=A.read();if(Q!==null&&Q!==void 0)return Q;return B.read()||{}},update(Q){let Z=A.read(),D=A.update(Q);if(D.success){if(Z===null)B.delete();return D}let G=B.update(Q);if(G.success)return{success:!0,warning:G.warning};return{success:!1}},delete(){let Q=A.delete(),Z=B.delete();return Q||Z}}}function GC(){if(process.platform===\"darwin\"){let A=WWA(),B=Zo1();return t3Q(A,B)}return Zo1()}async function JWA(A){let Q=E0().oauthAccount?.accountUuid,Z=SY(A);if(!Q||!Z)return;let D=`${j5().BASE_API_URL}/api/claude_cli_profile`;try{return(await x9.get(D,{headers:{\"x-api-key\":Z,\"anthropic-beta\":wp},params:{account_uuid:Q}})).data}catch(G){O1(G)}}async function BQ1(A){let B=`${j5().BASE_API_URL}/api/oauth/profile`;try{return(await x9.get(B,{headers:{Authorization:`Bearer ${A}`,\"Content-Type\":\"application/json\"}})).data}catch(Q){O1(Q)}}function cy(A){return Boolean(A?.includes(gV1))}function nC1(A){return A?.split(\" \").filter(Boolean)??[]}function Do1({codeChallenge:A,state:B,isManual:Q,loginWithClaudeAi:Z,inferenceOnly:D}){let G=Z?j5().CLAUDE_AI_AUTHORIZE_URL:j5().CONSOLE_AUTHORIZE_URL,F=new URL(G);F.searchParams.append(\"code\",\"true\"),F.searchParams.append(\"client_id\",j5().CLIENT_ID),F.searchParams.append(\"response_type\",\"code\"),F.searchParams.append(\"redirect_uri\",Q?j5().MANUAL_REDIRECT_URL:`http://localhost:${j5().REDIRECT_PORT}/callback`);let I=D?[gV1]:j5().SCOPES;return F.searchParams.append(\"scope\",I.join(\" \")),F.searchParams.append(\"code_challenge\",A),F.searchParams.append(\"code_challenge_method\",\"S256\"),F.searchParams.append(\"state\",B),F.toString()}async function XWA(A,B,Q,Z=!1,D){let G={grant_type:\"authorization_code\",code:A,redirect_uri:Z?j5().MANUAL_REDIRECT_URL:`http://localhost:${j5().REDIRECT_PORT}/callback`,client_id:j5().CLIENT_ID,code_verifier:Q,state:B};if(D!==void 0)G.expires_in=D;let F=await x9.post(j5().TOKEN_URL,G,{headers:{\"Content-Type\":\"application/json\"}});if(F.status!==200)throw new Error(F.status===401?\"Authentication failed: Invalid authorization code\":`Token exchange failed (${F.status}): ${F.statusText}`);return F.data}async function VWA(A){let B={grant_type:\"refresh_token\",refresh_token:A,client_id:j5().CLIENT_ID};try{let Q=await x9.post(j5().TOKEN_URL,B,{headers:{\"Content-Type\":\"application/json\"}});if(Q.status!==200)throw new Error(`Token refresh failed: ${Q.statusText}`);let Z=Q.data,{access_token:D,refresh_token:G=A,expires_in:F}=Z,I=Date.now()+F*1000,Y=nC1(Z.scope);K1(\"tengu_oauth_token_refresh_success\",{});let W=await Go1(D);return{accessToken:D,refreshToken:G,expiresAt:I,scopes:Y,subscriptionType:W}}catch(Q){throw K1(\"tengu_oauth_token_refresh_failure\",{}),Q}}async function KWA(A){let B=await x9.get(j5().ROLES_URL,{headers:{Authorization:`Bearer ${A}`}});if(B.status!==200)throw new Error(`Failed to fetch user roles: ${B.statusText}`);let Q=B.data,Z=E0();if(!Z.oauthAccount)throw new Error(\"OAuth account information not found in config\");Z.oauthAccount.organizationRole=Q.organization_role,Z.oauthAccount.workspaceRole=Q.workspace_role,Z.oauthAccount.organizationName=Q.organization_name,pA(Z),K1(\"tengu_oauth_roles_stored\",{org_role:Q.organization_role})}async function CWA(A){try{let B=await x9.post(j5().API_KEY_URL,null,{headers:{Authorization:`Bearer ${A}`}}),Q=B.data?.raw_key;if(Q)return HWA(Q),K1(\"tengu_oauth_api_key\",{status:\"success\",statusCode:B.status}),Q;return null}catch(B){throw K1(\"tengu_oauth_api_key\",{status:\"failure\",error:B instanceof Error?B.message:String(B)}),B}}function aC1(A){if(A===null)return!1;let B=300000;return Date.now()+B>=A}async function Go1(A){switch((await BQ1(A))?.organization?.organization_type){case\"claude_max\":return\"max\";case\"claude_pro\":return\"pro\";case\"claude_enterprise\":return\"enterprise\";case\"claude_team\":return\"team\";default:return null}}async function sC1(){let B=E0().oauthAccount?.organizationUuid;if(B)return B;let Q=IZ()?.accessToken;if(Q===void 0)return null;let D=(await BQ1(Q))?.organization?.uuid;if(!D)return null;return D}var FsA=F1(IH1(),1);var A$1=F1(hSA(),1),QsA=F1(PQ0(),1);function ZsA(A){return A?.name===\"CredentialsProviderError\"}function DsA(A){if(!A||typeof A!==\"object\")return!1;let B=A;if(!B.Credentials||typeof B.Credentials!==\"object\")return!1;let Q=B.Credentials;return typeof Q.AccessKeyId===\"string\"&&typeof Q.SecretAccessKey===\"string\"&&typeof Q.SessionToken===\"string\"&&Q.AccessKeyId.length>0&&Q.SecretAccessKey.length>0&&Q.SessionToken.length>0}var SQ0=async()=>{await new A$1.STSClient().send(new A$1.GetCallerIdentityCommand({}))};async function GsA(){try{F0(\"Clearing AWS credential provider cache\"),await QsA.fromIni({ignoreCache:!0})(),F0(\"AWS credential provider cache refreshed\")}catch(A){F0(\"Failed to clear AWS credential cache (this is expected if no credentials are configured)\")}}import{exec as MB4}from\"child_process\";var RB4=300000;function mz(){let A=process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX,Q=(W9()||{}).apiKeyHelper,Z=process.env.ANTHROPIC_AUTH_TOKEN||Q,{source:D}=ZX(Ql());return!(A||Z||(D===\"ANTHROPIC_API_KEY\"||D===\"apiKeyHelper\"))}function Vg(){if(process.env.ANTHROPIC_AUTH_TOKEN)return{source:\"ANTHROPIC_AUTH_TOKEN\",hasToken:!0};if(process.env.CLAUDE_CODE_OAUTH_TOKEN)return{source:\"CLAUDE_CODE_OAUTH_TOKEN\",hasToken:!0};if(Kg())return{source:\"apiKeyHelper\",hasToken:!0};let B=IZ();if(cy(B?.scopes)&&B?.accessToken)return{source:\"claude.ai\",hasToken:!0};return{source:\"none\",hasToken:!1}}function SY(A){let{key:B}=ZX(A);return B}function ZX(A){if(A&&process.env.ANTHROPIC_API_KEY)return{key:process.env.ANTHROPIC_API_KEY,source:\"ANTHROPIC_API_KEY\"};if(dQ(!1)){if(!process.env.ANTHROPIC_API_KEY&&!process.env.CLAUDE_CODE_OAUTH_TOKEN)throw new Error(\"ANTHROPIC_API_KEY or CLAUDE_CODE_OAUTH_TOKEN env var is required\");if(process.env.ANTHROPIC_API_KEY)return{key:process.env.ANTHROPIC_API_KEY,source:\"ANTHROPIC_API_KEY\"};return{key:null,source:\"none\"}}if(process.env.ANTHROPIC_API_KEY&&E0().customApiKeyResponses?.approved?.includes($C(process.env.ANTHROPIC_API_KEY)))return{key:process.env.ANTHROPIC_API_KEY,source:\"ANTHROPIC_API_KEY\"};let B=Kg();if(B)return{key:B,source:\"apiKeyHelper\"};let Q=l41();if(Q)return Q;return{key:null,source:\"none\"}}function OB4(){let A=process.env.CLAUDE_CODE_API_KEY_HELPER_TTL_MS;if(A){let B=parseInt(A,10);if(!Number.isNaN(B)&&B>=0)return B;N2(`Found CLAUDE_CODE_API_KEY_HELPER_TTL_MS env var, but it was not a valid number. Got ${A}`)}return RB4}var Kg=Qo1(()=>{let B=(W9()||{}).apiKeyHelper;if(!B)return null;try{let Q=FZ(B)?.toString().trim();if(!Q)throw new Error(\"apiKeyHelper did not return a valid value\");return Q}catch(Q){let Z=A0.red(\"Error getting API key from apiKeyHelper (in settings or ~/.claude.json):\");if(Q instanceof Error&&\"stderr\"in Q)console.error(Z,String(Q.stderr));else if(Q instanceof Error)console.error(Z,Q.message);else console.error(Z,Q);return\" \"}},OB4());function IsA(){Kg.cache.clear()}var TB4=3600000;async function PB4(){let A=W9()?.awsAuthRefresh;if(!A)return!1;try{return F0(\"Fetching AWS caller identity for AWS auth refresh command\"),await SQ0(),F0(\"Fetched AWS caller identity, skipping AWS auth refresh command\"),!1}catch{return F0(\"Running AWS auth refresh command\"),new Promise((B)=>{let Q=MB4(A);Q.stdout.on(\"data\",(Z)=>{console.log(Z)}),Q.stderr.on(\"data\",(Z)=>{console.error(Z)}),Q.on(\"close\",(Z)=>{if(Z===0)F0(\"AWS auth refresh completed successfully\"),B(!0);else{let D=A0.red(\"Error running awsAuthRefresh (in settings or ~/.claude.json):\");console.error(D),B(!1)}})})}}async function SB4(){let A=W9()?.awsCredentialExport;if(!A)return null;try{return F0(\"Fetching AWS caller identity for credential export command\"),await SQ0(),F0(\"Fetched AWS caller identity, skipping AWS credential export command\"),null}catch{try{F0(\"Running AWS credential export command\");let B=FZ(A)?.toString().trim();if(!B)throw new Error(\"awsCredentialExport did not return a valid value\");let Q=JSON.parse(B);if(!DsA(Q))throw new Error(\"awsCredentialExport did not return valid AWS STS output structure\");return F0(\"AWS credentials retrieved from awsCredentialExport\"),{accessKeyId:Q.Credentials.AccessKeyId,secretAccessKey:Q.Credentials.SecretAccessKey,sessionToken:Q.Credentials.SessionToken}}catch(B){let Q=A0.red(\"Error getting AWS credentials from awsCredentialExport (in settings or ~/.claude.json):\");if(B instanceof Error&&\"stderr\"in B)console.error(Q,String(B.stderr));else if(B instanceof Error)console.error(Q,B.message);else console.error(Q,B);return null}}}var c41=Qo1(async()=>{let A=await PB4(),B=await SB4();if(A||B)await GsA();return B},TB4);function YsA(){c41.cache.clear()}function $C(A){return A.slice(-20)}var l41=OA(()=>{if(process.platform===\"darwin\"){let B=AQ1();try{let Q=FZ(`security find-generic-password -a $USER -w -s \"${B}\"`);if(Q)return{key:Q,source:\"/login managed key\"}}catch(Q){O1(Q)}}let A=E0();if(!A.primaryApiKey)return null;return{key:A.primaryApiKey,source:\"/login managed key\"}});function jB4(A){return/^[a-zA-Z0-9-_]+$/.test(A)}function HWA(A){if(!jB4(A))throw new Error(\"Invalid API key format. API key must contain only alphanumeric characters, dashes, and underscores.\");let B=E0();if(XsA(),process.platform===\"darwin\")try{let Z=AQ1();FZ(`security add-generic-password -a $USER -s \"${Z}\" -w ${A}`)}catch(Z){O1(Z),B.primaryApiKey=A}else B.primaryApiKey=A;if(!B.customApiKeyResponses)B.customApiKeyResponses={approved:[],rejected:[]};if(!B.customApiKeyResponses.approved)B.customApiKeyResponses.approved=[];let Q=$C(A);if(!B.customApiKeyResponses.approved.includes(Q))B.customApiKeyResponses.approved.push(Q);pA(B),l41.cache.clear?.()}function WsA(A){let B=E0(),Q=$C(A);return B.customApiKeyResponses?.approved?.includes(Q)??!1}function JsA(){XsA();let A=E0();A.primaryApiKey=void 0,pA(A),l41.cache.clear?.()}function XsA(){if(process.platform===\"darwin\")try{let A=AQ1();FZ(`security delete-generic-password -a $USER -s \"${A}\"`)}catch(A){O1(A)}}function p41(A){if(!cy(A.scopes))return{success:!0};if(!A.refreshToken||!A.expiresAt)return{success:!0};try{let B=GC(),Q=B.read()||{};Q.claudeAiOauth={accessToken:A.accessToken,refreshToken:A.refreshToken,expiresAt:A.expiresAt,scopes:A.scopes,subscriptionType:A.subscriptionType};let Z=B.update(Q);return IZ.cache?.clear?.(),RV.cache?.clear?.(),Z}catch(B){return O1(B),{success:!1,warning:\"Failed to save OAuth tokens\"}}}var IZ=OA(()=>{if(process.env.CLAUDE_CODE_OAUTH_TOKEN)return{accessToken:process.env.CLAUDE_CODE_OAUTH_TOKEN,refreshToken:null,expiresAt:null,scopes:[\"user:inference\"],subscriptionType:null};try{let Q=GC().read()?.claudeAiOauth;if(!Q?.accessToken)return null;if(!Q.subscriptionType){let Z=Q.isMax===!1?\"pro\":\"max\";return{...Q,subscriptionType:Z}}return Q}catch(A){return O1(A),null}});async function na(A=0){let Q=IZ();if(!Q?.refreshToken||!aC1(Q.expiresAt))return!1;if(IZ.cache?.clear?.(),Q=IZ(),!Q?.refreshToken||!aC1(Q.expiresAt))return!1;let Z=YQ();k1().mkdirSync(Z);let G;try{G=await FsA.lock(Z)}catch(F){if(F.code===\"ELOCKED\"){if(A<5)return await new Promise((I)=>setTimeout(I,1000+Math.random()*1000)),na(A+1);return!1}return O1(F),!1}try{if(IZ.cache?.clear?.(),Q=IZ(),!Q?.refreshToken||!aC1(Q.expiresAt))return!1;let F=await VWA(Q.refreshToken);return p41({...F,scopes:Q.scopes}),IZ.cache?.clear?.(),!0}catch(F){return O1(F instanceof Error?F:new Error(String(F))),!1}finally{await G()}}function Q9(){if(!mz())return!1;return cy(IZ()?.scopes)}function VsA(){if(process.env.CLAUDE_CODE_USE_BEDROCK===\"true\"||process.env.CLAUDE_CODE_USE_VERTEX===\"true\")return!1;if(Q9())return!1;return!0}function pY(){let A=CsA();return A===\"max\"||A===\"enterprise\"||A===\"team\"}function KsA(){return pY()}function CsA(){if(!mz())return null;let A=IZ();if(!A)return null;return A.subscriptionType??null}function B$1(){switch(CsA()){case\"enterprise\":return\"Claude Enterprise\";case\"team\":return\"Claude Team\";case\"max\":return\"Claude Max\";case\"pro\":return\"Claude Pro\";default:return\"Claude API\"}}function aa(){return!!(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX)}function HsA(){let B=W9()?.otelHeadersHelper;if(!B)return{};try{let Q=FZ(B)?.toString().trim();if(!Q)throw new Error(\"otelHeadersHelper did not return a valid value\");let Z=JSON.parse(Q);if(typeof Z!==\"object\"||Z===null||Array.isArray(Z))throw new Error(\"otelHeadersHelper must return a JSON object with string key-value pairs\");for(let[D,G]of Object.entries(Z))if(typeof G!==\"string\")throw new Error(`otelHeadersHelper returned non-string value for key \"${D}\": ${typeof G}`);return Z}catch(Q){throw O1(new Error(`Error getting OpenTelemetry headers from otelHeadersHelper (in settings): ${Q instanceof Error?Q.message:String(Q)}`)),Q}}function yB4(A){let B=mZ();if(B===\"bedrock\")return!1;else if(B===\"firstParty\")return!A.includes(\"claude-3-\");else return A.includes(\"claude-opus-4\")||A.includes(\"claude-sonnet-4\")}var RV=OA((A)=>{let B=[],Q=A.includes(\"haiku\");if(!Q)B.push(qo0);if(Q9())B.push(wp);if(!dQ(process.env.DISABLE_INTERLEAVED_THINKING)&&yB4(A))B.push(hV1);if(mZ()===\"firstParty\"&&!dQ(process.env.CLAUDE_CODE_DISABLE_FINE_GRAINED_TOOL_STREAMING))B.push(No0);if(dQ(process.env.USE_API_CONTEXT_MANAGEMENT),process.env.ANTHROPIC_BETAS&&!Q)B.push(...process.env.ANTHROPIC_BETAS.split(\",\").map((D)=>D.trim()).filter(Boolean));return B});var Cg={firstParty:\"claude-3-7-sonnet-20250219\",bedrock:\"us.anthropic.claude-3-7-sonnet-20250219-v1:0\",vertex:\"claude-3-7-sonnet@20250219\"},Hg={firstParty:\"claude-3-5-sonnet-20241022\",bedrock:\"anthropic.claude-3-5-sonnet-20241022-v2:0\",vertex:\"claude-3-5-sonnet-v2@20241022\"},i41={firstParty:\"claude-3-5-haiku-20241022\",bedrock:\"us.anthropic.claude-3-5-haiku-20241022-v1:0\",vertex:\"claude-3-5-haiku@20241022\"},bw={firstParty:\"claude-sonnet-4-20250514\",bedrock:\"us.anthropic.claude-sonnet-4-20250514-v1:0\",vertex:\"claude-sonnet-4@20250514\"};var ST={firstParty:\"claude-opus-4-20250514\",bedrock:\"us.anthropic.claude-opus-4-20250514-v1:0\",vertex:\"claude-opus-4@20250514\"},jT={firstParty:\"claude-opus-4-1-20250805\",bedrock:\"us.anthropic.claude-opus-4-1-20250805-v1:0\",vertex:\"claude-opus-4-1@20250805\"};function zsA(A){let B=A.toLowerCase();if(B.includes(\"claude-sonnet-4\"))return\"Sonnet 4\";if(B.includes(\"claude-opus-4-1\"))return\"Opus 4.1\";if(B.includes(\"claude-opus-4\"))return\"Opus 4\";if(B.includes(\"claude-3-7-sonnet\"))return\"Claude 3.7 Sonnet\";if(B.includes(\"claude-3-5-sonnet\"))return\"Claude 3.5 Sonnet\";if(B.includes(\"claude-3-5-haiku\"))return\"Claude 3.5 Haiku\";return}var vM1=F1(P42(),1);var pw2=F1($70(),1),iw2=F1(_3(),1);var _M1=F1(N70(),1);var xM1=F1(pD0(),1);import{Agent as Rl4}from\"https\";var mw2=F1(pD0(),1);var GP=OA(()=>{let A={};if(process.env.CLAUDE_CODE_CLIENT_CERT)try{A.cert=k1().readFileSync(process.env.CLAUDE_CODE_CLIENT_CERT,{encoding:\"utf8\"}),F0(\"mTLS: Loaded client certificate from CLAUDE_CODE_CLIENT_CERT\")}catch(B){N2(`mTLS: Failed to load client certificate: ${B}`)}if(process.env.CLAUDE_CODE_CLIENT_KEY)try{A.key=k1().readFileSync(process.env.CLAUDE_CODE_CLIENT_KEY,{encoding:\"utf8\"}),F0(\"mTLS: Loaded client key from CLAUDE_CODE_CLIENT_KEY\")}catch(B){N2(`mTLS: Failed to load client key: ${B}`)}if(process.env.CLAUDE_CODE_CLIENT_KEY_PASSPHRASE)A.passphrase=process.env.CLAUDE_CODE_CLIENT_KEY_PASSPHRASE,F0(\"mTLS: Using client key passphrase\");if(Object.keys(A).length===0)return;return A}),dw2=OA(()=>{let A=GP();if(!A)return;let B={...A,keepAlive:!0};return F0(\"mTLS: Creating HTTPS agent with custom certificates\"),new Rl4(B)});function cw2(){let A=GP();if(!A)return;return{cert:A.cert,key:A.key,passphrase:A.passphrase}}function Au(){let A=GP();if(!A)return{};let B={cert:A.cert,key:A.key,passphrase:A.passphrase},Q=new mw2.Agent({connect:B,pipelining:1});return F0(\"mTLS: Created undici agent with custom certificates\"),{dispatcher:Q}}function lw2(){if(!GP())return;if(process.env.NODE_EXTRA_CA_CERTS)F0(\"NODE_EXTRA_CA_CERTS detected - Node.js will automatically append to built-in CAs\")}function Z51(){return process.env.https_proxy||process.env.HTTPS_PROXY||process.env.http_proxy||process.env.HTTP_PROXY}var nw2=OA((A)=>{let B=GP(),Q={uri:A,pipelining:1};if(B)Q.requestTls={cert:B.cert,key:B.key,passphrase:B.passphrase};return new xM1.default.ProxyAgent(Q)});function aw2(){let A=Z51(),B=Au();if(A)return{dispatcher:nw2(A)};return B}function sw2(){let A=Z51(),B=dw2(),Q=GP();if(A){if(x9.defaults.proxy=!1,Q)x9.defaults.httpsAgent=new _M1.default.HttpsProxyAgent(A,{cert:Q.cert,key:Q.key,passphrase:Q.passphrase});else x9.defaults.httpsAgent=new _M1.default.HttpsProxyAgent(A);xM1.default.setGlobalDispatcher(nw2(A))}else if(B){x9.defaults.httpsAgent=B;let Z=Au();if(Z.dispatcher)xM1.default.setGlobalDispatcher(Z.dispatcher)}}function rw2(){let A=Z51();if(!A)return{};let B=new _M1.default.HttpsProxyAgent(A),Q=new iw2.NodeHttpHandler({httpAgent:B,httpsAgent:B});return{requestHandler:Q,credentials:pw2.defaultProvider({clientConfig:{requestHandler:Q}})}}var ow2=OA(async function(){let A=Ep(),B=await c41(),Q={region:A,...rw2()};if(B)Q.credentials={accessKeyId:B.accessKeyId,secretAccessKey:B.secretAccessKey,sessionToken:B.sessionToken};let Z=new vM1.BedrockClient(Q),D=new vM1.ListInferenceProfilesCommand;try{return((await Z.send(D)).inferenceProfileSummaries||[]).filter((W)=>W.inferenceProfileId?.includes(\"anthropic\")).map((W)=>W.inferenceProfileId).filter(Boolean)}catch(G){throw O1(G),G}});function Bu(A,B){return A.find((Q)=>Q.includes(B))??null}function bM1(A){let B=[],Q=!1;async function Z(){if(Q)return;if(B.length===0)return;Q=!0;while(B.length>0){let{args:D,resolve:G,reject:F,context:I}=B.shift();try{let Y=await A.apply(I,D);G(Y)}catch(Y){F(Y)}}if(Q=!1,B.length>0)Z()}return function(...D){return new Promise((G,F)=>{B.push({args:D,resolve:G,reject:F,context:this}),Z()})}}function fM1(A){return{haiku35:i41[A],sonnet35:Hg[A],sonnet37:Cg[A],sonnet40:bw[A],opus40:ST[A],opus41:jT[A]}}async function Ol4(){let A;try{A=await ow2()}catch(I){return O1(I),fM1(\"bedrock\")}if(!A?.length)return fM1(\"bedrock\");let B=Bu(A,\"claude-3-5-haiku-20241022\"),Q=Bu(A,\"claude-3-5-sonnet-20241022\"),Z=Bu(A,\"claude-3-7-sonnet-20250219\"),D=Bu(A,\"claude-sonnet-4-20250514\"),G=Bu(A,\"claude-opus-4-20250514\"),F=Bu(A,\"claude-opus-4-1-20250805\");return{haiku35:B||i41.bedrock,sonnet35:Q||Hg.bedrock,sonnet37:Z||Cg.bedrock,sonnet40:D||bw.bedrock,opus40:G||ST.bedrock,opus41:F||jT.bedrock}}var Tl4=bM1(async()=>{if(HW1()!==null)return;try{let A=await Ol4();cu1(A)}catch(A){O1(A)}});function Pl4(){if(HW1()!==null)return;if(mZ()!==\"bedrock\"){cu1(fM1(mZ()));return}Tl4()}function wI(){let A=HW1();if(A===null)return Pl4(),fM1(mZ());return A}var tw2=[\"sonnet\",\"opus\",\"haiku\",...[]],Sl4=bw,ew2=Sl4.firstParty,D51=[...tw2,\"inherit\"],nD0=\"sonnet\";function Zu(){return process.env.ANTHROPIC_SMALL_FAST_MODEL||wI().haiku35}function Go(A){return A===wI().opus40||A===wI().opus41}function Fo(){let A,B=A21();if(B!==void 0)A=B;else{let Q=W9()||{};A=process.env.ANTHROPIC_MODEL||Q.model||void 0}if(Q9()&&!pY()&&A?.includes(\"opus\"))return;return A}function WG(){let A=Fo();if(A!==void 0&&A!==null)return N_(A);if(A===null&&Al())return FP();return G51()}function A$2(){if(mZ()===\"bedrock\")return wI().sonnet37;return wI().sonnet40}function hM1(A){let{permissionMode:B,mainLoopModel:Q}=A;return Q}var Qq5=OA(()=>{return null});function G51(A={}){let{forDisplay:B=!1}=A;if(pY())return wI().opus41;return A$2()}function FP(){return A$2()}function tw(A){if(A.includes(\"claude-opus-4-1\"))return\"claude-opus-4-1\";if(A.includes(\"claude-opus-4\"))return\"claude-opus-4\";let B=A.match(/(claude-(\\d+-\\d+-)?\\w+)/);if(B&&B[1])return B[1];return A}function gM1(){if(Q9()&&!pY())return uM1.description;let A=E0().fallbackAvailableWarningThreshold;if(A===void 0)return\"Use Opus 4.1 or Sonnet 4 based on Max usage limits\";return`Opus 4.1 for up to ${(A*100).toFixed(0)}% of usage limits, then use Sonnet 4`}function IP(A){if(A===wI().opus41)return\"Opus 4.1\";if(A===wI().opus40)return\"Opus 4\";if(A===wI().sonnet40)return\"Sonnet 4\";if(A===wI().sonnet37)return\"Sonnet 3.7\";if(A===wI().sonnet35)return\"Sonnet 3.5\";if(A===wI().haiku35)return\"Haiku 3.5\";return A}function Qu(){if(Q9()&&!pY())return{value:null,label:\"Sonnet\",description:uM1.description};if(pY())return{value:null,label:\"Default (recommended)\",description:gM1()};return{value:null,label:\"Default (recommended)\",description:`Use the default model (currently ${IP(G51({forDisplay:!0}))}) · $3/$15 per Mtok`}}var B$2={value:\"sonnet\",label:\"Sonnet\",description:\"Sonnet 4 for daily use · $3/$15 per Mtok\"};var iD0={value:\"opus\",label:\"Opus\",description:\"Opus 4.1 for complex tasks · $15/$75 per Mtok\"},jl4={value:\"opus\",label:\"Opus\",description:\"Opus 4.1 for complex tasks · Reaches usage limits faster\"},uM1={value:\"sonnet\",label:\"Sonnet\",description:\"Sonnet 4 for daily use\"};function yl4(){if(Q9()&&!pY())return[Qu()];if(pY())return[Qu(),jl4,uM1];if(mZ()===\"bedrock\")return[Qu(),B$2,iD0];return[Qu(),iD0]}function Q$2(){let A=yl4(),B=null,Q=Fo(),Z=CW1();if(Q!==void 0&&Q!==null)B=Q;else if(Z!==null)B=Z;if(B===null||A.some((D)=>D.value===B))return A;if(Z$2(B))A.push(B===\"sonnet\"?B$2:iD0);else A.push({value:B,label:B,description:\"Custom model\"});return A}function Z$2(A){return tw2.includes(A)}function N_(A){let B=A.toLowerCase().trim();if(Z$2(B))switch(B){case\"sonnet\":return wI().sonnet40;case\"opus\":return wI().opus41;case\"haiku\":return wI().haiku35}return B}function Du(A){if(A===null){if(Q9()&&!pY())return`Sonnet (${uM1.description})`;else if(Q9())return`Default (${gM1()})`;return`Default (${G51({forDisplay:!0})})`}let B=N_(A);return A===B?B:`${A} (${B})`}function D$2(A){return A}function G$2(A,B){if(process.env.CLAUDE_CODE_SUBAGENT_MODEL)return process.env.CLAUDE_CODE_SUBAGENT_MODEL;if(!A)return N_(nD0);return A===\"inherit\"?B:N_(A)}function mM1(A){if(!A)return\"Sonnet (default)\";if(A===\"inherit\")return\"Inherit from parent\";return A.charAt(0).toUpperCase()+A.slice(1)}function F$2(){let A=[{value:\"sonnet\",label:\"Sonnet\",description:\"Balanced performance - best for most agents\"}];if(!(Q9()&&!pY()))A.push({value:\"opus\",label:\"Opus\",description:\"Most capable for complex reasoning tasks\"});return A.push({value:\"haiku\",label:\"Haiku\",description:\"Fast and efficient for simple tasks\"},{value:\"inherit\",label:\"Inherit from parent\",description:\"Use the same model as the main conversation\"}),A}var I$2={},Gu=null,Y$2=OA(()=>{if(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX||process.env.DISABLE_TELEMETRY||process.env.CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC)return null;let A=hl(),B={networkConfig:{api:\"https://statsig.anthropic.com/v1/\"},environment:{tier:[\"test\",\"dev\"].includes(\"production\")?\"development\":\"production\"},includeCurrentPageUrlWithEvents:!1,logLevel:dM1.LogLevel.None,storageProvider:new Li1,customUserCacheKeyFunc:(Z,D)=>{return kl4(\"sha1\").update(Z).update(D.userID||\"\").digest(\"hex\").slice(0,10)}};Gu=new dM1.StatsigClient(rl0,A,B),Gu.on(\"error\",()=>{x9.head(\"https://api.anthropic.com/api/hello\").catch(()=>{})});let Q=Gu.initializeAsync().then(()=>{});return process.on(\"beforeExit\",async()=>{await Gu?.flush()}),process.on(\"exit\",()=>{Gu?.flush()}),{client:Gu,initialized:Q}}),Fu=OA(async()=>{let A=Y$2();if(!A)return null;return await A.initialized,A.client});function W$2(){Gu=null,Y$2.cache?.clear?.(),Fu.cache?.clear?.(),xl4.cache?.clear?.(),gV.cache?.clear?.()}async function _l4(A,B){if(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX||process.env.DISABLE_TELEMETRY||process.env.CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC)return;try{let Q=B.model?String(B.model):WG(),Z=RV(Q),[D,G,F]=await Promise.all([Fu(),MA.getPackageManagers(),MA.getRuntimes()]);if(!D)return;let I={...B,model:Q,sessionId:NB(),userType:\"external\",...Z.length>0?{betas:Z.join(\",\")}:{},env:JSON.stringify({platform:MA.platform,nodeVersion:MA.nodeVersion,terminal:MA.terminal,packageManagers:G.join(\",\"),runtimes:F.join(\",\"),isRunningWithBun:MA.isRunningWithBun(),isCi:dQ(!1),isClaubbit:process.env.CLAUBBIT===\"true\",isGithubAction:process.env.GITHUB_ACTIONS===\"true\",isClaudeCodeAction:process.env.CLAUDE_CODE_ACTION===\"1\"||process.env.CLAUDE_CODE_ACTION===\"true\",isClaudeAiAuth:Q9(),version:{ISSUES_EXPLAINER:\"report the issue at https://github.com/anthropics/claude-code/issues\",PACKAGE_URL:\"@anthropic-ai/claude-code\",README_URL:\"https://docs.anthropic.com/s/claude-code\",VERSION:\"1.0.73\"}.VERSION,...process.env.GITHUB_ACTIONS===\"true\"&&{githubEventName:process.env.GITHUB_EVENT_NAME,githubActionsRunnerEnvironment:process.env.RUNNER_ENVIRONMENT,githubActionsRunnerOs:process.env.RUNNER_OS},...vB1()&&{wslVersion:vB1()}}),entrypoint:process.env.CLAUDE_CODE_ENTRYPOINT,isInteractive:String(nj0()),clientType:sj0(),...void 0,sweBenchRunId:process.env.SWE_BENCH_RUN_ID||\"\",sweBenchInstanceId:process.env.SWE_BENCH_INSTANCE_ID||\"\",sweBenchTaskId:process.env.SWE_BENCH_TASK_ID||\"\"},Y={eventName:A,metadata:I};D.logEvent(Y),await D.flush()}catch(Q){}}function K1(A,B){_l4(A,B)}var gV=OA(async(A)=>{if(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX||process.env.DISABLE_TELEMETRY||process.env.CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC)return!1;let B=await Fu();if(!B)return!1;let Q=B.checkGate(A);return I$2[A]=Q,Q});var cM1=(A,B)=>{let[Q,Z]=aD0.default.useState(B);return aD0.default.useEffect(()=>{ew(A,B).then(Z)},[A,B]),Q};function J$2(){return{...I$2}}var xl4=OA(async(A,B)=>{if(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX||process.env.DISABLE_TELEMETRY||process.env.CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC)return B;let Q=await Fu();if(!Q)return B;let Z=Q.getExperiment(A);if(Object.keys(Z.value).length===0)return B;return Z.value});async function ew(A,B){if(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX||process.env.DISABLE_TELEMETRY||process.env.CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC)return B;let Q=await Fu();if(!Q)return B;let Z=Q.getDynamicConfig(A);if(Object.keys(Z.value).length===0)return B;return Z.value}var $q5=OA(ew);function X$2(){nL.init({dsn:sl0,environment:\"external\",release:{ISSUES_EXPLAINER:\"report the issue at https://github.com/anthropics/claude-code/issues\",PACKAGE_URL:\"@anthropic-ai/claude-code\",README_URL:\"https://docs.anthropic.com/s/claude-code\",VERSION:\"1.0.73\"}.VERSION,defaultIntegrations:!1,tracesSampleRate:1,tracePropagationTargets:[\"localhost\"]})}function lM1(A){try{let B=hl();nL.setTags({platform:MA.platform,terminal:MA.terminal,userType:\"external\",...J$2()}),nL.setExtras({sessionId:NB(),isCI:MA.isCI,isTest:!1,packageVersion:{ISSUES_EXPLAINER:\"report the issue at https://github.com/anthropics/claude-code/issues\",PACKAGE_URL:\"@anthropic-ai/claude-code\",README_URL:\"https://docs.anthropic.com/s/claude-code\",VERSION:\"1.0.73\"}.VERSION}),nL.setUser({id:B.userID,email:B.email}),nL.captureException(A)}catch{}}var pM1=[],bl4=100;function fl4(A){return A.toISOString().replace(/[:.]/g,\"-\")}var oD0=fl4(new Date);function hl4(){return rD0(mN.errors(),oD0+\".txt\")}var sD0=!1;function O1(A){if(sD0)return;sD0=!0;try{if(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX||process.env.DISABLE_ERROR_REPORTING||process.env.CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC)return;if(dQ(!1))console.error(A);let B=A.stack||A.message,Q={error:B,timestamp:new Date().toISOString()};if(pM1.length>=bl4)pM1.shift();pM1.push(Q),gl4(hl4(),{error:B})}catch{}finally{sD0=!1}lM1(A)}function V$2(){return[...pM1]}function tD0(A){if(!k1().existsSync(A))return[];try{return JSON.parse(k1().readFileSync(A,{encoding:\"utf8\"}))}catch{return[]}}function gl4(A,B){return}async function Io(){let A=await SIA();return ul4(A.filter((B)=>B.messages.length)).map((B,Q)=>({...B,value:Q}))}async function K$2(A){return await yIA(A)}async function C$2(A){return(await Io())[A]||null}function ul4(A){return A.sort((B,Q)=>{if(B.isBookmarked&&!Q.isBookmarked)return-1;if(!B.isBookmarked&&Q.isBookmarked)return 1;let Z=Q.modified.getTime()-B.modified.getTime();if(Z!==0)return Z;let D=Q.created.getTime()-B.created.getTime();if(D!==0)return D;return B.created.getTime()-Q.created.getTime()})}function JG(A,B){if(N2(A0.red(`MCP server \"${A}\" ${B}`)),(W9()||{}).cleanupPeriodDays===0)return;try{let Z=mN.mcpLogs(A),D=B instanceof Error?B.stack||B.message:String(B),G=new Date().toISOString(),F=rD0(Z,oD0+\".txt\");if(!k1().existsSync(Z))k1().mkdirSync(Z);if(!k1().existsSync(F))k1().writeFileSync(F,\"[]\",{encoding:\"utf8\",flush:!1});let I={error:D,timestamp:G,sessionId:NB(),cwd:k1().cwd()},Y=tD0(F);Y.push(I),k1().writeFileSync(F,JSON.stringify(Y,null,2),{encoding:\"utf8\",flush:!1})}catch{}}function GB(A,B){F0(`MCP server \"${A}\": ${B}`);try{let Q=mN.mcpLogs(A),Z=new Date().toISOString(),D=rD0(Q,oD0+\".txt\");if(!k1().existsSync(Q))k1().mkdirSync(Q);if(!k1().existsSync(D))k1().writeFileSync(D,\"[]\",{encoding:\"utf8\",flush:!1});let G={debug:B,timestamp:Z,sessionId:NB(),cwd:k1().cwd()},F=tD0(D);F.push(G),k1().writeFileSync(D,JSON.stringify(F,null,2),{encoding:\"utf8\",flush:!1})}catch{}}var F51=1000,I51=60;function Y2(A,B,Q={timeout:10*I51*F51,preserveOutputOnError:!0,useCwd:!0}){return l5(A,B,{abortSignal:Q.abortSignal,timeout:Q.timeout,preserveOutputOnError:Q.preserveOutputOnError,cwd:Q.useCwd?a0():void 0,env:Q.env})}function l5(A,B,Q={timeout:10*I51*F51,preserveOutputOnError:!0,maxBuffer:1e6}){let{abortSignal:Z,timeout:D=10*I51*F51,preserveOutputOnError:G=!0,cwd:F,env:I}=Q;return new Promise((Y)=>{Pm1(A,B,{maxBuffer:Q.maxBuffer,signal:Z,timeout:D,cwd:F,env:I,reject:!1}).then((W)=>{if(W.failed)if(G){let J=W.exitCode??1;Y({stdout:W.stdout||\"\",stderr:W.stderr||\"\",code:J,error:typeof W.signal===\"string\"?W.signal:String(J)})}else Y({stdout:\"\",stderr:\"\",code:W.exitCode??1});else Y({stdout:W.stdout,stderr:W.stderr,code:0})}).catch((W)=>{O1(W),Y({stdout:\"\",stderr:\"\",code:1})})})}function FZ(A,B,Q=10*I51*F51){let Z;if(B===void 0)Z={};else if(B instanceof AbortSignal)Z={abortSignal:B,timeout:Q};else Z=B;let{abortSignal:D,timeout:G=10*I51*F51}=Z;D?.throwIfAborted();try{let F=Sm1(A,{env:process.env,maxBuffer:1e6,timeout:G,cwd:a0(),stdio:[\"ignore\",\"pipe\",\"pipe\"],shell:!0,reject:!1});if(!F.stdout)return null;return F.stdout.trim()||null}catch{return null}}function iM1(A){try{let B=String(A),Q=process.platform===\"win32\"?`powershell.exe -NoProfile -Command \"(Get-CimInstance Win32_Process -Filter \\\\\"ProcessId=${B}\\\\\").ParentProcessId\"`:`ps -o ppid= -p ${B}`,Z=FZ(Q,{timeout:1000});return Z?Z.trim():null}catch{return null}}function H$2(A){try{let B=String(A),Q=process.platform===\"win32\"?`powershell.exe -NoProfile -Command \"(Get-CimInstance Win32_Process -Filter \\\\\"ProcessId=${B}\\\\\").CommandLine\"`:`ps -o command= -p ${B}`,Z=FZ(Q,{timeout:1000});return Z?Z.trim():null}catch{return null}}import{join as eD0}from\"path\";import{homedir as ml4}from\"os\";var AG0=F1(Os1(),1);import{constants as z$2}from\"fs\";function OY(){if(k1().existsSync(eD0(YQ(),\".config.json\")))return eD0(YQ(),\".config.json\");return eD0(process.env.CLAUDE_CONFIG_DIR||ml4(),\".claude.json\")}var dl4=OA(async()=>{let{code:A}=await Y2(\"test\",[\"-f\",\"/.dockerenv\"]);if(A!==0)return!1;return process.platform===\"linux\"}),cl4=OA(async()=>{try{let A=g4(),B=setTimeout(()=>A.abort(),1000);return await x9.head(\"http://1.1.1.1\",{signal:A.signal}),clearTimeout(B),!0}catch{return!1}});async function Yo(A){try{let{cmd:B}=AG0.findActualExecutable(A,[]);try{return k1().accessSync(B,z$2.F_OK|z$2.X_OK),!0}catch{return!1}}catch{return!1}}var ll4=OA(async()=>{let A=[];if(await Yo(\"npm\"))A.push(\"npm\");if(await Yo(\"yarn\"))A.push(\"yarn\");if(await Yo(\"pnpm\"))A.push(\"pnpm\");return A}),pl4=OA(async()=>{let A=[];if(await Yo(\"bun\"))A.push(\"bun\");if(await Yo(\"deno\"))A.push(\"deno\");if(await Yo(\"node\"))A.push(\"node\");return A}),il4=OA(()=>{if(process.versions.bun!==void 0||process.env.BUN_INSTALL!==void 0)return!0;return!1}),E$2=OA(()=>{try{return k1().existsSync(\"/proc/sys/fs/binfmt_misc/WSLInterop\")}catch(A){return!1}}),nl4=OA(()=>{try{if(!E$2())return!1;let{cmd:A}=AG0.findActualExecutable(\"npm\",[]);return A.startsWith(\"/mnt/c/\")}catch(A){return!1}}),U$2=[\"pycharm\",\"intellij\",\"webstorm\",\"phpstorm\",\"rubymine\",\"clion\",\"goland\",\"rider\",\"datagrip\",\"appcode\",\"dataspell\",\"aqua\",\"gateway\",\"fleet\",\"jetbrains\",\"androidstudio\"],al4=OA(()=>{if(process.platform===\"darwin\")return null;try{let B=process.pid.toString();for(let Q=0;Q<10;Q++){let Z=H$2(B);if(Z){let G=Z.toLowerCase();for(let F of U$2)if(G.includes(F))return F}let D=iM1(B);if(!D||D===\"0\"||D===B)break;B=D}}catch{}return null});function sl4(){if(process.env.CURSOR_TRACE_ID)return\"cursor\";if(process.env.VSCODE_GIT_ASKPASS_MAIN?.includes(\"/.cursor-server/\"))return\"cursor\";if(process.env.VSCODE_GIT_ASKPASS_MAIN?.includes(\"/.windsurf-server/\"))return\"windsurf\";let A=process.env.__CFBundleIdentifier?.toLowerCase();if(A?.includes(\"vscodium\"))return\"codium\";if(A?.includes(\"windsurf\"))return\"windsurf\";if(A?.includes(\"com.google.android.studio\"))return\"androidstudio\";if(A){for(let B of U$2)if(A.includes(B))return B}if(process.env.VisualStudioVersion)return\"visualstudio\";if(process.env.TERMINAL_EMULATOR===\"JetBrains-JediTerm\"){if(process.platform===\"darwin\")return\"pycharm\";return al4()||\"pycharm\"}if(process.env.TERM===\"xterm-ghostty\")return\"ghostty\";if(process.env.TERM?.includes(\"kitty\"))return\"kitty\";if(process.env.TERM_PROGRAM)return process.env.TERM_PROGRAM;if(process.env.STY)return\"screen\";if(process.env.KONSOLE_VERSION)return\"konsole\";if(process.env.GNOME_TERMINAL_SERVICE)return\"gnome-terminal\";if(process.env.XTERM_VERSION)return\"xterm\";if(process.env.VTE_VERSION)return\"vte-based\";if(process.env.TERMINATOR_UUID)return\"terminator\";if(process.env.KITTY_WINDOW_ID)return\"kitty\";if(process.env.ALACRITTY_LOG)return\"alacritty\";if(process.env.TILIX_ID)return\"tilix\";if(process.env.WT_SESSION)return\"windows-terminal\";if(process.env.SESSIONNAME&&process.env.TERM===\"cygwin\")return\"cygwin\";if(process.env.MSYSTEM)return process.env.MSYSTEM.toLowerCase();if(process.env.ConEmuTask)return\"conemu\";if(process.env.WSL_DISTRO_NAME)return`wsl-${process.env.WSL_DISTRO_NAME}`;if(process.env.SSH_CONNECTION||process.env.SSH_CLIENT||process.env.SSH_TTY)return\"ssh-session\";if(process.env.TERM){let B=process.env.TERM;if(B.includes(\"alacritty\"))return\"alacritty\";if(B.includes(\"rxvt\"))return\"rxvt\";if(B.includes(\"termite\"))return\"termite\";return process.env.TERM}if(!process.stdout.isTTY)return\"non-interactive\";return null}var MA={getIsDocker:dl4,hasInternetAccess:cl4,isCI:dQ(!1),platform:[\"win32\",\"darwin\"].includes(process.platform)?process.platform:\"linux\",nodeVersion:process.version,terminal:sl4(),getPackageManagers:ll4,getRuntimes:pl4,isRunningWithBun:il4,isWslEnvironment:E$2,isNpmFromWindowsPath:nl4};import{randomBytes as ol4}from\"crypto\";var q$2=F1(IH1(),1);import{execSync as tl4}from\"child_process\";var WP={allowedTools:[],history:[],mcpContextUris:[],mcpServers:{},enabledMcpjsonServers:[],disabledMcpjsonServers:[],hasTrustDialogAccepted:!1,hasTrustDialogHooksAccepted:!1,ignorePatterns:[],projectOnboardingSeenCount:0,hasClaudeMdExternalIncludesApproved:!1,hasClaudeMdExternalIncludesWarningShown:!1},uV={numStartups:0,installMethod:void 0,autoUpdates:void 0,theme:\"dark\",preferredNotifChannel:\"auto\",verbose:!1,editorMode:\"normal\",autoCompactEnabled:!0,hasSeenTasksHint:!1,queuedCommandUpHintCount:0,diffTool:\"auto\",customApiKeyResponses:{approved:[],rejected:[]},env:{},tipsHistory:{},memoryUsageCount:0,promptQueueUseCount:0,todoFeatureEnabled:!0,messageIdleNotifThresholdMs:60000,autoConnectIde:!1,autoInstallIdeExtension:!0,checkpointingEnabled:!0},W51=[\"apiKeyHelper\",\"installMethod\",\"autoUpdates\",\"theme\",\"verbose\",\"preferredNotifChannel\",\"shiftEnterKeyBindingInstalled\",\"editorMode\",\"hasUsedBackslashReturn\",\"supervisorMode\",\"autoCompactEnabled\",\"diffTool\",\"env\",\"tipsHistory\",\"todoFeatureEnabled\",\"messageIdleNotifThresholdMs\",\"autoConnectIde\",\"autoInstallIdeExtension\",\"checkpointingEnabled\"];function ZG0(A){return W51.includes(A)}var J51=[\"allowedTools\",\"hasTrustDialogAccepted\",\"hasCompletedProjectOnboarding\",\"ignorePatterns\"];function N$2(){let A=a0(),B=L_(OY(),uV);while(!0){if(B.projects?.[A]?.hasTrustDialogAccepted)return!0;let Z=w$2(A,\"..\");if(Z===A)break;A=Z}return!1}function L$2(){return t9().hasTrustDialogHooksAccepted??!1}var wN5={...uV,autoUpdates:!1},$N5={...WP};function DG0(A){return J51.includes(A)}function Wo(A,B){if(B){let Q=E0();return A in Q&&Array.isArray(Q[A])}else{let Q=WP[A];return A in WP&&Array.isArray(Q)}}function el4(A,B){if(Wo(A,B))return!1;if(B){let Q=E0();return A in Q&&typeof Q[A]===\"object\"}else{let Q=WP[A];return A in WP&&typeof Q===\"object\"}}function Ap4(A,B){let Q=Array.from(new Set(B));switch(A){case\"allowedTools\":return Q.length>0?Q:[\"git diff:*\"];case\"ignorePatterns\":return Q.length>0?Q.map((Z)=>`Read(${Z})`):[\"Read(secrets.env)\"]}}function Bp4(A,B){let Q=Ap4(A,B);switch(A){case\"allowedTools\":return{permissions:{allow:Q}};case\"ignorePatterns\":return{permissions:{deny:Q}}}}function Qp4(A,B){if(A!==\"allowedTools\"&&A!==\"ignorePatterns\")return;console.warn(`Warning: \"claude config add ${A}\" has been migrated to settings.json and will be removed in a future version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \n\nRangeError: Maximum call stack size exceeded\n\nnode:fs:574\n  return binding.open(\n                 ^\n\nError: EACCES: permission denied, open '/var/www/.claude.json'\n    at Module.openSync (node:fs:574:18)\n    at Object.writeFileSync (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:689:9320)\n    at uN (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:748:967)\n    at R$2 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:756:2376)\n    at pA (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:756:1312)\n    at P$2 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:770:1138)\n    at file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:820:1164\n    at Q (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:677:13339)\n    at yR8 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:3361:10024)\n    at file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:3404:1373 {\n  errno: -13,\n  code: 'EACCES',\n  syscall: 'open',\n  path: '/var/www/.claude.json'\n}\n\nNode.js v20.19.4\n"
            }
          }
        },
        {
          "display": "/exit",
          "pastedContents": {}
        },
        {
          "display": "claude 🤖 introduce yourself\n❯ introduce yourself\n────────────────────────────────────────────────────────────\n🚫 Network error: Unexpected token '<', \"<!DOCTYPE \"... is not valid JSON\n\nclaude 🤖 ",
          "pastedContents": {}
        },
        {
          "display": "i want it in the base dir though...",
          "pastedContents": {}
        },
        {
          "display": "[Pasted text #1 +37 lines]",
          "pastedContents": {
            "1": {
              "id": 1,
              "type": "text",
              "content": "nestogy:artisan ⚡ claude\n🤖 Starting Claude session...\n✅ Claude session started\n🔧 Permission Mode: Default\n💡 You are now in Claude mode. Type your questions or commands. Type \"exit\" to return to regular terminal.\n────────────────────────────────────────────────────────────\n\nclaude 🤖 introduce yourself\n❯ introduce yourself\n────────────────────────────────────────────────────────────\n❌ Failed to execute command: Claude command failed: Exception in PromiseRejectCallback:\nfile:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:751\n`)}catch(Q){O1(Q instanceof Error?Q:new Error(String(Q)))}}var f5Q=[{matches:(A)=>A.path===\"permissions.defaultMode\"&&A.code===\"invalid_enum_value\",tip:{suggestion:'Valid modes: \"acceptEdits\" (ask before file changes), \"plan\" (analysis only), \"bypassPermissions\" (auto-accept all), or \"default\" (standard behavior)',docLink:\"https://docs.anthropic.com/en/docs/claude-code/iam#permission-modes\"}},{matches:(A)=>A.path===\"apiKeyHelper\"&&A.code===\"invalid_type\",tip:{suggestion:'Provide a shell command that outputs your API key to stdout. The script should output only the API key. Example: \"/bin/generate_temp_api_key.sh\"'}},{matches:(A)=>A.path===\"cleanupPeriodDays\"&&A.code===\"too_small\"&&A.expected===\"0\",tip:{suggestion:\"Must be 0 or greater. Use 0 to disable automatic cleanup and keep chat transcripts forever, or set a positive number for days to retain (default is 30 days)\"}},{matches:(A)=>A.path.startsWith(\"env.\")&&A.code===\"invalid_type\",tip:{suggestion:'Environment variables must be strings. Wrap numbers and booleans in quotes. Example: \"DEBUG\": \"true\", \"PORT\": \"3000\"',docLink:\"https://docs.anthropic.com/en/docs/claude-code/settings#environment-variables\"}},{matches:(A)=>(A.path===\"permissions.allow\"||A.path===\"permissions.deny\")&&A.code===\"invalid_type\"&&A.expected===\"array\",tip:{suggestion:'Permission rules must be in an array. Format: [\"Tool(specifier)\"]. Examples: [\"Bash(npm run build)\", \"Edit(docs/**)\", \"Read(~/.zshrc)\"]. Use * for wildcards.'}},{matches:(A)=>A.path.includes(\"hooks\")&&A.code===\"invalid_type\",tip:{suggestion:'Hooks use a new format with matchers. Example: {\"PostToolUse\": [{\"matcher\": {\"tools\": [\"BashTool\"]}, \"hooks\": [{\"type\": \"command\", \"command\": \"echo Done\"}]}]}'}},{matches:(A)=>A.code===\"invalid_type\"&&A.expected===\"boolean\",tip:{suggestion:'Use true or false without quotes. Example: \"includeCoAuthoredBy\": true'}},{matches:(A)=>A.code===\"unrecognized_keys\",tip:{suggestion:\"Check for typos or refer to the documentation for valid fields\",docLink:\"https://docs.anthropic.com/en/docs/claude-code/settings\"}},{matches:(A)=>A.code===\"invalid_enum_value\"&&A.enumValues!==void 0,tip:{suggestion:void 0}},{matches:(A)=>A.code===\"invalid_type\"&&A.expected===\"object\"&&A.received===null&&A.path===\"\",tip:{suggestion:\"Check for missing commas, unmatched brackets, or trailing commas. Use a JSON validator to identify the exact syntax error.\"}},{matches:(A)=>A.path===\"permissions.additionalDirectories\"&&A.code===\"invalid_type\",tip:{suggestion:'Must be an array of directory paths. Example: [\"~/projects\", \"/tmp/workspace\"]. You can also use --add-dir flag or /add-dir command',docLink:\"https://docs.anthropic.com/en/docs/claude-code/iam#working-directories\"}}],h5Q={permissions:\"https://docs.anthropic.com/en/docs/claude-code/iam#configuring-permissions\",env:\"https://docs.anthropic.com/en/docs/claude-code/settings#environment-variables\",hooks:\"https://docs.anthropic.com/en/docs/claude-code/hooks\"};function LYA(A){let B=f5Q.find((Z)=>Z.matches(A));if(!B)return null;let Q={...B.tip};if(A.code===\"invalid_enum_value\"&&A.enumValues&&!Q.suggestion)Q.suggestion=`Valid values: ${A.enumValues.map((Z)=>`\"${Z}\"`).join(\", \")}`;if(!Q.docLink&&A.path){let Z=A.path.split(\".\")[0];if(Z)Q.docLink=h5Q[Z]}return Q}function MYA(A){return A.code===\"invalid_type\"}function RYA(A){return A.code===\"invalid_literal\"}function OYA(A){return A.code===\"invalid_enum_value\"}function g5Q(A){return A.code===\"unrecognized_keys\"}function TYA(A){return A.code===\"too_small\"}function PYA(A,B){return A.issues.map((Q)=>{let Z=Q.path.join(\".\"),D=Q.message,G,F,I,Y;if(OYA(Q))F=Q.options.map((J)=>String(J)),Y=Q.received;else if(RYA(Q))I=String(Q.expected),Y=Q.received;else if(MYA(Q))I=Q.expected,Y=Q.received;else if(TYA(Q))I=String(Q.minimum);else if(Q.code===\"custom\"&&\"params\"in Q)Y=Q.params.received;let W=LYA({path:Z,code:Q.code,expected:I,received:Y,enumValues:F,message:Q.message,value:Y});if(RYA(Q))G=`\"${Q.expected}\"`,D=`\"${Q.received}\" is not valid. Expected: ${G}`;else if(OYA(Q))G=F?.map((J)=>`\"${J}\"`).join(\", \"),D=`\"${Q.received}\" is not valid. Expected one of: ${G}`;else if(MYA(Q))if(Q.expected===\"object\"&&Q.received===\"null\"&&Z===\"\")D=\"Invalid or malformed JSON\";else D=`Expected ${Q.expected}, but received ${Q.received}`;else if(g5Q(Q)){let J=Q.keys.join(\", \");D=`Unrecognized field${Q.keys.length>1?\"s\":\"\"}: ${J}`}else if(TYA(Q))D=`Number must be greater than or equal to ${Q.minimum}`,G=String(Q.minimum);return{file:B,path:Z,message:D,expected:G,invalidValue:Y,suggestion:W?.suggestion,docLink:W?.docLink}})}import{join as SYA}from\"path\";function dr1(A,B){if(!A)return{};let Q={};for(let[Z,D]of Object.entries(A))Q[Z]={...D,scope:B};return Q}function jYA(A){let B=SYA(a0(),\".mcp.json\");uN(B,JSON.stringify(A,null,2),{encoding:\"utf8\"})}function u5Q(A){let B=[];function Q(D){return D.replace(/\\$\\{([^}]+)\\}/g,(G,F)=>{let[I,Y]=F.split(\":-\"),W=process.env[I];if(W!==void 0)return W;if(Y!==void 0)return Y;return B.push(I),G})}let Z;switch(A.type){case void 0:case\"stdio\":{let D=A;Z={...D,command:Q(D.command),args:D.args.map(Q),env:D.env?gj(D.env,Q):void 0};break}case\"sse\":case\"http\":{let D=A;Z={...D,url:Q(D.url),headers:D.headers?gj(D.headers,Q):void 0};break}case\"sse-ide\":case\"ws-ide\":Z=A;break}return{expanded:Z,missingVars:[...new Set(B)]}}function qh(A,B,Q){if(A.match(/[^a-zA-Z0-9_-]/))throw new Error(`Invalid name ${A}. Names can only contain letters, numbers, hyphens, and underscores.`);let Z=Or1.safeParse(B);if(!Z.success){let G=Z.error.errors.map((F)=>`${F.path.join(\".\")}: ${F.message}`).join(\", \");throw new Error(`Invalid configuration: ${G}`)}switch(Q){case\"project\":{let{servers:G}=nD(\"project\");if(G[A])throw new Error(`MCP server ${A} already exists in .mcp.json`);break}case\"user\":{if(E0().mcpServers?.[A])throw new Error(`MCP server ${A} already exists in user config`);break}case\"local\":{if(t9().mcpServers?.[A])throw new Error(`MCP server ${A} already exists in local config`);break}case\"dynamic\":throw new Error(\"Cannot add MCP server to scope: dynamic\")}let D=Z.data;switch(Q){case\"project\":{let{servers:G}=nD(\"project\"),F={};for(let[Y,W]of Object.entries(G)){let{scope:J,...X}=W;F[Y]=X}F[A]=D;let I={mcpServers:F};try{jYA(I)}catch(Y){throw new Error(`Failed to write to mcp.json: ${Y}`)}break}case\"user\":{let G=E0();if(!G.mcpServers)G.mcpServers={};G.mcpServers[A]=D,pA(G);break}case\"local\":{let G=t9();if(!G.mcpServers)G.mcpServers={};G.mcpServers[A]=D,k5(G);break}default:throw new Error(`Cannot add MCP server to scope: ${Q}`)}}function cr1(A,B){switch(B){case\"project\":{let{servers:Q}=nD(\"project\");if(!Q[A])throw new Error(`No MCP server found with name: ${A} in .mcp.json`);let Z={};for(let[G,F]of Object.entries(Q))if(G!==A){let{scope:I,...Y}=F;Z[G]=Y}let D={mcpServers:Z};try{jYA(D)}catch(G){throw new Error(`Failed to remove from .mcp.json: ${G}`)}break}case\"user\":{let Q=E0();if(!Q.mcpServers?.[A])throw new Error(`No user-scoped MCP server found with name: ${A}`);delete Q.mcpServers[A],pA(Q);break}case\"local\":{let Q=t9();if(!Q.mcpServers?.[A])throw new Error(`No project-local MCP server found with name: ${A}`);delete Q.mcpServers[A],k5(Q);break}default:throw new Error(`Cannot remove MCP server from scope: ${B}`)}}function nD(A){switch(A){case\"project\":{let B=SYA(a0(),\".mcp.json\");if(!k1().existsSync(B))return{servers:{},errors:[]};let{config:Z,errors:D}=lr1({filePath:B,expandVars:!0,scope:\"project\"});return{servers:dr1(Z?.mcpServers,A),errors:D}}case\"user\":{let B=E0().mcpServers;if(!B)return{servers:{},errors:[]};let{config:Q,errors:Z}=p91({configObject:{mcpServers:B},expandVars:!0,scope:\"user\"});return{servers:dr1(Q?.mcpServers,A),errors:Z}}case\"local\":{let B=t9().mcpServers;if(!B)return{servers:{},errors:[]};let{config:Q,errors:Z}=p91({configObject:{mcpServers:B},expandVars:!0,scope:\"local\"});return{servers:dr1(Q?.mcpServers,A),errors:Z}}}}function ai(A){let{servers:B}=nD(\"user\"),{servers:Q}=nD(\"project\"),{servers:Z}=nD(\"local\");if(Z[A])return Z[A];if(Q[A])return Q[A];if(B[A])return B[A];return null}function Wz(){let{servers:A}=nD(\"user\"),{servers:B}=nD(\"project\"),{servers:Q}=nD(\"local\"),Z={};for(let[G,F]of Object.entries(B))if(MC1(G)===\"approved\")Z[G]=F;let D=Object.assign({},A,Z,Q);return K1(\"tengu_mcp_servers\",{global:Object.keys(A).length,project:Object.keys(Z).length,user:Object.keys(Q).length}),D}function p91(A){let{configObject:B,expandVars:Q,scope:Z,filePath:D}=A,G=aIA.safeParse(B);if(!G.success)return{config:null,errors:G.error.issues.map((Y)=>({...D&&{file:D},path:Y.path.join(\".\"),message:\"Does not adhere to MCP server configuration schema\",mcpErrorMetadata:{scope:Z,severity:\"fatal\"}}))};let F=[],I={};for(let[Y,W]of Object.entries(G.data.mcpServers)){let J=W;if(Q){let{expanded:X,missingVars:V}=u5Q(W);if(V.length>0)F.push({...D&&{file:D},path:`mcpServers.${Y}`,message:`Missing environment variables: ${V.join(\", \")}`,suggestion:`Set the following environment variables: ${V.join(\", \")}`,mcpErrorMetadata:{scope:Z,serverName:Y,severity:\"warning\"}});J=X}if(T9()===\"windows\"&&(!J.type||J.type===\"stdio\")&&(J.command===\"npx\"||J.command.endsWith(\"\\\\npx\")||J.command.endsWith(\"/npx\")))F.push({...D&&{file:D},path:`mcpServers.${Y}`,message:\"Windows requires 'cmd /c' wrapper to execute npx\",suggestion:'Change command to \"cmd\" with args [\"/c\", \"npx\", ...]. See: https://docs.anthropic.com/en/docs/claude-code/mcp#configure-mcp-servers',mcpErrorMetadata:{scope:Z,serverName:Y,severity:\"warning\"}});I[Y]=J}return{config:{mcpServers:I},errors:F}}function lr1(A){let{filePath:B,expandVars:Q,scope:Z}=A,D=k1();if(!D.existsSync(B))return{config:null,errors:[{file:B,path:\"\",message:`MCP config file not found: ${B}`,suggestion:\"Check that the file path is correct\",mcpErrorMetadata:{scope:Z,severity:\"fatal\"}}]};let G;try{G=D.readFileSync(B,{encoding:\"utf8\"})}catch(I){return{config:null,errors:[{file:B,path:\"\",message:`Failed to read file: ${I}`,suggestion:\"Check file permissions and ensure the file exists\",mcpErrorMetadata:{scope:Z,severity:\"fatal\"}}]}}let F=R7(G);if(!F)return{config:null,errors:[{file:B,path:\"\",message:\"MCP config is not a valid JSON\",suggestion:\"Fix the JSON syntax errors in the file\",mcpErrorMetadata:{scope:Z,severity:\"fatal\"}}]};return p91({configObject:F,expandVars:Q,scope:Z,filePath:B})}import{stat as z3Q}from\"fs\";import{stat as E3Q,readdir as U3Q}from\"fs/promises\";import{EventEmitter as w3Q}from\"events\";import*as K6 from\"path\";import{stat as m5Q,lstat as yYA,readdir as d5Q,realpath as c5Q}from\"node:fs/promises\";import{Readable as l5Q}from\"node:stream\";import{resolve as kYA,relative as p5Q,join as i5Q,sep as n5Q}from\"node:path\";var DC={FILE_TYPE:\"files\",DIR_TYPE:\"directories\",FILE_DIR_TYPE:\"files_directories\",EVERYTHING_TYPE:\"all\"},pr1={root:\".\",fileFilter:(A)=>!0,directoryFilter:(A)=>!0,type:DC.FILE_TYPE,lstat:!1,depth:2147483648,alwaysStat:!1,highWaterMark:4096};Object.freeze(pr1);var bYA=\"READDIRP_RECURSIVE_ERROR\",a5Q=new Set([\"ENOENT\",\"EPERM\",\"EACCES\",\"ELOOP\",bYA]),_YA=[DC.DIR_TYPE,DC.EVERYTHING_TYPE,DC.FILE_DIR_TYPE,DC.FILE_TYPE],s5Q=new Set([DC.DIR_TYPE,DC.EVERYTHING_TYPE,DC.FILE_DIR_TYPE]),r5Q=new Set([DC.EVERYTHING_TYPE,DC.FILE_DIR_TYPE,DC.FILE_TYPE]),o5Q=(A)=>a5Q.has(A.code),t5Q=process.platform===\"win32\",xYA=(A)=>!0,vYA=(A)=>{if(A===void 0)return xYA;if(typeof A===\"function\")return A;if(typeof A===\"string\"){let B=A.trim();return(Q)=>Q.basename===B}if(Array.isArray(A)){let B=A.map((Q)=>Q.trim());return(Q)=>B.some((Z)=>Q.basename===Z)}return xYA};class fYA extends l5Q{constructor(A={}){super({objectMode:!0,autoDestroy:!0,highWaterMark:A.highWaterMark});let B={...pr1,...A},{root:Q,type:Z}=B;this._fileFilter=vYA(B.fileFilter),this._directoryFilter=vYA(B.directoryFilter);let D=B.lstat?yYA:m5Q;if(t5Q)this._stat=(G)=>D(G,{bigint:!0});else this._stat=D;this._maxDepth=B.depth??pr1.depth,this._wantsDir=Z?s5Q.has(Z):!1,this._wantsFile=Z?r5Q.has(Z):!1,this._wantsEverything=Z===DC.EVERYTHING_TYPE,this._root=kYA(Q),this._isDirent=!B.alwaysStat,this._statsProp=this._isDirent?\"dirent\":\"stats\",this._rdOptions={encoding:\"utf8\",withFileTypes:this._isDirent},this.parents=[this._exploreDir(Q,1)],this.reading=!1,this.parent=void 0}async _read(A){if(this.reading)return;this.reading=!0;try{while(!this.destroyed&&A>0){let B=this.parent,Q=B&&B.files;if(Q&&Q.length>0){let{path:Z,depth:D}=B,G=Q.splice(0,A).map((I)=>this._formatEntry(I,Z)),F=await Promise.all(G);for(let I of F){if(!I)continue;if(this.destroyed)return;let Y=await this._getEntryType(I);if(Y===\"directory\"&&this._directoryFilter(I)){if(D<=this._maxDepth)this.parents.push(this._exploreDir(I.fullPath,D+1));if(this._wantsDir)this.push(I),A--}else if((Y===\"file\"||this._includeAsFile(I))&&this._fileFilter(I)){if(this._wantsFile)this.push(I),A--}}}else{let Z=this.parents.pop();if(!Z){this.push(null);break}if(this.parent=await Z,this.destroyed)return}}}catch(B){this.destroy(B)}finally{this.reading=!1}}async _exploreDir(A,B){let Q;try{Q=await d5Q(A,this._rdOptions)}catch(Z){this._onError(Z)}return{files:Q,depth:B,path:A}}async _formatEntry(A,B){let Q,Z=this._isDirent?A.name:A;try{let D=kYA(i5Q(B,Z));Q={path:p5Q(this._root,D),fullPath:D,basename:Z},Q[this._statsProp]=this._isDirent?A:await this._stat(D)}catch(D){this._onError(D);return}return Q}_onError(A){if(o5Q(A)&&!this.destroyed)this.emit(\"warn\",A);else this.destroy(A)}async _getEntryType(A){if(!A&&this._statsProp in A)return\"\";let B=A[this._statsProp];if(B.isFile())return\"file\";if(B.isDirectory())return\"directory\";if(B&&B.isSymbolicLink()){let Q=A.fullPath;try{let Z=await c5Q(Q),D=await yYA(Z);if(D.isFile())return\"file\";if(D.isDirectory()){let G=Z.length;if(Q.startsWith(Z)&&Q.substr(G,1)===n5Q){let F=new Error(`Circular symlink detected: \"${Q}\" points to \"${Z}\"`);return F.code=bYA,this._onError(F)}return\"directory\"}}catch(Z){return this._onError(Z),\"\"}}}_includeAsFile(A){let B=A&&A[this._statsProp];return B&&this._wantsEverything&&!B.isDirectory()}}function hYA(A,B={}){let Q=B.entryType||B.type;if(Q===\"both\")Q=DC.FILE_DIR_TYPE;if(Q)B.type=Q;if(!A)throw new Error(\"readdirp: root argument is required. Usage: readdirp(root, options)\");else if(typeof A!==\"string\")throw new TypeError(\"readdirp: root argument must be a string. Usage: readdirp(root, options)\");else if(Q&&!_YA.includes(Q))throw new Error(`readdirp: Invalid type passed. Use one of ${_YA.join(\", \")}`);return B.root=A,new fYA(B)}import{watchFile as e5Q,unwatchFile as gYA,watch as A3Q}from\"fs\";import{open as B3Q,stat as mYA,lstat as Q3Q,realpath as ir1}from\"fs/promises\";import*as GZ from\"path\";import{type as Z3Q}from\"os\";var D3Q=\"data\",sr1=\"end\",dYA=\"close\",mC1=()=>{};var dC1=process.platform,rr1=dC1===\"win32\",G3Q=dC1===\"darwin\",F3Q=dC1===\"linux\",I3Q=dC1===\"freebsd\",cYA=Z3Q()===\"OS400\",O7={ALL:\"all\",READY:\"ready\",ADD:\"add\",CHANGE:\"change\",ADD_DIR:\"addDir\",UNLINK:\"unlink\",UNLINK_DIR:\"unlinkDir\",RAW:\"raw\",ERROR:\"error\"},Tw=O7,Y3Q=\"watch\",W3Q={lstat:Q3Q,stat:mYA},Nh=\"listeners\",hC1=\"errHandlers\",si=\"rawEmitters\",J3Q=[Nh,hC1,si],X3Q=new Set([\"3dm\",\"3ds\",\"3g2\",\"3gp\",\"7z\",\"a\",\"aac\",\"adp\",\"afdesign\",\"afphoto\",\"afpub\",\"ai\",\"aif\",\"aiff\",\"alz\",\"ape\",\"apk\",\"appimage\",\"ar\",\"arj\",\"asf\",\"au\",\"avi\",\"bak\",\"baml\",\"bh\",\"bin\",\"bk\",\"bmp\",\"btif\",\"bz2\",\"bzip2\",\"cab\",\"caf\",\"cgm\",\"class\",\"cmx\",\"cpio\",\"cr2\",\"cur\",\"dat\",\"dcm\",\"deb\",\"dex\",\"djvu\",\"dll\",\"dmg\",\"dng\",\"doc\",\"docm\",\"docx\",\"dot\",\"dotm\",\"dra\",\"DS_Store\",\"dsk\",\"dts\",\"dtshd\",\"dvb\",\"dwg\",\"dxf\",\"ecelp4800\",\"ecelp7470\",\"ecelp9600\",\"egg\",\"eol\",\"eot\",\"epub\",\"exe\",\"f4v\",\"fbs\",\"fh\",\"fla\",\"flac\",\"flatpak\",\"fli\",\"flv\",\"fpx\",\"fst\",\"fvt\",\"g3\",\"gh\",\"gif\",\"graffle\",\"gz\",\"gzip\",\"h261\",\"h263\",\"h264\",\"icns\",\"ico\",\"ief\",\"img\",\"ipa\",\"iso\",\"jar\",\"jpeg\",\"jpg\",\"jpgv\",\"jpm\",\"jxr\",\"key\",\"ktx\",\"lha\",\"lib\",\"lvp\",\"lz\",\"lzh\",\"lzma\",\"lzo\",\"m3u\",\"m4a\",\"m4v\",\"mar\",\"mdi\",\"mht\",\"mid\",\"midi\",\"mj2\",\"mka\",\"mkv\",\"mmr\",\"mng\",\"mobi\",\"mov\",\"movie\",\"mp3\",\"mp4\",\"mp4a\",\"mpeg\",\"mpg\",\"mpga\",\"mxu\",\"nef\",\"npx\",\"numbers\",\"nupkg\",\"o\",\"odp\",\"ods\",\"odt\",\"oga\",\"ogg\",\"ogv\",\"otf\",\"ott\",\"pages\",\"pbm\",\"pcx\",\"pdb\",\"pdf\",\"pea\",\"pgm\",\"pic\",\"png\",\"pnm\",\"pot\",\"potm\",\"potx\",\"ppa\",\"ppam\",\"ppm\",\"pps\",\"ppsm\",\"ppsx\",\"ppt\",\"pptm\",\"pptx\",\"psd\",\"pya\",\"pyc\",\"pyo\",\"pyv\",\"qt\",\"rar\",\"ras\",\"raw\",\"resources\",\"rgb\",\"rip\",\"rlc\",\"rmf\",\"rmvb\",\"rpm\",\"rtf\",\"rz\",\"s3m\",\"s7z\",\"scpt\",\"sgi\",\"shar\",\"snap\",\"sil\",\"sketch\",\"slk\",\"smv\",\"snk\",\"so\",\"stl\",\"suo\",\"sub\",\"swf\",\"tar\",\"tbz\",\"tbz2\",\"tga\",\"tgz\",\"thmx\",\"tif\",\"tiff\",\"tlz\",\"ttc\",\"ttf\",\"txz\",\"udf\",\"uvh\",\"uvi\",\"uvm\",\"uvp\",\"uvs\",\"uvu\",\"viv\",\"vob\",\"war\",\"wav\",\"wax\",\"wbmp\",\"wdp\",\"weba\",\"webm\",\"webp\",\"whl\",\"wim\",\"wm\",\"wma\",\"wmv\",\"wmx\",\"woff\",\"woff2\",\"wrm\",\"wvx\",\"xbm\",\"xif\",\"xla\",\"xlam\",\"xls\",\"xlsb\",\"xlsm\",\"xlsx\",\"xlt\",\"xltm\",\"xltx\",\"xm\",\"xmind\",\"xpi\",\"xpm\",\"xwd\",\"xz\",\"z\",\"zip\",\"zipx\"]),V3Q=(A)=>X3Q.has(GZ.extname(A).slice(1).toLowerCase()),ar1=(A,B)=>{if(A instanceof Set)A.forEach(B);else B(A)},i91=(A,B,Q)=>{let Z=A[B];if(!(Z instanceof Set))A[B]=Z=new Set([Z]);Z.add(Q)},K3Q=(A)=>(B)=>{let Q=A[B];if(Q instanceof Set)Q.clear();else delete A[B]},n91=(A,B,Q)=>{let Z=A[B];if(Z instanceof Set)Z.delete(Q);else if(Z===Q)delete A[B]},lYA=(A)=>A instanceof Set?A.size===0:!A,gC1=new Map;function uYA(A,B,Q,Z,D){let G=(F,I)=>{if(Q(A),D(F,I,{watchedPath:A}),I&&A!==I)uC1(GZ.resolve(A,I),Nh,GZ.join(A,I))};try{return A3Q(A,{persistent:B.persistent},G)}catch(F){Z(F);return}}var uC1=(A,B,Q,Z,D)=>{let G=gC1.get(A);if(!G)return;ar1(G[B],(F)=>{F(Q,Z,D)})},C3Q=(A,B,Q,Z)=>{let{listener:D,errHandler:G,rawEmitter:F}=Z,I=gC1.get(B),Y;if(!Q.persistent){if(Y=uYA(A,Q,D,G,F),!Y)return;return Y.close.bind(Y)}if(I)i91(I,Nh,D),i91(I,hC1,G),i91(I,si,F);else{if(Y=uYA(A,Q,uC1.bind(null,B,Nh),G,uC1.bind(null,B,si)),!Y)return;Y.on(Tw.ERROR,async(W)=>{let J=uC1.bind(null,B,hC1);if(I)I.watcherUnusable=!0;if(rr1&&W.code===\"EPERM\")try{await(await B3Q(A,\"r\")).close(),J(W)}catch(X){}else J(W)}),I={listeners:D,errHandlers:G,rawEmitters:F,watcher:Y},gC1.set(B,I)}return()=>{if(n91(I,Nh,D),n91(I,hC1,G),n91(I,si,F),lYA(I.listeners))I.watcher.close(),gC1.delete(B),J3Q.forEach(K3Q(I)),I.watcher=void 0,Object.freeze(I)}},nr1=new Map,H3Q=(A,B,Q,Z)=>{let{listener:D,rawEmitter:G}=Z,F=nr1.get(B),I=F&&F.options;if(I&&(I.persistent<Q.persistent||I.interval>Q.interval))gYA(B),F=void 0;if(F)i91(F,Nh,D),i91(F,si,G);else F={listeners:D,rawEmitters:G,options:Q,watcher:e5Q(B,Q,(Y,W)=>{ar1(F.rawEmitters,(X)=>{X(Tw.CHANGE,B,{curr:Y,prev:W})});let J=Y.mtimeMs;if(Y.size!==W.size||J>W.mtimeMs||J===0)ar1(F.listeners,(X)=>X(A,Y))})},nr1.set(B,F);return()=>{if(n91(F,Nh,D),n91(F,si,G),lYA(F.listeners))nr1.delete(B),gYA(B),F.options=F.watcher=void 0,Object.freeze(F)}};class or1{constructor(A){this.fsw=A,this._boundHandleError=(B)=>A._handleError(B)}_watchWithNodeFs(A,B){let Q=this.fsw.options,Z=GZ.dirname(A),D=GZ.basename(A);this.fsw._getWatchedDir(Z).add(D);let F=GZ.resolve(A),I={persistent:Q.persistent};if(!B)B=mC1;let Y;if(Q.usePolling){let W=Q.interval!==Q.binaryInterval;I.interval=W&&V3Q(D)?Q.binaryInterval:Q.interval,Y=H3Q(A,F,I,{listener:B,rawEmitter:this.fsw._emitRaw})}else Y=C3Q(A,F,I,{listener:B,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw});return Y}_handleFile(A,B,Q){if(this.fsw.closed)return;let Z=GZ.dirname(A),D=GZ.basename(A),G=this.fsw._getWatchedDir(Z),F=B;if(G.has(D))return;let I=async(W,J)=>{if(!this.fsw._throttle(Y3Q,A,5))return;if(!J||J.mtimeMs===0)try{let X=await mYA(A);if(this.fsw.closed)return;let{atimeMs:V,mtimeMs:K}=X;if(!V||V<=K||K!==F.mtimeMs)this.fsw._emit(Tw.CHANGE,A,X);if((G3Q||F3Q||I3Q)&&F.ino!==X.ino){this.fsw._closeFile(W),F=X;let C=this._watchWithNodeFs(A,I);if(C)this.fsw._addPathCloser(W,C)}else F=X}catch(X){this.fsw._remove(Z,D)}else if(G.has(D)){let{atimeMs:X,mtimeMs:V}=J;if(!X||X<=V||V!==F.mtimeMs)this.fsw._emit(Tw.CHANGE,A,J);F=J}},Y=this._watchWithNodeFs(A,I);if(!(Q&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(A)){if(!this.fsw._throttle(Tw.ADD,A,0))return;this.fsw._emit(Tw.ADD,A,B)}return Y}async _handleSymlink(A,B,Q,Z){if(this.fsw.closed)return;let D=A.fullPath,G=this.fsw._getWatchedDir(B);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let F;try{F=await ir1(Q)}catch(I){return this.fsw._emitReady(),!0}if(this.fsw.closed)return;if(G.has(Z)){if(this.fsw._symlinkPaths.get(D)!==F)this.fsw._symlinkPaths.set(D,F),this.fsw._emit(Tw.CHANGE,Q,A.stats)}else G.add(Z),this.fsw._symlinkPaths.set(D,F),this.fsw._emit(Tw.ADD,Q,A.stats);return this.fsw._emitReady(),!0}if(this.fsw._symlinkPaths.has(D))return!0;this.fsw._symlinkPaths.set(D,!0)}_handleRead(A,B,Q,Z,D,G,F){if(A=GZ.join(A,\"\"),F=this.fsw._throttle(\"readdir\",A,1000),!F)return;let I=this.fsw._getWatchedDir(Q.path),Y=new Set,W=this.fsw._readdirp(A,{fileFilter:(J)=>Q.filterPath(J),directoryFilter:(J)=>Q.filterDir(J)});if(!W)return;return W.on(D3Q,async(J)=>{if(this.fsw.closed){W=void 0;return}let X=J.path,V=GZ.join(A,X);if(Y.add(X),J.stats.isSymbolicLink()&&await this._handleSymlink(J,A,V,X))return;if(this.fsw.closed){W=void 0;return}if(X===Z||!Z&&!I.has(X))this.fsw._incrReadyCount(),V=GZ.join(D,GZ.relative(D,V)),this._addToNodeFs(V,B,Q,G+1)}).on(Tw.ERROR,this._boundHandleError),new Promise((J,X)=>{if(!W)return X();W.once(sr1,()=>{if(this.fsw.closed){W=void 0;return}let V=F?F.clear():!1;if(J(void 0),I.getChildren().filter((K)=>{return K!==A&&!Y.has(K)}).forEach((K)=>{this.fsw._remove(A,K)}),W=void 0,V)this._handleRead(A,!1,Q,Z,D,G,F)})})}async _handleDir(A,B,Q,Z,D,G,F){let I=this.fsw._getWatchedDir(GZ.dirname(A)),Y=I.has(GZ.basename(A));if(!(Q&&this.fsw.options.ignoreInitial)&&!D&&!Y)this.fsw._emit(Tw.ADD_DIR,A,B);I.add(GZ.basename(A)),this.fsw._getWatchedDir(A);let W,J,X=this.fsw.options.depth;if((X==null||Z<=X)&&!this.fsw._symlinkPaths.has(F)){if(!D){if(await this._handleRead(A,Q,G,D,A,Z,W),this.fsw.closed)return}J=this._watchWithNodeFs(A,(V,K)=>{if(K&&K.mtimeMs===0)return;this._handleRead(V,!1,G,D,A,Z,W)})}return J}async _addToNodeFs(A,B,Q,Z,D){let G=this.fsw._emitReady;if(this.fsw._isIgnored(A)||this.fsw.closed)return G(),!1;let F=this.fsw._getWatchHelpers(A);if(Q)F.filterPath=(I)=>Q.filterPath(I),F.filterDir=(I)=>Q.filterDir(I);try{let I=await W3Q[F.statMethod](F.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(F.watchPath,I))return G(),!1;let Y=this.fsw.options.followSymlinks,W;if(I.isDirectory()){let J=GZ.resolve(A),X=Y?await ir1(A):A;if(this.fsw.closed)return;if(W=await this._handleDir(F.watchPath,I,B,Z,D,F,X),this.fsw.closed)return;if(J!==X&&X!==void 0)this.fsw._symlinkPaths.set(J,X)}else if(I.isSymbolicLink()){let J=Y?await ir1(A):A;if(this.fsw.closed)return;let X=GZ.dirname(F.watchPath);if(this.fsw._getWatchedDir(X).add(F.watchPath),this.fsw._emit(Tw.ADD,F.watchPath,I),W=await this._handleDir(X,I,B,Z,A,F,J),this.fsw.closed)return;if(J!==void 0)this.fsw._symlinkPaths.set(GZ.resolve(A),J)}else W=this._handleFile(F.watchPath,I,B);if(G(),W)this.fsw._addPathCloser(A,W);return!1}catch(I){if(this.fsw._handleError(I))return G(),A}}}/*! chokidar - MIT License (c) 2012 Paul Miller (paulmillr.com) */var tr1=\"/\",$3Q=\"//\",rYA=\".\",q3Q=\"..\",N3Q=\"string\",L3Q=/\\\\/g,pYA=/\\/\\//,M3Q=/\\..*\\.(sw[px])$|~$|\\.subl.*\\.tmp/,R3Q=/^\\.[/\\\\]/;function cC1(A){return Array.isArray(A)?A:[A]}var er1=(A)=>typeof A===\"object\"&&A!==null&&!(A instanceof RegExp);function O3Q(A){if(typeof A===\"function\")return A;if(typeof A===\"string\")return(B)=>A===B;if(A instanceof RegExp)return(B)=>A.test(B);if(typeof A===\"object\"&&A!==null)return(B)=>{if(A.path===B)return!0;if(A.recursive){let Q=K6.relative(A.path,B);if(!Q)return!1;return!Q.startsWith(\"..\")&&!K6.isAbsolute(Q)}return!1};return()=>!1}function T3Q(A){if(typeof A!==\"string\")throw new Error(\"string expected\");A=K6.normalize(A),A=A.replace(/\\\\/g,\"/\");let B=!1;if(A.startsWith(\"//\"))B=!0;let Q=/\\/\\//;while(A.match(Q))A=A.replace(Q,\"/\");if(B)A=\"/\"+A;return A}function iYA(A,B,Q){let Z=T3Q(B);for(let D=0;D<A.length;D++){let G=A[D];if(G(Z,Q))return!0}return!1}function P3Q(A,B){if(A==null)throw new TypeError(\"anymatch: specify first argument\");let Z=cC1(A).map((D)=>O3Q(D));if(B==null)return(D,G)=>{return iYA(Z,D,G)};return iYA(Z,B)}var nYA=(A)=>{let B=cC1(A).flat();if(!B.every((Q)=>typeof Q===N3Q))throw new TypeError(`Non-string provided as watch path: ${B}`);return B.map(oYA)},aYA=(A)=>{let B=A.replace(L3Q,tr1),Q=!1;if(B.startsWith($3Q))Q=!0;while(B.match(pYA))B=B.replace(pYA,tr1);if(Q)B=tr1+B;return B},oYA=(A)=>aYA(K6.normalize(aYA(A))),sYA=(A=\"\")=>(B)=>{if(typeof B===\"string\")return oYA(K6.isAbsolute(B)?B:K6.join(A,B));else return B},S3Q=(A,B)=>{if(K6.isAbsolute(A))return A;return K6.join(B,A)},j3Q=Object.freeze(new Set);class tYA{constructor(A,B){this.path=A,this._removeWatcher=B,this.items=new Set}add(A){let{items:B}=this;if(!B)return;if(A!==rYA&&A!==q3Q)B.add(A)}async remove(A){let{items:B}=this;if(!B)return;if(B.delete(A),B.size>0)return;let Q=this.path;try{await U3Q(Q)}catch(Z){if(this._removeWatcher)this._removeWatcher(K6.dirname(Q),K6.basename(Q))}}has(A){let{items:B}=this;if(!B)return;return B.has(A)}getChildren(){let{items:A}=this;if(!A)return[];return[...A.values()]}dispose(){this.items.clear(),this.path=\"\",this._removeWatcher=mC1,this.items=j3Q,Object.freeze(this)}}var y3Q=\"stat\",k3Q=\"lstat\";class eYA{constructor(A,B,Q){this.fsw=Q;let Z=A;this.path=A=A.replace(R3Q,\"\"),this.watchPath=Z,this.fullWatchPath=K6.resolve(Z),this.dirParts=[],this.dirParts.forEach((D)=>{if(D.length>1)D.pop()}),this.followSymlinks=B,this.statMethod=B?y3Q:k3Q}entryPath(A){return K6.join(this.watchPath,K6.relative(this.watchPath,A.fullPath))}filterPath(A){let{stats:B}=A;if(B&&B.isSymbolicLink())return this.filterDir(A);let Q=this.entryPath(A);return this.fsw._isntIgnored(Q,B)&&this.fsw._hasReadPermissions(B)}filterDir(A){return this.fsw._isntIgnored(this.entryPath(A),A.stats)}}class Ao1 extends w3Q{constructor(A={}){super();this.closed=!1,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._streams=new Set,this._symlinkPaths=new Map,this._watched=new Map,this._pendingWrites=new Map,this._pendingUnlinks=new Map,this._readyCount=0,this._readyEmitted=!1;let B=A.awaitWriteFinish,Q={stabilityThreshold:2000,pollInterval:100},Z={persistent:!0,ignoreInitial:!1,ignorePermissionErrors:!1,interval:100,binaryInterval:300,followSymlinks:!0,usePolling:!1,atomic:!0,...A,ignored:A.ignored?cC1(A.ignored):cC1([]),awaitWriteFinish:B===!0?Q:typeof B===\"object\"?{...Q,...B}:!1};if(cYA)Z.usePolling=!0;if(Z.atomic===void 0)Z.atomic=!Z.usePolling;let D=process.env.CHOKIDAR_USEPOLLING;if(D!==void 0){let I=D.toLowerCase();if(I===\"false\"||I===\"0\")Z.usePolling=!1;else if(I===\"true\"||I===\"1\")Z.usePolling=!0;else Z.usePolling=!!I}let G=process.env.CHOKIDAR_INTERVAL;if(G)Z.interval=Number.parseInt(G,10);let F=0;this._emitReady=()=>{if(F++,F>=this._readyCount)this._emitReady=mC1,this._readyEmitted=!0,process.nextTick(()=>this.emit(O7.READY))},this._emitRaw=(...I)=>this.emit(O7.RAW,...I),this._boundRemove=this._remove.bind(this),this.options=Z,this._nodeFsHandler=new or1(this),Object.freeze(Z)}_addIgnoredPath(A){if(er1(A)){for(let B of this._ignoredPaths)if(er1(B)&&B.path===A.path&&B.recursive===A.recursive)return}this._ignoredPaths.add(A)}_removeIgnoredPath(A){if(this._ignoredPaths.delete(A),typeof A===\"string\"){for(let B of this._ignoredPaths)if(er1(B)&&B.path===A)this._ignoredPaths.delete(B)}}add(A,B,Q){let{cwd:Z}=this.options;this.closed=!1,this._closePromise=void 0;let D=nYA(A);if(Z)D=D.map((G)=>{return S3Q(G,Z)});if(D.forEach((G)=>{this._removeIgnoredPath(G)}),this._userIgnored=void 0,!this._readyCount)this._readyCount=0;return this._readyCount+=D.length,Promise.all(D.map(async(G)=>{let F=await this._nodeFsHandler._addToNodeFs(G,!Q,void 0,0,B);if(F)this._emitReady();return F})).then((G)=>{if(this.closed)return;G.forEach((F)=>{if(F)this.add(K6.dirname(F),K6.basename(B||F))})}),this}unwatch(A){if(this.closed)return this;let B=nYA(A),{cwd:Q}=this.options;return B.forEach((Z)=>{if(!K6.isAbsolute(Z)&&!this._closers.has(Z)){if(Q)Z=K6.join(Q,Z);Z=K6.resolve(Z)}if(this._closePath(Z),this._addIgnoredPath(Z),this._watched.has(Z))this._addIgnoredPath({path:Z,recursive:!0});this._userIgnored=void 0}),this}close(){if(this._closePromise)return this._closePromise;this.closed=!0,this.removeAllListeners();let A=[];return this._closers.forEach((B)=>B.forEach((Q)=>{let Z=Q();if(Z instanceof Promise)A.push(Z)})),this._streams.forEach((B)=>B.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach((B)=>B.dispose()),this._closers.clear(),this._watched.clear(),this._streams.clear(),this._symlinkPaths.clear(),this._throttled.clear(),this._closePromise=A.length?Promise.all(A).then(()=>{return}):Promise.resolve(),this._closePromise}getWatched(){let A={};return this._watched.forEach((B,Q)=>{let D=(this.options.cwd?K6.relative(this.options.cwd,Q):Q)||rYA;A[D]=B.getChildren().sort()}),A}emitWithAll(A,B){if(this.emit(A,...B),A!==O7.ERROR)this.emit(O7.ALL,A,...B)}async _emit(A,B,Q){if(this.closed)return;let Z=this.options;if(rr1)B=K6.normalize(B);if(Z.cwd)B=K6.relative(Z.cwd,B);let D=[B];if(Q!=null)D.push(Q);let G=Z.awaitWriteFinish,F;if(G&&(F=this._pendingWrites.get(B)))return F.lastChange=new Date,this;if(Z.atomic){if(A===O7.UNLINK)return this._pendingUnlinks.set(B,[A,...D]),setTimeout(()=>{this._pendingUnlinks.forEach((I,Y)=>{this.emit(...I),this.emit(O7.ALL,...I),this._pendingUnlinks.delete(Y)})},typeof Z.atomic===\"number\"?Z.atomic:100),this;if(A===O7.ADD&&this._pendingUnlinks.has(B))A=O7.CHANGE,this._pendingUnlinks.delete(B)}if(G&&(A===O7.ADD||A===O7.CHANGE)&&this._readyEmitted){let I=(Y,W)=>{if(Y)A=O7.ERROR,D[0]=Y,this.emitWithAll(A,D);else if(W){if(D.length>1)D[1]=W;else D.push(W);this.emitWithAll(A,D)}};return this._awaitWriteFinish(B,G.stabilityThreshold,A,I),this}if(A===O7.CHANGE){if(!this._throttle(O7.CHANGE,B,50))return this}if(Z.alwaysStat&&Q===void 0&&(A===O7.ADD||A===O7.ADD_DIR||A===O7.CHANGE)){let I=Z.cwd?K6.join(Z.cwd,B):B,Y;try{Y=await E3Q(I)}catch(W){}if(!Y||this.closed)return;D.push(Y)}return this.emitWithAll(A,D),this}_handleError(A){let B=A&&A.code;if(A&&B!==\"ENOENT\"&&B!==\"ENOTDIR\"&&(!this.options.ignorePermissionErrors||B!==\"EPERM\"&&B!==\"EACCES\"))this.emit(O7.ERROR,A);return A||this.closed}_throttle(A,B,Q){if(!this._throttled.has(A))this._throttled.set(A,new Map);let Z=this._throttled.get(A);if(!Z)throw new Error(\"invalid throttle\");let D=Z.get(B);if(D)return D.count++,!1;let G,F=()=>{let Y=Z.get(B),W=Y?Y.count:0;if(Z.delete(B),clearTimeout(G),Y)clearTimeout(Y.timeoutObject);return W};G=setTimeout(F,Q);let I={timeoutObject:G,clear:F,count:0};return Z.set(B,I),I}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(A,B,Q,Z){let D=this.options.awaitWriteFinish;if(typeof D!==\"object\")return;let G=D.pollInterval,F,I=A;if(this.options.cwd&&!K6.isAbsolute(A))I=K6.join(this.options.cwd,A);let Y=new Date,W=this._pendingWrites;function J(X){z3Q(I,(V,K)=>{if(V||!W.has(A)){if(V&&V.code!==\"ENOENT\")Z(V);return}let C=Number(new Date);if(X&&K.size!==X.size)W.get(A).lastChange=C;let H=W.get(A);if(C-H.lastChange>=B)W.delete(A),Z(void 0,K);else F=setTimeout(J,G,K)})}if(!W.has(A))W.set(A,{lastChange:Y,cancelWait:()=>{return W.delete(A),clearTimeout(F),Q}}),F=setTimeout(J,G)}_isIgnored(A,B){if(this.options.atomic&&M3Q.test(A))return!0;if(!this._userIgnored){let{cwd:Q}=this.options,D=(this.options.ignored||[]).map(sYA(Q)),F=[...[...this._ignoredPaths].map(sYA(Q)),...D];this._userIgnored=P3Q(F,void 0)}return this._userIgnored(A,B)}_isntIgnored(A,B){return!this._isIgnored(A,B)}_getWatchHelpers(A){return new eYA(A,this.options.followSymlinks,this)}_getWatchedDir(A){let B=K6.resolve(A);if(!this._watched.has(B))this._watched.set(B,new tYA(B,this._boundRemove));return this._watched.get(B)}_hasReadPermissions(A){if(this.options.ignorePermissionErrors)return!0;return Boolean(Number(A.mode)&256)}_remove(A,B,Q){let Z=K6.join(A,B),D=K6.resolve(Z);if(Q=Q!=null?Q:this._watched.has(Z)||this._watched.has(D),!this._throttle(\"remove\",Z,100))return;if(!Q&&this._watched.size===1)this.add(A,B,!0);this._getWatchedDir(Z).getChildren().forEach((X)=>this._remove(Z,X));let I=this._getWatchedDir(A),Y=I.has(B);if(I.remove(B),this._symlinkPaths.has(D))this._symlinkPaths.delete(D);let W=Z;if(this.options.cwd)W=K6.relative(this.options.cwd,Z);if(this.options.awaitWriteFinish&&this._pendingWrites.has(W)){if(this._pendingWrites.get(W).cancelWait()===O7.ADD)return}this._watched.delete(Z),this._watched.delete(D);let J=Q?O7.UNLINK_DIR:O7.UNLINK;if(Y&&!this._isIgnored(Z))this._emit(J,Z);this._closePath(Z)}_closePath(A){this._closeFile(A);let B=K6.dirname(A);this._getWatchedDir(B).remove(K6.basename(A))}_closeFile(A){let B=this._closers.get(A);if(!B)return;B.forEach((Q)=>Q()),this._closers.delete(A)}_addPathCloser(A,B){if(!B)return;let Q=this._closers.get(A);if(!Q)Q=[],this._closers.set(A,Q);Q.push(B)}_readdirp(A,B){if(this.closed)return;let Q={type:O7.ALL,alwaysStat:!0,lstat:!0,...B,depth:0},Z=hYA(A,Q);return this._streams.add(Z),Z.once(dYA,()=>{Z=void 0}),Z.once(sr1,()=>{if(Z)this._streams.delete(Z),Z=void 0}),Z}}function _3Q(A,B={}){let Q=new Ao1(B);return Q.add(A),Q}var AWA={watch:_3Q,FSWatcher:Ao1};import*as QWA from\"path\";var x3Q=1000,v3Q=500,b3Q=5000,ri=null,BWA=!1,ZWA=!1,lC1=new Map,a91=new Set;function f3Q(){if(BWA||ZWA)return;BWA=!0;let A=m3Q();if(A.length===0)return;F0(`Watching for changes in setting files ${A.join(\", \")}...`),ri=AWA.watch(A,{persistent:!0,ignoreInitial:!0,awaitWriteFinish:{stabilityThreshold:x3Q,pollInterval:v3Q},ignored:(B)=>B.split(QWA.sep).some((Q)=>Q===\".git\"),ignorePermissionErrors:!0,usePolling:!1,atomic:!0}),ri.on(\"change\",d3Q),ri.on(\"unlink\",c3Q)}function h3Q(){if(ZWA=!0,ri)ri.close(),ri=null;lC1.clear(),a91.clear()}function g3Q(A){return a91.add(A),()=>{a91.delete(A)}}function u3Q(A){let B=uO(A);if(B)lC1.set(B,Date.now())}function m3Q(){let A=k1();return $w.map((B)=>{let Q=uO(B);if(!Q)return;try{if(!A.statSync(Q).isFile())return}catch{return}return Q}).filter((B)=>B!==void 0)}function d3Q(A){let B=DWA(A);if(!B)return;let Q=lC1.get(A);if(Q&&Date.now()-Q<b3Q){lC1.delete(A);return}F0(`Detected change to ${A}`),a91.forEach((Z)=>Z(B))}function c3Q(A){let B=DWA(A);if(!B)return;F0(`Detected deletion of ${A}`),a91.forEach((Q)=>Q(B))}function DWA(A){return $w.find((B)=>uO(B)===A)}var pC1={initialize:f3Q,dispose:h3Q,subscribe:g3Q,markInternalWrite:u3Q};var r91=null;function Bo1(){switch(T9()){case\"macos\":return\"/Library/Application Support/ClaudeCode\";case\"windows\":return\"C:\\\\ProgramData\\\\ClaudeCode\";default:return\"/etc/claude-code\"}}function l3Q(){return o91(Bo1(),\"managed-settings.json\")}function p3Q(A){if(A.length===0)return\"unknown\";let B=A[0];if(!B)return\"unknown\";if(B.path.length>0)return B.path.join(\".\");return\"unknown\"}function i3Q(A,B){let Q=new Error(\"Invalid settings\"),Z=p3Q(B.issues);FWA.withScope((D)=>{if(A)D.setTag(\"settings_source\",u91(A));D.setTag(\"invalid_key\",Z),D.setContext(\"validation_error\",{errorMessage:B.message,issues:B.issues}),O1(Q)}),F0(`Invalid settings in ${A||\"unknown\"} source - key: ${Z}, error: ${B.message}`)}function n3Q(A,B){if(typeof A===\"object\"&&A&&\"code\"in A&&A.code===\"ENOENT\")F0(`Broken symlink or missing file encountered for settings.json at path: ${B}`);else O1(A instanceof Error?A:new Error(String(A)))}function IWA(A,B){let Q=k1();if(!Q.existsSync(A))return{settings:null,errors:[]};try{let{resolvedPath:Z}=CV(Q,A),D=TY(Z);if(D.trim()===\"\")return{settings:{},errors:[]};let G=R7(D),F=$YA.safeParse(G);if(!F.success)return i3Q(B,F.error),{settings:null,errors:PYA(F.error,A)};return{settings:F.data,errors:[]}}catch(Z){return n3Q(Z,A),{settings:null,errors:[]}}}function yC1(A){switch(A){case\"userSettings\":return s91(YQ());case\"policySettings\":case\"projectSettings\":case\"localSettings\":return s91(w9());case\"flagSettings\":{let B=nu1();return B?GWA(s91(B)):s91(w9())}}}function uO(A){switch(A){case\"userSettings\":return o91(yC1(A),\"settings.json\");case\"projectSettings\":case\"localSettings\":return o91(yC1(A),t91(A));case\"policySettings\":return l3Q();case\"flagSettings\":return nu1()}}function t91(A){switch(A){case\"projectSettings\":return o91(\".claude\",\"settings.json\");case\"localSettings\":return o91(\".claude\",\"settings.local.json\")}}function MY(A){let B=uO(A);if(!B)return null;let{settings:Q}=IWA(B,A);return Q}function h8(A,B){if(A===\"policySettings\"||A===\"flagSettings\")return{error:null};let Q=uO(A);if(!Q)return{error:null};try{let Z=GWA(Q);if(!k1().existsSync(Z))k1().mkdirSync(Z);let D=MY(A);if(!D&&k1().existsSync(Q)){let F=TY(Q),I=R7(F);if(I===null)return{error:new Error(`Invalid JSON syntax in settings file at ${Q}`)};if(I&&typeof I===\"object\")D=I,F0(`Using raw settings from ${Q} due to validation failure`)}let G=GW1(D||{},B,(F,I,Y,W)=>{if(I===void 0&&W&&typeof Y===\"string\"){delete W[Y];return}if(Array.isArray(I))return I;return});if(pC1.markInternalWrite(A),uN(Q,JSON.stringify(G,null,2)),e91(),A===\"localSettings\")ni(t91(\"localSettings\"),w9())}catch(Z){let D=new Error(`Failed to read raw settings from ${Q}: ${Z}`);return O1(D),{error:D}}return{error:null}}function a3Q(A,B){let Q=[...A,...B];return Array.from(new Set(Q))}function e91(){r91=null}function s3Q(){let A={},B=[],Q=new Set,Z=new Set;for(let G of $w){let F=uO(G);if(!F)continue;let I=s91(F);if(Z.has(I))continue;Z.add(I);let{settings:Y,errors:W}=IWA(F,G);for(let J of W){let X=`${J.file}:${J.path}:${J.message}`;if(!Q.has(X))Q.add(X),B.push(J)}if(Y)A=GW1(A,Y,(J,X)=>{if(Array.isArray(J)&&Array.isArray(X))return a3Q(J,X);return})}let D=[\"user\",\"project\",\"local\"];return B.push(...D.flatMap((G)=>nD(G).errors)),{settings:A,errors:B}}function W9(){let{settings:A}=dN();return A||{}}function dN(){if(r91!==null)return r91;return r91=s3Q(),r91}function Qo1(A,B=300000){let Q=new Map,Z=(...D)=>{let G=JSON.stringify(D),F=Q.get(G),I=Date.now();if(!F)Q.set(G,{value:A(...D),timestamp:I,refreshing:!1});if(F&&I-F.timestamp>B&&!F.refreshing)return F.refreshing=!0,Promise.resolve().then(()=>{let Y=A(...D);Q.set(G,{value:Y,timestamp:Date.now(),refreshing:!1})}).catch((Y)=>{O1(Y instanceof Error?Y:new Error(String(Y)));let W=Q.get(G);if(W)W.refreshing=!1}),F.value;return Q.get(G).value};return Z.cache={clear:()=>Q.clear()},Z}function YWA(A,B=300000){let Q=new Map,Z=async(...D)=>{let G=JSON.stringify(D),F=Q.get(G),I=Date.now();if(!F){let Y=await A(...D);return Q.set(G,{value:Y,timestamp:I,refreshing:!1}),Y}if(F&&I-F.timestamp>B&&!F.refreshing)return F.refreshing=!0,A(...D).then((Y)=>{Q.set(G,{value:Y,timestamp:Date.now(),refreshing:!1})}).catch((Y)=>{O1(Y instanceof Error?Y:new Error(String(Y)));let W=Q.get(G);if(W)W.refreshing=!1}),F.value;return Q.get(G).value};return Z.cache={clear:()=>Q.clear()},Z}function iC1(A,B){let Q=new Kw({max:1000}),Z=(...D)=>{let G=B(...D),F=Q.get(G);if(F!==void 0)return F;let I=A(...D);return Q.set(G,I),I};return Z.cache={clear:()=>Q.clear(),size:()=>Q.size},Z}import{createHash as r3Q}from\"crypto\";function AQ1(A=\"\"){let B=YQ(),Z=!process.env.CLAUDE_CONFIG_DIR?\"\":`-${r3Q(\"sha256\").update(B).digest(\"hex\").substring(0,8)}`;return`Claude Code${A}${Z}`}function WWA(){let A=AQ1(\"-credentials\");return{name:\"keychain\",read(){try{let B=FZ(`security find-generic-password -a $USER -w -s \"${A}\"`);if(B)return JSON.parse(B)}catch(B){return null}return null},update(B){try{let Z=JSON.stringify(B).replace(/\"/g,\"\\\\\\\"\"),D=`security add-generic-password -U -a $USER -s \"${A}\" -w \"${Z}\"`;return FZ(D),{success:!0}}catch(Q){return{success:!1}}},delete(){try{return FZ(`security delete-generic-password -a $USER -s \"${A}\"`),!0}catch(B){return!1}}}}import{join as o3Q}from\"path\";function Zo1(){let A=YQ(),B=\".credentials.json\",Q=o3Q(A,\".credentials.json\");return{name:\"plaintext\",read(){if(k1().existsSync(Q))try{let Z=k1().readFileSync(Q,{encoding:\"utf8\"});return JSON.parse(Z)}catch(Z){return null}return null},update(Z){try{if(!k1().existsSync(A))k1().mkdirSync(A);return k1().writeFileSync(Q,JSON.stringify(Z),{encoding:\"utf8\",flush:!1}),k1().chmodSync(Q,384),{success:!0,warning:\"Warning: Storing credentials in plaintext.\"}}catch(D){return{success:!1}}},delete(){if(k1().existsSync(Q))try{return k1().unlinkSync(Q),!0}catch(Z){return!1}return!0}}}function t3Q(A,B){return{name:`${A.name}-with-${B.name}-fallback`,read(){let Q=A.read();if(Q!==null&&Q!==void 0)return Q;return B.read()||{}},update(Q){let Z=A.read(),D=A.update(Q);if(D.success){if(Z===null)B.delete();return D}let G=B.update(Q);if(G.success)return{success:!0,warning:G.warning};return{success:!1}},delete(){let Q=A.delete(),Z=B.delete();return Q||Z}}}function GC(){if(process.platform===\"darwin\"){let A=WWA(),B=Zo1();return t3Q(A,B)}return Zo1()}async function JWA(A){let Q=E0().oauthAccount?.accountUuid,Z=SY(A);if(!Q||!Z)return;let D=`${j5().BASE_API_URL}/api/claude_cli_profile`;try{return(await x9.get(D,{headers:{\"x-api-key\":Z,\"anthropic-beta\":wp},params:{account_uuid:Q}})).data}catch(G){O1(G)}}async function BQ1(A){let B=`${j5().BASE_API_URL}/api/oauth/profile`;try{return(await x9.get(B,{headers:{Authorization:`Bearer ${A}`,\"Content-Type\":\"application/json\"}})).data}catch(Q){O1(Q)}}function cy(A){return Boolean(A?.includes(gV1))}function nC1(A){return A?.split(\" \").filter(Boolean)??[]}function Do1({codeChallenge:A,state:B,isManual:Q,loginWithClaudeAi:Z,inferenceOnly:D}){let G=Z?j5().CLAUDE_AI_AUTHORIZE_URL:j5().CONSOLE_AUTHORIZE_URL,F=new URL(G);F.searchParams.append(\"code\",\"true\"),F.searchParams.append(\"client_id\",j5().CLIENT_ID),F.searchParams.append(\"response_type\",\"code\"),F.searchParams.append(\"redirect_uri\",Q?j5().MANUAL_REDIRECT_URL:`http://localhost:${j5().REDIRECT_PORT}/callback`);let I=D?[gV1]:j5().SCOPES;return F.searchParams.append(\"scope\",I.join(\" \")),F.searchParams.append(\"code_challenge\",A),F.searchParams.append(\"code_challenge_method\",\"S256\"),F.searchParams.append(\"state\",B),F.toString()}async function XWA(A,B,Q,Z=!1,D){let G={grant_type:\"authorization_code\",code:A,redirect_uri:Z?j5().MANUAL_REDIRECT_URL:`http://localhost:${j5().REDIRECT_PORT}/callback`,client_id:j5().CLIENT_ID,code_verifier:Q,state:B};if(D!==void 0)G.expires_in=D;let F=await x9.post(j5().TOKEN_URL,G,{headers:{\"Content-Type\":\"application/json\"}});if(F.status!==200)throw new Error(F.status===401?\"Authentication failed: Invalid authorization code\":`Token exchange failed (${F.status}): ${F.statusText}`);return F.data}async function VWA(A){let B={grant_type:\"refresh_token\",refresh_token:A,client_id:j5().CLIENT_ID};try{let Q=await x9.post(j5().TOKEN_URL,B,{headers:{\"Content-Type\":\"application/json\"}});if(Q.status!==200)throw new Error(`Token refresh failed: ${Q.statusText}`);let Z=Q.data,{access_token:D,refresh_token:G=A,expires_in:F}=Z,I=Date.now()+F*1000,Y=nC1(Z.scope);K1(\"tengu_oauth_token_refresh_success\",{});let W=await Go1(D);return{accessToken:D,refreshToken:G,expiresAt:I,scopes:Y,subscriptionType:W}}catch(Q){throw K1(\"tengu_oauth_token_refresh_failure\",{}),Q}}async function KWA(A){let B=await x9.get(j5().ROLES_URL,{headers:{Authorization:`Bearer ${A}`}});if(B.status!==200)throw new Error(`Failed to fetch user roles: ${B.statusText}`);let Q=B.data,Z=E0();if(!Z.oauthAccount)throw new Error(\"OAuth account information not found in config\");Z.oauthAccount.organizationRole=Q.organization_role,Z.oauthAccount.workspaceRole=Q.workspace_role,Z.oauthAccount.organizationName=Q.organization_name,pA(Z),K1(\"tengu_oauth_roles_stored\",{org_role:Q.organization_role})}async function CWA(A){try{let B=await x9.post(j5().API_KEY_URL,null,{headers:{Authorization:`Bearer ${A}`}}),Q=B.data?.raw_key;if(Q)return HWA(Q),K1(\"tengu_oauth_api_key\",{status:\"success\",statusCode:B.status}),Q;return null}catch(B){throw K1(\"tengu_oauth_api_key\",{status:\"failure\",error:B instanceof Error?B.message:String(B)}),B}}function aC1(A){if(A===null)return!1;let B=300000;return Date.now()+B>=A}async function Go1(A){switch((await BQ1(A))?.organization?.organization_type){case\"claude_max\":return\"max\";case\"claude_pro\":return\"pro\";case\"claude_enterprise\":return\"enterprise\";case\"claude_team\":return\"team\";default:return null}}async function sC1(){let B=E0().oauthAccount?.organizationUuid;if(B)return B;let Q=IZ()?.accessToken;if(Q===void 0)return null;let D=(await BQ1(Q))?.organization?.uuid;if(!D)return null;return D}var FsA=F1(IH1(),1);var A$1=F1(hSA(),1),QsA=F1(PQ0(),1);function ZsA(A){return A?.name===\"CredentialsProviderError\"}function DsA(A){if(!A||typeof A!==\"object\")return!1;let B=A;if(!B.Credentials||typeof B.Credentials!==\"object\")return!1;let Q=B.Credentials;return typeof Q.AccessKeyId===\"string\"&&typeof Q.SecretAccessKey===\"string\"&&typeof Q.SessionToken===\"string\"&&Q.AccessKeyId.length>0&&Q.SecretAccessKey.length>0&&Q.SessionToken.length>0}var SQ0=async()=>{await new A$1.STSClient().send(new A$1.GetCallerIdentityCommand({}))};async function GsA(){try{F0(\"Clearing AWS credential provider cache\"),await QsA.fromIni({ignoreCache:!0})(),F0(\"AWS credential provider cache refreshed\")}catch(A){F0(\"Failed to clear AWS credential cache (this is expected if no credentials are configured)\")}}import{exec as MB4}from\"child_process\";var RB4=300000;function mz(){let A=process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX,Q=(W9()||{}).apiKeyHelper,Z=process.env.ANTHROPIC_AUTH_TOKEN||Q,{source:D}=ZX(Ql());return!(A||Z||(D===\"ANTHROPIC_API_KEY\"||D===\"apiKeyHelper\"))}function Vg(){if(process.env.ANTHROPIC_AUTH_TOKEN)return{source:\"ANTHROPIC_AUTH_TOKEN\",hasToken:!0};if(process.env.CLAUDE_CODE_OAUTH_TOKEN)return{source:\"CLAUDE_CODE_OAUTH_TOKEN\",hasToken:!0};if(Kg())return{source:\"apiKeyHelper\",hasToken:!0};let B=IZ();if(cy(B?.scopes)&&B?.accessToken)return{source:\"claude.ai\",hasToken:!0};return{source:\"none\",hasToken:!1}}function SY(A){let{key:B}=ZX(A);return B}function ZX(A){if(A&&process.env.ANTHROPIC_API_KEY)return{key:process.env.ANTHROPIC_API_KEY,source:\"ANTHROPIC_API_KEY\"};if(dQ(!1)){if(!process.env.ANTHROPIC_API_KEY&&!process.env.CLAUDE_CODE_OAUTH_TOKEN)throw new Error(\"ANTHROPIC_API_KEY or CLAUDE_CODE_OAUTH_TOKEN env var is required\");if(process.env.ANTHROPIC_API_KEY)return{key:process.env.ANTHROPIC_API_KEY,source:\"ANTHROPIC_API_KEY\"};return{key:null,source:\"none\"}}if(process.env.ANTHROPIC_API_KEY&&E0().customApiKeyResponses?.approved?.includes($C(process.env.ANTHROPIC_API_KEY)))return{key:process.env.ANTHROPIC_API_KEY,source:\"ANTHROPIC_API_KEY\"};let B=Kg();if(B)return{key:B,source:\"apiKeyHelper\"};let Q=l41();if(Q)return Q;return{key:null,source:\"none\"}}function OB4(){let A=process.env.CLAUDE_CODE_API_KEY_HELPER_TTL_MS;if(A){let B=parseInt(A,10);if(!Number.isNaN(B)&&B>=0)return B;N2(`Found CLAUDE_CODE_API_KEY_HELPER_TTL_MS env var, but it was not a valid number. Got ${A}`)}return RB4}var Kg=Qo1(()=>{let B=(W9()||{}).apiKeyHelper;if(!B)return null;try{let Q=FZ(B)?.toString().trim();if(!Q)throw new Error(\"apiKeyHelper did not return a valid value\");return Q}catch(Q){let Z=A0.red(\"Error getting API key from apiKeyHelper (in settings or ~/.claude.json):\");if(Q instanceof Error&&\"stderr\"in Q)console.error(Z,String(Q.stderr));else if(Q instanceof Error)console.error(Z,Q.message);else console.error(Z,Q);return\" \"}},OB4());function IsA(){Kg.cache.clear()}var TB4=3600000;async function PB4(){let A=W9()?.awsAuthRefresh;if(!A)return!1;try{return F0(\"Fetching AWS caller identity for AWS auth refresh command\"),await SQ0(),F0(\"Fetched AWS caller identity, skipping AWS auth refresh command\"),!1}catch{return F0(\"Running AWS auth refresh command\"),new Promise((B)=>{let Q=MB4(A);Q.stdout.on(\"data\",(Z)=>{console.log(Z)}),Q.stderr.on(\"data\",(Z)=>{console.error(Z)}),Q.on(\"close\",(Z)=>{if(Z===0)F0(\"AWS auth refresh completed successfully\"),B(!0);else{let D=A0.red(\"Error running awsAuthRefresh (in settings or ~/.claude.json):\");console.error(D),B(!1)}})})}}async function SB4(){let A=W9()?.awsCredentialExport;if(!A)return null;try{return F0(\"Fetching AWS caller identity for credential export command\"),await SQ0(),F0(\"Fetched AWS caller identity, skipping AWS credential export command\"),null}catch{try{F0(\"Running AWS credential export command\");let B=FZ(A)?.toString().trim();if(!B)throw new Error(\"awsCredentialExport did not return a valid value\");let Q=JSON.parse(B);if(!DsA(Q))throw new Error(\"awsCredentialExport did not return valid AWS STS output structure\");return F0(\"AWS credentials retrieved from awsCredentialExport\"),{accessKeyId:Q.Credentials.AccessKeyId,secretAccessKey:Q.Credentials.SecretAccessKey,sessionToken:Q.Credentials.SessionToken}}catch(B){let Q=A0.red(\"Error getting AWS credentials from awsCredentialExport (in settings or ~/.claude.json):\");if(B instanceof Error&&\"stderr\"in B)console.error(Q,String(B.stderr));else if(B instanceof Error)console.error(Q,B.message);else console.error(Q,B);return null}}}var c41=Qo1(async()=>{let A=await PB4(),B=await SB4();if(A||B)await GsA();return B},TB4);function YsA(){c41.cache.clear()}function $C(A){return A.slice(-20)}var l41=OA(()=>{if(process.platform===\"darwin\"){let B=AQ1();try{let Q=FZ(`security find-generic-password -a $USER -w -s \"${B}\"`);if(Q)return{key:Q,source:\"/login managed key\"}}catch(Q){O1(Q)}}let A=E0();if(!A.primaryApiKey)return null;return{key:A.primaryApiKey,source:\"/login managed key\"}});function jB4(A){return/^[a-zA-Z0-9-_]+$/.test(A)}function HWA(A){if(!jB4(A))throw new Error(\"Invalid API key format. API key must contain only alphanumeric characters, dashes, and underscores.\");let B=E0();if(XsA(),process.platform===\"darwin\")try{let Z=AQ1();FZ(`security add-generic-password -a $USER -s \"${Z}\" -w ${A}`)}catch(Z){O1(Z),B.primaryApiKey=A}else B.primaryApiKey=A;if(!B.customApiKeyResponses)B.customApiKeyResponses={approved:[],rejected:[]};if(!B.customApiKeyResponses.approved)B.customApiKeyResponses.approved=[];let Q=$C(A);if(!B.customApiKeyResponses.approved.includes(Q))B.customApiKeyResponses.approved.push(Q);pA(B),l41.cache.clear?.()}function WsA(A){let B=E0(),Q=$C(A);return B.customApiKeyResponses?.approved?.includes(Q)??!1}function JsA(){XsA();let A=E0();A.primaryApiKey=void 0,pA(A),l41.cache.clear?.()}function XsA(){if(process.platform===\"darwin\")try{let A=AQ1();FZ(`security delete-generic-password -a $USER -s \"${A}\"`)}catch(A){O1(A)}}function p41(A){if(!cy(A.scopes))return{success:!0};if(!A.refreshToken||!A.expiresAt)return{success:!0};try{let B=GC(),Q=B.read()||{};Q.claudeAiOauth={accessToken:A.accessToken,refreshToken:A.refreshToken,expiresAt:A.expiresAt,scopes:A.scopes,subscriptionType:A.subscriptionType};let Z=B.update(Q);return IZ.cache?.clear?.(),RV.cache?.clear?.(),Z}catch(B){return O1(B),{success:!1,warning:\"Failed to save OAuth tokens\"}}}var IZ=OA(()=>{if(process.env.CLAUDE_CODE_OAUTH_TOKEN)return{accessToken:process.env.CLAUDE_CODE_OAUTH_TOKEN,refreshToken:null,expiresAt:null,scopes:[\"user:inference\"],subscriptionType:null};try{let Q=GC().read()?.claudeAiOauth;if(!Q?.accessToken)return null;if(!Q.subscriptionType){let Z=Q.isMax===!1?\"pro\":\"max\";return{...Q,subscriptionType:Z}}return Q}catch(A){return O1(A),null}});async function na(A=0){let Q=IZ();if(!Q?.refreshToken||!aC1(Q.expiresAt))return!1;if(IZ.cache?.clear?.(),Q=IZ(),!Q?.refreshToken||!aC1(Q.expiresAt))return!1;let Z=YQ();k1().mkdirSync(Z);let G;try{G=await FsA.lock(Z)}catch(F){if(F.code===\"ELOCKED\"){if(A<5)return await new Promise((I)=>setTimeout(I,1000+Math.random()*1000)),na(A+1);return!1}return O1(F),!1}try{if(IZ.cache?.clear?.(),Q=IZ(),!Q?.refreshToken||!aC1(Q.expiresAt))return!1;let F=await VWA(Q.refreshToken);return p41({...F,scopes:Q.scopes}),IZ.cache?.clear?.(),!0}catch(F){return O1(F instanceof Error?F:new Error(String(F))),!1}finally{await G()}}function Q9(){if(!mz())return!1;return cy(IZ()?.scopes)}function VsA(){if(process.env.CLAUDE_CODE_USE_BEDROCK===\"true\"||process.env.CLAUDE_CODE_USE_VERTEX===\"true\")return!1;if(Q9())return!1;return!0}function pY(){let A=CsA();return A===\"max\"||A===\"enterprise\"||A===\"team\"}function KsA(){return pY()}function CsA(){if(!mz())return null;let A=IZ();if(!A)return null;return A.subscriptionType??null}function B$1(){switch(CsA()){case\"enterprise\":return\"Claude Enterprise\";case\"team\":return\"Claude Team\";case\"max\":return\"Claude Max\";case\"pro\":return\"Claude Pro\";default:return\"Claude API\"}}function aa(){return!!(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX)}function HsA(){let B=W9()?.otelHeadersHelper;if(!B)return{};try{let Q=FZ(B)?.toString().trim();if(!Q)throw new Error(\"otelHeadersHelper did not return a valid value\");let Z=JSON.parse(Q);if(typeof Z!==\"object\"||Z===null||Array.isArray(Z))throw new Error(\"otelHeadersHelper must return a JSON object with string key-value pairs\");for(let[D,G]of Object.entries(Z))if(typeof G!==\"string\")throw new Error(`otelHeadersHelper returned non-string value for key \"${D}\": ${typeof G}`);return Z}catch(Q){throw O1(new Error(`Error getting OpenTelemetry headers from otelHeadersHelper (in settings): ${Q instanceof Error?Q.message:String(Q)}`)),Q}}function yB4(A){let B=mZ();if(B===\"bedrock\")return!1;else if(B===\"firstParty\")return!A.includes(\"claude-3-\");else return A.includes(\"claude-opus-4\")||A.includes(\"claude-sonnet-4\")}var RV=OA((A)=>{let B=[],Q=A.includes(\"haiku\");if(!Q)B.push(qo0);if(Q9())B.push(wp);if(!dQ(process.env.DISABLE_INTERLEAVED_THINKING)&&yB4(A))B.push(hV1);if(mZ()===\"firstParty\"&&!dQ(process.env.CLAUDE_CODE_DISABLE_FINE_GRAINED_TOOL_STREAMING))B.push(No0);if(dQ(process.env.USE_API_CONTEXT_MANAGEMENT),process.env.ANTHROPIC_BETAS&&!Q)B.push(...process.env.ANTHROPIC_BETAS.split(\",\").map((D)=>D.trim()).filter(Boolean));return B});var Cg={firstParty:\"claude-3-7-sonnet-20250219\",bedrock:\"us.anthropic.claude-3-7-sonnet-20250219-v1:0\",vertex:\"claude-3-7-sonnet@20250219\"},Hg={firstParty:\"claude-3-5-sonnet-20241022\",bedrock:\"anthropic.claude-3-5-sonnet-20241022-v2:0\",vertex:\"claude-3-5-sonnet-v2@20241022\"},i41={firstParty:\"claude-3-5-haiku-20241022\",bedrock:\"us.anthropic.claude-3-5-haiku-20241022-v1:0\",vertex:\"claude-3-5-haiku@20241022\"},bw={firstParty:\"claude-sonnet-4-20250514\",bedrock:\"us.anthropic.claude-sonnet-4-20250514-v1:0\",vertex:\"claude-sonnet-4@20250514\"};var ST={firstParty:\"claude-opus-4-20250514\",bedrock:\"us.anthropic.claude-opus-4-20250514-v1:0\",vertex:\"claude-opus-4@20250514\"},jT={firstParty:\"claude-opus-4-1-20250805\",bedrock:\"us.anthropic.claude-opus-4-1-20250805-v1:0\",vertex:\"claude-opus-4-1@20250805\"};function zsA(A){let B=A.toLowerCase();if(B.includes(\"claude-sonnet-4\"))return\"Sonnet 4\";if(B.includes(\"claude-opus-4-1\"))return\"Opus 4.1\";if(B.includes(\"claude-opus-4\"))return\"Opus 4\";if(B.includes(\"claude-3-7-sonnet\"))return\"Claude 3.7 Sonnet\";if(B.includes(\"claude-3-5-sonnet\"))return\"Claude 3.5 Sonnet\";if(B.includes(\"claude-3-5-haiku\"))return\"Claude 3.5 Haiku\";return}var vM1=F1(P42(),1);var pw2=F1($70(),1),iw2=F1(_3(),1);var _M1=F1(N70(),1);var xM1=F1(pD0(),1);import{Agent as Rl4}from\"https\";var mw2=F1(pD0(),1);var GP=OA(()=>{let A={};if(process.env.CLAUDE_CODE_CLIENT_CERT)try{A.cert=k1().readFileSync(process.env.CLAUDE_CODE_CLIENT_CERT,{encoding:\"utf8\"}),F0(\"mTLS: Loaded client certificate from CLAUDE_CODE_CLIENT_CERT\")}catch(B){N2(`mTLS: Failed to load client certificate: ${B}`)}if(process.env.CLAUDE_CODE_CLIENT_KEY)try{A.key=k1().readFileSync(process.env.CLAUDE_CODE_CLIENT_KEY,{encoding:\"utf8\"}),F0(\"mTLS: Loaded client key from CLAUDE_CODE_CLIENT_KEY\")}catch(B){N2(`mTLS: Failed to load client key: ${B}`)}if(process.env.CLAUDE_CODE_CLIENT_KEY_PASSPHRASE)A.passphrase=process.env.CLAUDE_CODE_CLIENT_KEY_PASSPHRASE,F0(\"mTLS: Using client key passphrase\");if(Object.keys(A).length===0)return;return A}),dw2=OA(()=>{let A=GP();if(!A)return;let B={...A,keepAlive:!0};return F0(\"mTLS: Creating HTTPS agent with custom certificates\"),new Rl4(B)});function cw2(){let A=GP();if(!A)return;return{cert:A.cert,key:A.key,passphrase:A.passphrase}}function Au(){let A=GP();if(!A)return{};let B={cert:A.cert,key:A.key,passphrase:A.passphrase},Q=new mw2.Agent({connect:B,pipelining:1});return F0(\"mTLS: Created undici agent with custom certificates\"),{dispatcher:Q}}function lw2(){if(!GP())return;if(process.env.NODE_EXTRA_CA_CERTS)F0(\"NODE_EXTRA_CA_CERTS detected - Node.js will automatically append to built-in CAs\")}function Z51(){return process.env.https_proxy||process.env.HTTPS_PROXY||process.env.http_proxy||process.env.HTTP_PROXY}var nw2=OA((A)=>{let B=GP(),Q={uri:A,pipelining:1};if(B)Q.requestTls={cert:B.cert,key:B.key,passphrase:B.passphrase};return new xM1.default.ProxyAgent(Q)});function aw2(){let A=Z51(),B=Au();if(A)return{dispatcher:nw2(A)};return B}function sw2(){let A=Z51(),B=dw2(),Q=GP();if(A){if(x9.defaults.proxy=!1,Q)x9.defaults.httpsAgent=new _M1.default.HttpsProxyAgent(A,{cert:Q.cert,key:Q.key,passphrase:Q.passphrase});else x9.defaults.httpsAgent=new _M1.default.HttpsProxyAgent(A);xM1.default.setGlobalDispatcher(nw2(A))}else if(B){x9.defaults.httpsAgent=B;let Z=Au();if(Z.dispatcher)xM1.default.setGlobalDispatcher(Z.dispatcher)}}function rw2(){let A=Z51();if(!A)return{};let B=new _M1.default.HttpsProxyAgent(A),Q=new iw2.NodeHttpHandler({httpAgent:B,httpsAgent:B});return{requestHandler:Q,credentials:pw2.defaultProvider({clientConfig:{requestHandler:Q}})}}var ow2=OA(async function(){let A=Ep(),B=await c41(),Q={region:A,...rw2()};if(B)Q.credentials={accessKeyId:B.accessKeyId,secretAccessKey:B.secretAccessKey,sessionToken:B.sessionToken};let Z=new vM1.BedrockClient(Q),D=new vM1.ListInferenceProfilesCommand;try{return((await Z.send(D)).inferenceProfileSummaries||[]).filter((W)=>W.inferenceProfileId?.includes(\"anthropic\")).map((W)=>W.inferenceProfileId).filter(Boolean)}catch(G){throw O1(G),G}});function Bu(A,B){return A.find((Q)=>Q.includes(B))??null}function bM1(A){let B=[],Q=!1;async function Z(){if(Q)return;if(B.length===0)return;Q=!0;while(B.length>0){let{args:D,resolve:G,reject:F,context:I}=B.shift();try{let Y=await A.apply(I,D);G(Y)}catch(Y){F(Y)}}if(Q=!1,B.length>0)Z()}return function(...D){return new Promise((G,F)=>{B.push({args:D,resolve:G,reject:F,context:this}),Z()})}}function fM1(A){return{haiku35:i41[A],sonnet35:Hg[A],sonnet37:Cg[A],sonnet40:bw[A],opus40:ST[A],opus41:jT[A]}}async function Ol4(){let A;try{A=await ow2()}catch(I){return O1(I),fM1(\"bedrock\")}if(!A?.length)return fM1(\"bedrock\");let B=Bu(A,\"claude-3-5-haiku-20241022\"),Q=Bu(A,\"claude-3-5-sonnet-20241022\"),Z=Bu(A,\"claude-3-7-sonnet-20250219\"),D=Bu(A,\"claude-sonnet-4-20250514\"),G=Bu(A,\"claude-opus-4-20250514\"),F=Bu(A,\"claude-opus-4-1-20250805\");return{haiku35:B||i41.bedrock,sonnet35:Q||Hg.bedrock,sonnet37:Z||Cg.bedrock,sonnet40:D||bw.bedrock,opus40:G||ST.bedrock,opus41:F||jT.bedrock}}var Tl4=bM1(async()=>{if(HW1()!==null)return;try{let A=await Ol4();cu1(A)}catch(A){O1(A)}});function Pl4(){if(HW1()!==null)return;if(mZ()!==\"bedrock\"){cu1(fM1(mZ()));return}Tl4()}function wI(){let A=HW1();if(A===null)return Pl4(),fM1(mZ());return A}var tw2=[\"sonnet\",\"opus\",\"haiku\",...[]],Sl4=bw,ew2=Sl4.firstParty,D51=[...tw2,\"inherit\"],nD0=\"sonnet\";function Zu(){return process.env.ANTHROPIC_SMALL_FAST_MODEL||wI().haiku35}function Go(A){return A===wI().opus40||A===wI().opus41}function Fo(){let A,B=A21();if(B!==void 0)A=B;else{let Q=W9()||{};A=process.env.ANTHROPIC_MODEL||Q.model||void 0}if(Q9()&&!pY()&&A?.includes(\"opus\"))return;return A}function WG(){let A=Fo();if(A!==void 0&&A!==null)return N_(A);if(A===null&&Al())return FP();return G51()}function A$2(){if(mZ()===\"bedrock\")return wI().sonnet37;return wI().sonnet40}function hM1(A){let{permissionMode:B,mainLoopModel:Q}=A;return Q}var Qq5=OA(()=>{return null});function G51(A={}){let{forDisplay:B=!1}=A;if(pY())return wI().opus41;return A$2()}function FP(){return A$2()}function tw(A){if(A.includes(\"claude-opus-4-1\"))return\"claude-opus-4-1\";if(A.includes(\"claude-opus-4\"))return\"claude-opus-4\";let B=A.match(/(claude-(\\d+-\\d+-)?\\w+)/);if(B&&B[1])return B[1];return A}function gM1(){if(Q9()&&!pY())return uM1.description;let A=E0().fallbackAvailableWarningThreshold;if(A===void 0)return\"Use Opus 4.1 or Sonnet 4 based on Max usage limits\";return`Opus 4.1 for up to ${(A*100).toFixed(0)}% of usage limits, then use Sonnet 4`}function IP(A){if(A===wI().opus41)return\"Opus 4.1\";if(A===wI().opus40)return\"Opus 4\";if(A===wI().sonnet40)return\"Sonnet 4\";if(A===wI().sonnet37)return\"Sonnet 3.7\";if(A===wI().sonnet35)return\"Sonnet 3.5\";if(A===wI().haiku35)return\"Haiku 3.5\";return A}function Qu(){if(Q9()&&!pY())return{value:null,label:\"Sonnet\",description:uM1.description};if(pY())return{value:null,label:\"Default (recommended)\",description:gM1()};return{value:null,label:\"Default (recommended)\",description:`Use the default model (currently ${IP(G51({forDisplay:!0}))}) · $3/$15 per Mtok`}}var B$2={value:\"sonnet\",label:\"Sonnet\",description:\"Sonnet 4 for daily use · $3/$15 per Mtok\"};var iD0={value:\"opus\",label:\"Opus\",description:\"Opus 4.1 for complex tasks · $15/$75 per Mtok\"},jl4={value:\"opus\",label:\"Opus\",description:\"Opus 4.1 for complex tasks · Reaches usage limits faster\"},uM1={value:\"sonnet\",label:\"Sonnet\",description:\"Sonnet 4 for daily use\"};function yl4(){if(Q9()&&!pY())return[Qu()];if(pY())return[Qu(),jl4,uM1];if(mZ()===\"bedrock\")return[Qu(),B$2,iD0];return[Qu(),iD0]}function Q$2(){let A=yl4(),B=null,Q=Fo(),Z=CW1();if(Q!==void 0&&Q!==null)B=Q;else if(Z!==null)B=Z;if(B===null||A.some((D)=>D.value===B))return A;if(Z$2(B))A.push(B===\"sonnet\"?B$2:iD0);else A.push({value:B,label:B,description:\"Custom model\"});return A}function Z$2(A){return tw2.includes(A)}function N_(A){let B=A.toLowerCase().trim();if(Z$2(B))switch(B){case\"sonnet\":return wI().sonnet40;case\"opus\":return wI().opus41;case\"haiku\":return wI().haiku35}return B}function Du(A){if(A===null){if(Q9()&&!pY())return`Sonnet (${uM1.description})`;else if(Q9())return`Default (${gM1()})`;return`Default (${G51({forDisplay:!0})})`}let B=N_(A);return A===B?B:`${A} (${B})`}function D$2(A){return A}function G$2(A,B){if(process.env.CLAUDE_CODE_SUBAGENT_MODEL)return process.env.CLAUDE_CODE_SUBAGENT_MODEL;if(!A)return N_(nD0);return A===\"inherit\"?B:N_(A)}function mM1(A){if(!A)return\"Sonnet (default)\";if(A===\"inherit\")return\"Inherit from parent\";return A.charAt(0).toUpperCase()+A.slice(1)}function F$2(){let A=[{value:\"sonnet\",label:\"Sonnet\",description:\"Balanced performance - best for most agents\"}];if(!(Q9()&&!pY()))A.push({value:\"opus\",label:\"Opus\",description:\"Most capable for complex reasoning tasks\"});return A.push({value:\"haiku\",label:\"Haiku\",description:\"Fast and efficient for simple tasks\"},{value:\"inherit\",label:\"Inherit from parent\",description:\"Use the same model as the main conversation\"}),A}var I$2={},Gu=null,Y$2=OA(()=>{if(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX||process.env.DISABLE_TELEMETRY||process.env.CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC)return null;let A=hl(),B={networkConfig:{api:\"https://statsig.anthropic.com/v1/\"},environment:{tier:[\"test\",\"dev\"].includes(\"production\")?\"development\":\"production\"},includeCurrentPageUrlWithEvents:!1,logLevel:dM1.LogLevel.None,storageProvider:new Li1,customUserCacheKeyFunc:(Z,D)=>{return kl4(\"sha1\").update(Z).update(D.userID||\"\").digest(\"hex\").slice(0,10)}};Gu=new dM1.StatsigClient(rl0,A,B),Gu.on(\"error\",()=>{x9.head(\"https://api.anthropic.com/api/hello\").catch(()=>{})});let Q=Gu.initializeAsync().then(()=>{});return process.on(\"beforeExit\",async()=>{await Gu?.flush()}),process.on(\"exit\",()=>{Gu?.flush()}),{client:Gu,initialized:Q}}),Fu=OA(async()=>{let A=Y$2();if(!A)return null;return await A.initialized,A.client});function W$2(){Gu=null,Y$2.cache?.clear?.(),Fu.cache?.clear?.(),xl4.cache?.clear?.(),gV.cache?.clear?.()}async function _l4(A,B){if(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX||process.env.DISABLE_TELEMETRY||process.env.CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC)return;try{let Q=B.model?String(B.model):WG(),Z=RV(Q),[D,G,F]=await Promise.all([Fu(),MA.getPackageManagers(),MA.getRuntimes()]);if(!D)return;let I={...B,model:Q,sessionId:NB(),userType:\"external\",...Z.length>0?{betas:Z.join(\",\")}:{},env:JSON.stringify({platform:MA.platform,nodeVersion:MA.nodeVersion,terminal:MA.terminal,packageManagers:G.join(\",\"),runtimes:F.join(\",\"),isRunningWithBun:MA.isRunningWithBun(),isCi:dQ(!1),isClaubbit:process.env.CLAUBBIT===\"true\",isGithubAction:process.env.GITHUB_ACTIONS===\"true\",isClaudeCodeAction:process.env.CLAUDE_CODE_ACTION===\"1\"||process.env.CLAUDE_CODE_ACTION===\"true\",isClaudeAiAuth:Q9(),version:{ISSUES_EXPLAINER:\"report the issue at https://github.com/anthropics/claude-code/issues\",PACKAGE_URL:\"@anthropic-ai/claude-code\",README_URL:\"https://docs.anthropic.com/s/claude-code\",VERSION:\"1.0.73\"}.VERSION,...process.env.GITHUB_ACTIONS===\"true\"&&{githubEventName:process.env.GITHUB_EVENT_NAME,githubActionsRunnerEnvironment:process.env.RUNNER_ENVIRONMENT,githubActionsRunnerOs:process.env.RUNNER_OS},...vB1()&&{wslVersion:vB1()}}),entrypoint:process.env.CLAUDE_CODE_ENTRYPOINT,isInteractive:String(nj0()),clientType:sj0(),...void 0,sweBenchRunId:process.env.SWE_BENCH_RUN_ID||\"\",sweBenchInstanceId:process.env.SWE_BENCH_INSTANCE_ID||\"\",sweBenchTaskId:process.env.SWE_BENCH_TASK_ID||\"\"},Y={eventName:A,metadata:I};D.logEvent(Y),await D.flush()}catch(Q){}}function K1(A,B){_l4(A,B)}var gV=OA(async(A)=>{if(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX||process.env.DISABLE_TELEMETRY||process.env.CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC)return!1;let B=await Fu();if(!B)return!1;let Q=B.checkGate(A);return I$2[A]=Q,Q});var cM1=(A,B)=>{let[Q,Z]=aD0.default.useState(B);return aD0.default.useEffect(()=>{ew(A,B).then(Z)},[A,B]),Q};function J$2(){return{...I$2}}var xl4=OA(async(A,B)=>{if(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX||process.env.DISABLE_TELEMETRY||process.env.CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC)return B;let Q=await Fu();if(!Q)return B;let Z=Q.getExperiment(A);if(Object.keys(Z.value).length===0)return B;return Z.value});async function ew(A,B){if(process.env.CLAUDE_CODE_USE_Bnode:fs:574\n  return binding.open(\n                 ^\n\nError: EACCES: permission denied, open '/var/www/html/Nestogy/.claude.json'\n    at Module.openSync (node:fs:574:18)\n    at Object.writeFileSync (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:689:9320)\n    at uN (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:748:967)\n    at R$2 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:756:2376)\n    at pA (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:756:1312)\n    at P$2 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:770:1138)\n    at file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:820:1164\n    at Q (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:677:13339)\n    at yR8 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:3361:10024)\n    at file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:3404:1373 {\n  errno: -13,\n  code: 'EACCES',\n  syscall: 'open',\n  path: '/var/www/html/Nestogy/.claude.json'\n}\n\nNode.js v20.19.4\n\n────────────────────────────────────────────────────────────\n\nclaude 🤖 "
            }
          }
        },
        {
          "display": "no, it needs to open in the dir of the webapp",
          "pastedContents": {}
        },
        {
          "display": "[Pasted text #1 +26 lines]",
          "pastedContents": {
            "1": {
              "id": 1,
              "type": "text",
              "content": "claude 🤖 introdude yourself\n❯ introdude yourself\n────────────────────────────────────────────────────────────\n❌ Failed to execute command: Claude command failed: Exception in PromiseRejectCallback:\nfile:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:751\n`)}catch(Q){O1(Q instanceof Error?Q:new Error(String(Q)))}}var f5Q=[{matches:(A)=>A.path===\"permissions.defaultMode\"&&A.code===\"invalid_enum_value\",tip:{suggestion:'Valid modes: \"acceptEdits\" (ask before file changes), \"plan\" (analysis only), \"bypassPermissions\" (auto-accept all), or \"default\" (standard behavior)',docLink:\"https://docs.anthropic.com/en/docs/claude-code/iam#permission-modes\"}},{matches:(A)=>A.path===\"apiKeyHelper\"&&A.code===\"invalid_type\",tip:{suggestion:'Provide a shell command that outputs your API key to stdout. The script should output only the API key. Example: \"/bin/generate_temp_api_key.sh\"'}},{matches:(A)=>A.path===\"cleanupPeriodDays\"&&A.code===\"too_small\"&&A.expected===\"0\",tip:{suggestion:\"Must be 0 or greater. Use 0 to disable automatic cleanup and keep chat transcripts forever, or set a positive number for days to retain (default is 30 days)\"}},{matches:(A)=>A.path.startsWith(\"env.\")&&A.code===\"invalid_type\",tip:{suggestion:'Environment variables must be strings. Wrap numbers and booleans in quotes. Example: \"DEBUG\": \"true\", \"PORT\": \"3000\"',docLink:\"https://docs.anthropic.com/en/docs/claude-code/settings#environment-variables\"}},{matches:(A)=>(A.path===\"permissions.allow\"||A.path===\"permissions.deny\")&&A.code===\"invalid_type\"&&A.expected===\"array\",tip:{suggestion:'Permission rules must be in an array. Format: [\"Tool(specifier)\"]. Examples: [\"Bash(npm run build)\", \"Edit(docs/**)\", \"Read(~/.zshrc)\"]. Use * for wildcards.'}},{matches:(A)=>A.path.includes(\"hooks\")&&A.code===\"invalid_type\",tip:{suggestion:'Hooks use a new format with matchers. Example: {\"PostToolUse\": [{\"matcher\": {\"tools\": [\"BashTool\"]}, \"hooks\": [{\"type\": \"command\", \"command\": \"echo Done\"}]}]}'}},{matches:(A)=>A.code===\"invalid_type\"&&A.expected===\"boolean\",tip:{suggestion:'Use true or false without quotes. Example: \"includeCoAuthoredBy\": true'}},{matches:(A)=>A.code===\"unrecognized_keys\",tip:{suggestion:\"Check for typos or refer to the documentation for valid fields\",docLink:\"https://docs.anthropic.com/en/docs/claude-code/settings\"}},{matches:(A)=>A.code===\"invalid_enum_value\"&&A.enumValues!==void 0,tip:{suggestion:void 0}},{matches:(A)=>A.code===\"invalid_type\"&&A.expected===\"object\"&&A.received===null&&A.path===\"\",tip:{suggestion:\"Check for missing commas, unmatched brackets, or trailing commas. Use a JSON validator to identify the exact syntax error.\"}},{matches:(A)=>A.path===\"permissions.additionalDirectories\"&&A.code===\"invalid_type\",tip:{suggestion:'Must be an array of directory paths. Example: [\"~/projects\", \"/tmp/workspace\"]. You can also use --add-dir flag or /add-dir command',docLink:\"https://docs.anthropic.com/en/docs/claude-code/iam#working-directories\"}}],h5Q={permissions:\"https://docs.anthropic.com/en/docs/claude-code/iam#configuring-permissions\",env:\"https://docs.anthropic.com/en/docs/claude-code/settings#environment-variables\",hooks:\"https://docs.anthropic.com/en/docs/claude-code/hooks\"};function LYA(A){let B=f5Q.find((Z)=>Z.matches(A));if(!B)return null;let Q={...B.tip};if(A.code===\"invalid_enum_value\"&&A.enumValues&&!Q.suggestion)Q.suggestion=`Valid values: ${A.enumValues.map((Z)=>`\"${Z}\"`).join(\", \")}`;if(!Q.docLink&&A.path){let Z=A.path.split(\".\")[0];if(Z)Q.docLink=h5Q[Z]}return Q}function MYA(A){return A.code===\"invalid_type\"}function RYA(A){return A.code===\"invalid_literal\"}function OYA(A){return A.code===\"invalid_enum_value\"}function g5Q(A){return A.code===\"unrecognized_keys\"}function TYA(A){return A.code===\"too_small\"}function PYA(A,B){return A.issues.map((Q)=>{let Z=Q.path.join(\".\"),D=Q.message,G,F,I,Y;if(OYA(Q))F=Q.options.map((J)=>String(J)),Y=Q.received;else if(RYA(Q))I=String(Q.expected),Y=Q.received;else if(MYA(Q))I=Q.expected,Y=Q.received;else if(TYA(Q))I=String(Q.minimum);else if(Q.code===\"custom\"&&\"params\"in Q)Y=Q.params.received;let W=LYA({path:Z,code:Q.code,expected:I,received:Y,enumValues:F,message:Q.message,value:Y});if(RYA(Q))G=`\"${Q.expected}\"`,D=`\"${Q.received}\" is not valid. Expected: ${G}`;else if(OYA(Q))G=F?.map((J)=>`\"${J}\"`).join(\", \"),D=`\"${Q.received}\" is not valid. Expected one of: ${G}`;else if(MYA(Q))if(Q.expected===\"object\"&&Q.received===\"null\"&&Z===\"\")D=\"Invalid or malformed JSON\";else D=`Expected ${Q.expected}, but received ${Q.received}`;else if(g5Q(Q)){let J=Q.keys.join(\", \");D=`Unrecognized field${Q.keys.length>1?\"s\":\"\"}: ${J}`}else if(TYA(Q))D=`Number must be greater than or equal to ${Q.minimum}`,G=String(Q.minimum);return{file:B,path:Z,message:D,expected:G,invalidValue:Y,suggestion:W?.suggestion,docLink:W?.docLink}})}import{join as SYA}from\"path\";function dr1(A,B){if(!A)return{};let Q={};for(let[Z,D]of Object.entries(A))Q[Z]={...D,scope:B};return Q}function jYA(A){let B=SYA(a0(),\".mcp.json\");uN(B,JSON.stringify(A,null,2),{encoding:\"utf8\"})}function u5Q(A){let B=[];function Q(D){return D.replace(/\\$\\{([^}]+)\\}/g,(G,F)=>{let[I,Y]=F.split(\":-\"),W=process.env[I];if(W!==void 0)return W;if(Y!==void 0)return Y;return B.push(I),G})}let Z;switch(A.type){case void 0:case\"stdio\":{let D=A;Z={...D,command:Q(D.command),args:D.args.map(Q),env:D.env?gj(D.env,Q):void 0};break}case\"sse\":case\"http\":{let D=A;Z={...D,url:Q(D.url),headers:D.headers?gj(D.headers,Q):void 0};break}case\"sse-ide\":case\"ws-ide\":Z=A;break}return{expanded:Z,missingVars:[...new Set(B)]}}function qh(A,B,Q){if(A.match(/[^a-zA-Z0-9_-]/))throw new Error(`Invalid name ${A}. Names can only contain letters, numbers, hyphens, and underscores.`);let Z=Or1.safeParse(B);if(!Z.success){let G=Z.error.errors.map((F)=>`${F.path.join(\".\")}: ${F.message}`).join(\", \");throw new Error(`Invalid configuration: ${G}`)}switch(Q){case\"project\":{let{servers:G}=nD(\"project\");if(G[A])throw new Error(`MCP server ${A} already exists in .mcp.json`);break}case\"user\":{if(E0().mcpServers?.[A])throw new Error(`MCP server ${A} already exists in user config`);break}case\"local\":{if(t9().mcpServers?.[A])throw new Error(`MCP server ${A} already exists in local config`);break}case\"dynamic\":throw new Error(\"Cannot add MCP server to scope: dynamic\")}let D=Z.data;switch(Q){case\"project\":{let{servers:G}=nD(\"project\"),F={};for(let[Y,W]of Object.entries(G)){let{scope:J,...X}=W;F[Y]=X}F[A]=D;let I={mcpServers:F};try{jYA(I)}catch(Y){throw new Error(`Failed to write to mcp.json: ${Y}`)}break}case\"user\":{let G=E0();if(!G.mcpServers)G.mcpServers={};G.mcpServers[A]=D,pA(G);break}case\"local\":{let G=t9();if(!G.mcpServers)G.mcpServers={};G.mcpServers[A]=D,k5(G);break}default:throw new Error(`Cannot add MCP server to scope: ${Q}`)}}function cr1(A,B){switch(B){case\"project\":{let{servers:Q}=nD(\"project\");if(!Q[A])throw new Error(`No MCP server found with name: ${A} in .mcp.json`);let Z={};for(let[G,F]of Object.entries(Q))if(G!==A){let{scope:I,...Y}=F;Z[G]=Y}let D={mcpServers:Z};try{jYA(D)}catch(G){throw new Error(`Failed to remove from .mcp.json: ${G}`)}break}case\"user\":{let Q=E0();if(!Q.mcpServers?.[A])throw new Error(`No user-scoped MCP server found with name: ${A}`);delete Q.mcpServers[A],pA(Q);break}case\"local\":{let Q=t9();if(!Q.mcpServers?.[A])throw new Error(`No project-local MCP server found with name: ${A}`);delete Q.mcpServers[A],k5(Q);break}default:throw new Error(`Cannot remove MCP server from scope: ${B}`)}}function nD(A){switch(A){case\"project\":{let B=SYA(a0(),\".mcp.json\");if(!k1().existsSync(B))return{servers:{},errors:[]};let{config:Z,errors:D}=lr1({filePath:B,expandVars:!0,scope:\"project\"});return{servers:dr1(Z?.mcpServers,A),errors:D}}case\"user\":{let B=E0().mcpServers;if(!B)return{servers:{},errors:[]};let{config:Q,errors:Z}=p91({configObject:{mcpServers:B},expandVars:!0,scope:\"user\"});return{servers:dr1(Q?.mcpServers,A),errors:Z}}case\"local\":{let B=t9().mcpServers;if(!B)return{servers:{},errors:[]};let{config:Q,errors:Z}=p91({configObject:{mcpServers:B},expandVars:!0,scope:\"local\"});return{servers:dr1(Q?.mcpServers,A),errors:Z}}}}function ai(A){let{servers:B}=nD(\"user\"),{servers:Q}=nD(\"project\"),{servers:Z}=nD(\"local\");if(Z[A])return Z[A];if(Q[A])return Q[A];if(B[A])return B[A];return null}function Wz(){let{servers:A}=nD(\"user\"),{servers:B}=nD(\"project\"),{servers:Q}=nD(\"local\"),Z={};for(let[G,F]of Object.entries(B))if(MC1(G)===\"approved\")Z[G]=F;let D=Object.assign({},A,Z,Q);return K1(\"tengu_mcp_servers\",{global:Object.keys(A).length,project:Object.keys(Z).length,user:Object.keys(Q).length}),D}function p91(A){let{configObject:B,expandVars:Q,scope:Z,filePath:D}=A,G=aIA.safeParse(B);if(!G.success)return{config:null,errors:G.error.issues.map((Y)=>({...D&&{file:D},path:Y.path.join(\".\"),message:\"Does not adhere to MCP server configuration schema\",mcpErrorMetadata:{scope:Z,severity:\"fatal\"}}))};let F=[],I={};for(let[Y,W]of Object.entries(G.data.mcpServers)){let J=W;if(Q){let{expanded:X,missingVars:V}=u5Q(W);if(V.length>0)F.push({...D&&{file:D},path:`mcpServers.${Y}`,message:`Missing environment variables: ${V.join(\", \")}`,suggestion:`Set the following environment variables: ${V.join(\", \")}`,mcpErrorMetadata:{scope:Z,serverName:Y,severity:\"warning\"}});J=X}if(T9()===\"windows\"&&(!J.type||J.type===\"stdio\")&&(J.command===\"npx\"||J.command.endsWith(\"\\\\npx\")||J.command.endsWith(\"/npx\")))F.push({...D&&{file:D},path:`mcpServers.${Y}`,message:\"Windows requires 'cmd /c' wrapper to execute npx\",suggestion:'Change command to \"cmd\" with args [\"/c\", \"npx\", ...]. See: https://docs.anthropic.com/en/docs/claude-code/mcp#configure-mcp-servers',mcpErrorMetadata:{scope:Z,serverName:Y,severity:\"warning\"}});I[Y]=J}return{config:{mcpServers:I},errors:F}}function lr1(A){let{filePath:B,expandVars:Q,scope:Z}=A,D=k1();if(!D.existsSync(B))return{config:null,errors:[{file:B,path:\"\",message:`MCP config file not found: ${B}`,suggestion:\"Check that the file path is correct\",mcpErrorMetadata:{scope:Z,severity:\"fatal\"}}]};let G;try{G=D.readFileSync(B,{encoding:\"utf8\"})}catch(I){return{config:null,errors:[{file:B,path:\"\",message:`Failed to read file: ${I}`,suggestion:\"Check file permissions and ensure the file exists\",mcpErrorMetadata:{scope:Z,severity:\"fatal\"}}]}}let F=R7(G);if(!F)return{config:null,errors:[{file:B,path:\"\",message:\"MCP config is not a valid JSON\",suggestion:\"Fix the JSON syntax errors in the file\",mcpErrorMetadata:{scope:Z,severity:\"fatal\"}}]};return p91({configObject:F,expandVars:Q,scope:Z,filePath:B})}import{stat as z3Q}from\"fs\";import{stat as E3Q,readdir as U3Q}from\"fs/promises\";import{EventEmitter as w3Q}from\"events\";import*as K6 from\"path\";import{stat as m5Q,lstat as yYA,readdir as d5Q,realpath as c5Q}from\"node:fs/promises\";import{Readable as l5Q}from\"node:stream\";import{resolve as kYA,relative as p5Q,join as i5Q,sep as n5Q}from\"node:path\";var DC={FILE_TYPE:\"files\",DIR_TYPE:\"directories\",FILE_DIR_TYPE:\"files_directories\",EVERYTHING_TYPE:\"all\"},pr1={root:\".\",fileFilter:(A)=>!0,directoryFilter:(A)=>!0,type:DC.FILE_TYPE,lstat:!1,depth:2147483648,alwaysStat:!1,highWaterMark:4096};Object.freeze(pr1);var bYA=\"READDIRP_RECURSIVE_ERROR\",a5Q=new Set([\"ENOENT\",\"EPERM\",\"EACCES\",\"ELOOP\",bYA]),_YA=[DC.DIR_TYPE,DC.EVERYTHING_TYPE,DC.FILE_DIR_TYPE,DC.FILE_TYPE],s5Q=new Set([DC.DIR_TYPE,DC.EVERYTHING_TYPE,DC.FILE_DIR_TYPE]),r5Q=new Set([DC.EVERYTHING_TYPE,DC.FILE_DIR_TYPE,DC.FILE_TYPE]),o5Q=(A)=>a5Q.has(A.code),t5Q=process.platform===\"win32\",xYA=(A)=>!0,vYA=(A)=>{if(A===void 0)return xYA;if(typeof A===\"function\")return A;if(typeof A===\"string\"){let B=A.trim();return(Q)=>Q.basename===B}if(Array.isArray(A)){let B=A.map((Q)=>Q.trim());return(Q)=>B.some((Z)=>Q.basename===Z)}return xYA};class fYA extends l5Q{constructor(A={}){super({objectMode:!0,autoDestroy:!0,highWaterMark:A.highWaterMark});let B={...pr1,...A},{root:Q,type:Z}=B;this._fileFilter=vYA(B.fileFilter),this._directoryFilter=vYA(B.directoryFilter);let D=B.lstat?yYA:m5Q;if(t5Q)this._stat=(G)=>D(G,{bigint:!0});else this._stat=D;this._maxDepth=B.depth??pr1.depth,this._wantsDir=Z?s5Q.has(Z):!1,this._wantsFile=Z?r5Q.has(Z):!1,this._wantsEverything=Z===DC.EVERYTHING_TYPE,this._root=kYA(Q),this._isDirent=!B.alwaysStat,this._statsProp=this._isDirent?\"dirent\":\"stats\",this._rdOptions={encoding:\"utf8\",withFileTypes:this._isDirent},this.parents=[this._exploreDir(Q,1)],this.reading=!1,this.parent=void 0}async _read(A){if(this.reading)return;this.reading=!0;try{while(!this.destroyed&&A>0){let B=this.parent,Q=B&&B.files;if(Q&&Q.length>0){let{path:Z,depth:D}=B,G=Q.splice(0,A).map((I)=>this._formatEntry(I,Z)),F=await Promise.all(G);for(let I of F){if(!I)continue;if(this.destroyed)return;let Y=await this._getEntryType(I);if(Y===\"directory\"&&this._directoryFilter(I)){if(D<=this._maxDepth)this.parents.push(this._exploreDir(I.fullPath,D+1));if(this._wantsDir)this.push(I),A--}else if((Y===\"file\"||this._includeAsFile(I))&&this._fileFilter(I)){if(this._wantsFile)this.push(I),A--}}}else{let Z=this.parents.pop();if(!Z){this.push(null);break}if(this.parent=await Z,this.destroyed)return}}}catch(B){this.destroy(B)}finally{this.reading=!1}}async _exploreDir(A,B){let Q;try{Q=await d5Q(A,this._rdOptions)}catch(Z){this._onError(Z)}return{files:Q,depth:B,path:A}}async _formatEntry(A,B){let Q,Z=this._isDirent?A.name:A;try{let D=kYA(i5Q(B,Z));Q={path:p5Q(this._root,D),fullPath:D,basename:Z},Q[this._statsProp]=this._isDirent?A:await this._stat(D)}catch(D){this._onError(D);return}return Q}_onError(A){if(o5Q(A)&&!this.destroyed)this.emit(\"warn\",A);else this.destroy(A)}async _getEntryType(A){if(!A&&this._statsProp in A)return\"\";let B=A[this._statsProp];if(B.isFile())return\"file\";if(B.isDirectory())return\"directory\";if(B&&B.isSymbolicLink()){let Q=A.fullPath;try{let Z=await c5Q(Q),D=await yYA(Z);if(D.isFile())return\"file\";if(D.isDirectory()){let G=Z.length;if(Q.startsWith(Z)&&Q.substr(G,1)===n5Q){let F=new Error(`Circular symlink detected: \"${Q}\" points to \"${Z}\"`);return F.code=bYA,this._onError(F)}return\"directory\"}}catch(Z){return this._onError(Z),\"\"}}}_includeAsFile(A){let B=A&&A[this._statsProp];return B&&this._wantsEverything&&!B.isDirectory()}}function hYA(A,B={}){let Q=B.entryType||B.type;if(Q===\"both\")Q=DC.FILE_DIR_TYPE;if(Q)B.type=Q;if(!A)throw new Error(\"readdirp: root argument is required. Usage: readdirp(root, options)\");else if(typeof A!==\"string\")throw new TypeError(\"readdirp: root argument must be a string. Usage: readdirp(root, options)\");else if(Q&&!_YA.includes(Q))throw new Error(`readdirp: Invalid type passed. Use one of ${_YA.join(\", \")}`);return B.root=A,new fYA(B)}import{watchFile as e5Q,unwatchFile as gYA,watch as A3Q}from\"fs\";import{open as B3Q,stat as mYA,lstat as Q3Q,realpath as ir1}from\"fs/promises\";import*as GZ from\"path\";import{type as Z3Q}from\"os\";var D3Q=\"data\",sr1=\"end\",dYA=\"close\",mC1=()=>{};var dC1=process.platform,rr1=dC1===\"win32\",G3Q=dC1===\"darwin\",F3Q=dC1===\"linux\",I3Q=dC1===\"freebsd\",cYA=Z3Q()===\"OS400\",O7={ALL:\"all\",READY:\"ready\",ADD:\"add\",CHANGE:\"change\",ADD_DIR:\"addDir\",UNLINK:\"unlink\",UNLINK_DIR:\"unlinkDir\",RAW:\"raw\",ERROR:\"error\"},Tw=O7,Y3Q=\"watch\",W3Q={lstat:Q3Q,stat:mYA},Nh=\"listeners\",hC1=\"errHandlers\",si=\"rawEmitters\",J3Q=[Nh,hC1,si],X3Q=new Set([\"3dm\",\"3ds\",\"3g2\",\"3gp\",\"7z\",\"a\",\"aac\",\"adp\",\"afdesign\",\"afphoto\",\"afpub\",\"ai\",\"aif\",\"aiff\",\"alz\",\"ape\",\"apk\",\"appimage\",\"ar\",\"arj\",\"asf\",\"au\",\"avi\",\"bak\",\"baml\",\"bh\",\"bin\",\"bk\",\"bmp\",\"btif\",\"bz2\",\"bzip2\",\"cab\",\"caf\",\"cgm\",\"class\",\"cmx\",\"cpio\",\"cr2\",\"cur\",\"dat\",\"dcm\",\"deb\",\"dex\",\"djvu\",\"dll\",\"dmg\",\"dng\",\"doc\",\"docm\",\"docx\",\"dot\",\"dotm\",\"dra\",\"DS_Store\",\"dsk\",\"dts\",\"dtshd\",\"dvb\",\"dwg\",\"dxf\",\"ecelp4800\",\"ecelp7470\",\"ecelp9600\",\"egg\",\"eol\",\"eot\",\"epub\",\"exe\",\"f4v\",\"fbs\",\"fh\",\"fla\",\"flac\",\"flatpak\",\"fli\",\"flv\",\"fpx\",\"fst\",\"fvt\",\"g3\",\"gh\",\"gif\",\"graffle\",\"gz\",\"gzip\",\"h261\",\"h263\",\"h264\",\"icns\",\"ico\",\"ief\",\"img\",\"ipa\",\"iso\",\"jar\",\"jpeg\",\"jpg\",\"jpgv\",\"jpm\",\"jxr\",\"key\",\"ktx\",\"lha\",\"lib\",\"lvp\",\"lz\",\"lzh\",\"lzma\",\"lzo\",\"m3u\",\"m4a\",\"m4v\",\"mar\",\"mdi\",\"mht\",\"mid\",\"midi\",\"mj2\",\"mka\",\"mkv\",\"mmr\",\"mng\",\"mobi\",\"mov\",\"movie\",\"mp3\",\"mp4\",\"mp4a\",\"mpeg\",\"mpg\",\"mpga\",\"mxu\",\"nef\",\"npx\",\"numbers\",\"nupkg\",\"o\",\"odp\",\"ods\",\"odt\",\"oga\",\"ogg\",\"ogv\",\"otf\",\"ott\",\"pages\",\"pbm\",\"pcx\",\"pdb\",\"pdf\",\"pea\",\"pgm\",\"pic\",\"png\",\"pnm\",\"pot\",\"potm\",\"potx\",\"ppa\",\"ppam\",\"ppm\",\"pps\",\"ppsm\",\"ppsx\",\"ppt\",\"pptm\",\"pptx\",\"psd\",\"pya\",\"pyc\",\"pyo\",\"pyv\",\"qt\",\"rar\",\"ras\",\"raw\",\"resources\",\"rgb\",\"rip\",\"rlc\",\"rmf\",\"rmvb\",\"rpm\",\"rtf\",\"rz\",\"s3m\",\"s7z\",\"scpt\",\"sgi\",\"shar\",\"snap\",\"sil\",\"sketch\",\"slk\",\"smv\",\"snk\",\"so\",\"stl\",\"suo\",\"sub\",\"swf\",\"tar\",\"tbz\",\"tbz2\",\"tga\",\"tgz\",\"thmx\",\"tif\",\"tiff\",\"tlz\",\"ttc\",\"ttf\",\"txz\",\"udf\",\"uvh\",\"uvi\",\"uvm\",\"uvp\",\"uvs\",\"uvu\",\"viv\",\"vob\",\"war\",\"wav\",\"wax\",\"wbmp\",\"wdp\",\"weba\",\"webm\",\"webp\",\"whl\",\"wim\",\"wm\",\"wma\",\"wmv\",\"wmx\",\"woff\",\"woff2\",\"wrm\",\"wvx\",\"xbm\",\"xif\",\"xla\",\"xlam\",\"xls\",\"xlsb\",\"xlsm\",\"xlsx\",\"xlt\",\"xltm\",\"xltx\",\"xm\",\"xmind\",\"xpi\",\"xpm\",\"xwd\",\"xz\",\"z\",\"zip\",\"zipx\"]),V3Q=(A)=>X3Q.has(GZ.extname(A).slice(1).toLowerCase()),ar1=(A,B)=>{if(A instanceof Set)A.forEach(B);else B(A)},i91=(A,B,Q)=>{let Z=A[B];if(!(Z instanceof Set))A[B]=Z=new Set([Z]);Z.add(Q)},K3Q=(A)=>(B)=>{let Q=A[B];if(Q instanceof Set)Q.clear();else delete A[B]},n91=(A,B,Q)=>{let Z=A[B];if(Z instanceof Set)Z.delete(Q);else if(Z===Q)delete A[B]},lYA=(A)=>A instanceof Set?A.size===0:!A,gC1=new Map;function uYA(A,B,Q,Z,D){let G=(F,I)=>{if(Q(A),D(F,I,{watchedPath:A}),I&&A!==I)uC1(GZ.resolve(A,I),Nh,GZ.join(A,I))};try{return A3Q(A,{persistent:B.persistent},G)}catch(F){Z(F);return}}var uC1=(A,B,Q,Z,D)=>{let G=gC1.get(A);if(!G)return;ar1(G[B],(F)=>{F(Q,Z,D)})},C3Q=(A,B,Q,Z)=>{let{listener:D,errHandler:G,rawEmitter:F}=Z,I=gC1.get(B),Y;if(!Q.persistent){if(Y=uYA(A,Q,D,G,F),!Y)return;return Y.close.bind(Y)}if(I)i91(I,Nh,D),i91(I,hC1,G),i91(I,si,F);else{if(Y=uYA(A,Q,uC1.bind(null,B,Nh),G,uC1.bind(null,B,si)),!Y)return;Y.on(Tw.ERROR,async(W)=>{let J=uC1.bind(null,B,hC1);if(I)I.watcherUnusable=!0;if(rr1&&W.code===\"EPERM\")try{await(await B3Q(A,\"r\")).close(),J(W)}catch(X){}else J(W)}),I={listeners:D,errHandlers:G,rawEmitters:F,watcher:Y},gC1.set(B,I)}return()=>{if(n91(I,Nh,D),n91(I,hC1,G),n91(I,si,F),lYA(I.listeners))I.watcher.close(),gC1.delete(B),J3Q.forEach(K3Q(I)),I.watcher=void 0,Object.freeze(I)}},nr1=new Map,H3Q=(A,B,Q,Z)=>{let{listener:D,rawEmitter:G}=Z,F=nr1.get(B),I=F&&F.options;if(I&&(I.persistent<Q.persistent||I.interval>Q.interval))gYA(B),F=void 0;if(F)i91(F,Nh,D),i91(F,si,G);else F={listeners:D,rawEmitters:G,options:Q,watcher:e5Q(B,Q,(Y,W)=>{ar1(F.rawEmitters,(X)=>{X(Tw.CHANGE,B,{curr:Y,prev:W})});let J=Y.mtimeMs;if(Y.size!==W.size||J>W.mtimeMs||J===0)ar1(F.listeners,(X)=>X(A,Y))})},nr1.set(B,F);return()=>{if(n91(F,Nh,D),n91(F,si,G),lYA(F.listeners))nr1.delete(B),gYA(B),F.options=F.watcher=void 0,Object.freeze(F)}};class or1{constructor(A){this.fsw=A,this._boundHandleError=(B)=>A._handleError(B)}_watchWithNodeFs(A,B){let Q=this.fsw.options,Z=GZ.dirname(A),D=GZ.basename(A);this.fsw._getWatchedDir(Z).add(D);let F=GZ.resolve(A),I={persistent:Q.persistent};if(!B)B=mC1;let Y;if(Q.usePolling){let W=Q.interval!==Q.binaryInterval;I.interval=W&&V3Q(D)?Q.binaryInterval:Q.interval,Y=H3Q(A,F,I,{listener:B,rawEmitter:this.fsw._emitRaw})}else Y=C3Q(A,F,I,{listener:B,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw});return Y}_handleFile(A,B,Q){if(this.fsw.closed)return;let Z=GZ.dirname(A),D=GZ.basename(A),G=this.fsw._getWatchedDir(Z),F=B;if(G.has(D))return;let I=async(W,J)=>{if(!this.fsw._throttle(Y3Q,A,5))return;if(!J||J.mtimeMs===0)try{let X=await mYA(A);if(this.fsw.closed)return;let{atimeMs:V,mtimeMs:K}=X;if(!V||V<=K||K!==F.mtimeMs)this.fsw._emit(Tw.CHANGE,A,X);if((G3Q||F3Q||I3Q)&&F.ino!==X.ino){this.fsw._closeFile(W),F=X;let C=this._watchWithNodeFs(A,I);if(C)this.fsw._addPathCloser(W,C)}else F=X}catch(X){this.fsw._remove(Z,D)}else if(G.has(D)){let{atimeMs:X,mtimeMs:V}=J;if(!X||X<=V||V!==F.mtimeMs)this.fsw._emit(Tw.CHANGE,A,J);F=J}},Y=this._watchWithNodeFs(A,I);if(!(Q&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(A)){if(!this.fsw._throttle(Tw.ADD,A,0))return;this.fsw._emit(Tw.ADD,A,B)}return Y}async _handleSymlink(A,B,Q,Z){if(this.fsw.closed)return;let D=A.fullPath,G=this.fsw._getWatchedDir(B);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let F;try{F=await ir1(Q)}catch(I){return this.fsw._emitReady(),!0}if(this.fsw.closed)return;if(G.has(Z)){if(this.fsw._symlinkPaths.get(D)!==F)this.fsw._symlinkPaths.set(D,F),this.fsw._emit(Tw.CHANGE,Q,A.stats)}else G.add(Z),this.fsw._symlinkPaths.set(D,F),this.fsw._emit(Tw.ADD,Q,A.stats);return this.fsw._emitReady(),!0}if(this.fsw._symlinkPaths.has(D))return!0;this.fsw._symlinkPaths.set(D,!0)}_handleRead(A,B,Q,Z,D,G,F){if(A=GZ.join(A,\"\"),F=this.fsw._throttle(\"readdir\",A,1000),!F)return;let I=this.fsw._getWatchedDir(Q.path),Y=new Set,W=this.fsw._readdirp(A,{fileFilter:(J)=>Q.filterPath(J),directoryFilter:(J)=>Q.filterDir(J)});if(!W)return;return W.on(D3Q,async(J)=>{if(this.fsw.closed){W=void 0;return}let X=J.path,V=GZ.join(A,X);if(Y.add(X),J.stats.isSymbolicLink()&&await this._handleSymlink(J,A,V,X))return;if(this.fsw.closed){W=void 0;return}if(X===Z||!Z&&!I.has(X))this.fsw._incrReadyCount(),V=GZ.join(D,GZ.relative(D,V)),this._addToNodeFs(V,B,Q,G+1)}).on(Tw.ERROR,this._boundHandleError),new Promise((J,X)=>{if(!W)return X();W.once(sr1,()=>{if(this.fsw.closed){W=void 0;return}let V=F?F.clear():!1;if(J(void 0),I.getChildren().filter((K)=>{return K!==A&&!Y.has(K)}).forEach((K)=>{this.fsw._remove(A,K)}),W=void 0,V)this._handleRead(A,!1,Q,Z,D,G,F)})})}async _handleDir(A,B,Q,Z,D,G,F){let I=this.fsw._getWatchedDir(GZ.dirname(A)),Y=I.has(GZ.basename(A));if(!(Q&&this.fsw.options.ignoreInitial)&&!D&&!Y)this.fsw._emit(Tw.ADD_DIR,A,B);I.add(GZ.basename(A)),this.fsw._getWatchedDir(A);let W,J,X=this.fsw.options.depth;if((X==null||Z<=X)&&!this.fsw._symlinkPaths.has(F)){if(!D){if(await this._handleRead(A,Q,G,D,A,Z,W),this.fsw.closed)return}J=this._watchWithNodeFs(A,(V,K)=>{if(K&&K.mtimeMs===0)return;this._handleRead(V,!1,G,D,A,Z,W)})}return J}async _addToNodeFs(A,B,Q,Z,D){let G=this.fsw._emitReady;if(this.fsw._isIgnored(A)||this.fsw.closed)return G(),!1;let F=this.fsw._getWatchHelpers(A);if(Q)F.filterPath=(I)=>Q.filterPath(I),F.filterDir=(I)=>Q.filterDir(I);try{let I=await W3Q[F.statMethod](F.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(F.watchPath,I))return G(),!1;let Y=this.fsw.options.followSymlinks,W;if(I.isDirectory()){let J=GZ.resolve(A),X=Y?await ir1(A):A;if(this.fsw.closed)return;if(W=await this._handleDir(F.watchPath,I,B,Z,D,F,X),this.fsw.closed)return;if(J!==X&&X!==void 0)this.fsw._symlinkPaths.set(J,X)}else if(I.isSymbolicLink()){let J=Y?await ir1(A):A;if(this.fsw.closed)return;let X=GZ.dirname(F.watchPath);if(this.fsw._getWatchedDir(X).add(F.watchPath),this.fsw._emit(Tw.ADD,F.watchPath,I),W=await this._handleDir(X,I,B,Z,A,F,J),this.fsw.closed)return;if(J!==void 0)this.fsw._symlinkPaths.set(GZ.resolve(A),J)}else W=this._handleFile(F.watchPath,I,B);if(G(),W)this.fsw._addPathCloser(A,W);return!1}catch(I){if(this.fsw._handleError(I))return G(),A}}}/*! chokidar - MIT License (c) 2012 Paul Miller (paulmillr.com) */var tr1=\"/\",$3Q=\"//\",rYA=\".\",q3Q=\"..\",N3Q=\"string\",L3Q=/\\\\/g,pYA=/\\/\\//,M3Q=/\\..*\\.(sw[px])$|~$|\\.subl.*\\.tmp/,R3Q=/^\\.[/\\\\]/;function cC1(A){return Array.isArray(A)?A:[A]}var er1=(A)=>typeof A===\"object\"&&A!==null&&!(A instanceof RegExp);function O3Q(A){if(typeof A===\"function\")return A;if(typeof A===\"string\")return(B)=>A===B;if(A instanceof RegExp)return(B)=>A.test(B);if(typeof A===\"object\"&&A!==null)return(B)=>{if(A.path===B)return!0;if(A.recursive){let Q=K6.relative(A.path,B);if(!Q)return!1;return!Q.startsWith(\"..\")&&!K6.isAbsolute(Q)}return!1};return()=>!1}function T3Q(A){if(typeof A!==\"string\")throw new Error(\"string expected\");A=K6.normalize(A),A=A.replace(/\\\\/g,\"/\");let B=!1;if(A.startsWith(\"//\"))B=!0;let Q=/\\/\\//;while(A.match(Q))A=A.replace(Q,\"/\");if(B)A=\"/\"+A;return A}function iYA(A,B,Q){let Z=T3Q(B);for(let D=0;D<A.length;D++){let G=A[D];if(G(Z,Q))return!0}return!1}function P3Q(A,B){if(A==null)throw new TypeError(\"anymatch: specify first argument\");let Z=cC1(A).map((D)=>O3Q(D));if(B==null)return(D,G)=>{return iYA(Z,D,G)};return iYA(Z,B)}var nYA=(A)=>{let B=cC1(A).flat();if(!B.every((Q)=>typeof Q===N3Q))throw new TypeError(`Non-string provided as watch path: ${B}`);return B.map(oYA)},aYA=(A)=>{let B=A.replace(L3Q,tr1),Q=!1;if(B.startsWith($3Q))Q=!0;while(B.match(pYA))B=B.replace(pYA,tr1);if(Q)B=tr1+B;return B},oYA=(A)=>aYA(K6.normalize(aYA(A))),sYA=(A=\"\")=>(B)=>{if(typeof B===\"string\")return oYA(K6.isAbsolute(B)?B:K6.join(A,B));else return B},S3Q=(A,B)=>{if(K6.isAbsolute(A))return A;return K6.join(B,A)},j3Q=Object.freeze(new Set);class tYA{constructor(A,B){this.path=A,this._removeWatcher=B,this.items=new Set}add(A){let{items:B}=this;if(!B)return;if(A!==rYA&&A!==q3Q)B.add(A)}async remove(A){let{items:B}=this;if(!B)return;if(B.delete(A),B.size>0)return;let Q=this.path;try{await U3Q(Q)}catch(Z){if(this._removeWatcher)this._removeWatcher(K6.dirname(Q),K6.basename(Q))}}has(A){let{items:B}=this;if(!B)return;return B.has(A)}getChildren(){let{items:A}=this;if(!A)return[];return[...A.values()]}dispose(){this.items.clear(),this.path=\"\",this._removeWatcher=mC1,this.items=j3Q,Object.freeze(this)}}var y3Q=\"stat\",k3Q=\"lstat\";class eYA{constructor(A,B,Q){this.fsw=Q;let Z=A;this.path=A=A.replace(R3Q,\"\"),this.watchPath=Z,this.fullWatchPath=K6.resolve(Z),this.dirParts=[],this.dirParts.forEach((D)=>{if(D.length>1)D.pop()}),this.followSymlinks=B,this.statMethod=B?y3Q:k3Q}entryPath(A){return K6.join(this.watchPath,K6.relative(this.watchPath,A.fullPath))}filterPath(A){let{stats:B}=A;if(B&&B.isSymbolicLink())return this.filterDir(A);let Q=this.entryPath(A);return this.fsw._isntIgnored(Q,B)&&this.fsw._hasReadPermissions(B)}filterDir(A){return this.fsw._isntIgnored(this.entryPath(A),A.stats)}}class Ao1 extends w3Q{constructor(A={}){super();this.closed=!1,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._streams=new Set,this._symlinkPaths=new Map,this._watched=new Map,this._pendingWrites=new Map,this._pendingUnlinks=new Map,this._readyCount=0,this._readyEmitted=!1;let B=A.awaitWriteFinish,Q={stabilityThreshold:2000,pollInterval:100},Z={persistent:!0,ignoreInitial:!1,ignorePermissionErrors:!1,interval:100,binaryInterval:300,followSymlinks:!0,usePolling:!1,atomic:!0,...A,ignored:A.ignored?cC1(A.ignored):cC1([]),awaitWriteFinish:B===!0?Q:typeof B===\"object\"?{...Q,...B}:!1};if(cYA)Z.usePolling=!0;if(Z.atomic===void 0)Z.atomic=!Z.usePolling;let D=process.env.CHOKIDAR_USEPOLLING;if(D!==void 0){let I=D.toLowerCase();if(I===\"false\"||I===\"0\")Z.usePolling=!1;else if(I===\"true\"||I===\"1\")Z.usePolling=!0;else Z.usePolling=!!I}let G=process.env.CHOKIDAR_INTERVAL;if(G)Z.interval=Number.parseInt(G,10);let F=0;this._emitReady=()=>{if(F++,F>=this._readyCount)this._emitReady=mC1,this._readyEmitted=!0,process.nextTick(()=>this.emit(O7.READY))},this._emitRaw=(...I)=>this.emit(O7.RAW,...I),this._boundRemove=this._remove.bind(this),this.options=Z,this._nodeFsHandler=new or1(this),Object.freeze(Z)}_addIgnoredPath(A){if(er1(A)){for(let B of this._ignoredPaths)if(er1(B)&&B.path===A.path&&B.recursive===A.recursive)return}this._ignoredPaths.add(A)}_removeIgnoredPath(A){if(this._ignoredPaths.delete(A),typeof A===\"string\"){for(let B of this._ignoredPaths)if(er1(B)&&B.path===A)this._ignoredPaths.delete(B)}}add(A,B,Q){let{cwd:Z}=this.options;this.closed=!1,this._closePromise=void 0;let D=nYA(A);if(Z)D=D.map((G)=>{return S3Q(G,Z)});if(D.forEach((G)=>{this._removeIgnoredPath(G)}),this._userIgnored=void 0,!this._readyCount)this._readyCount=0;return this._readyCount+=D.length,Promise.all(D.map(async(G)=>{let F=await this._nodeFsHandler._addToNodeFs(G,!Q,void 0,0,B);if(F)this._emitReady();return F})).then((G)=>{if(this.closed)return;G.forEach((F)=>{if(F)this.add(K6.dirname(F),K6.basename(B||F))})}),this}unwatch(A){if(this.closed)return this;let B=nYA(A),{cwd:Q}=this.options;return B.forEach((Z)=>{if(!K6.isAbsolute(Z)&&!this._closers.has(Z)){if(Q)Z=K6.join(Q,Z);Z=K6.resolve(Z)}if(this._closePath(Z),this._addIgnoredPath(Z),this._watched.has(Z))this._addIgnoredPath({path:Z,recursive:!0});this._userIgnored=void 0}),this}close(){if(this._closePromise)return this._closePromise;this.closed=!0,this.removeAllListeners();let A=[];return this._closers.forEach((B)=>B.forEach((Q)=>{let Z=Q();if(Z instanceof Promise)A.push(Z)})),this._streams.forEach((B)=>B.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach((B)=>B.dispose()),this._closers.clear(),this._watched.clear(),this._streams.clear(),this._symlinkPaths.clear(),this._throttled.clear(),this._closePromise=A.length?Promise.all(A).then(()=>{return}):Promise.resolve(),this._closePromise}getWatched(){let A={};return this._watched.forEach((B,Q)=>{let D=(this.options.cwd?K6.relative(this.options.cwd,Q):Q)||rYA;A[D]=B.getChildren().sort()}),A}emitWithAll(A,B){if(this.emit(A,...B),A!==O7.ERROR)this.emit(O7.ALL,A,...B)}async _emit(A,B,Q){if(this.closed)return;let Z=this.options;if(rr1)B=K6.normalize(B);if(Z.cwd)B=K6.relative(Z.cwd,B);let D=[B];if(Q!=null)D.push(Q);let G=Z.awaitWriteFinish,F;if(G&&(F=this._pendingWrites.get(B)))return F.lastChange=new Date,this;if(Z.atomic){if(A===O7.UNLINK)return this._pendingUnlinks.set(B,[A,...D]),setTimeout(()=>{this._pendingUnlinks.forEach((I,Y)=>{this.emit(...I),this.emit(O7.ALL,...I),this._pendingUnlinks.delete(Y)})},typeof Z.atomic===\"number\"?Z.atomic:100),this;if(A===O7.ADD&&this._pendingUnlinks.has(B))A=O7.CHANGE,this._pendingUnlinks.delete(B)}if(G&&(A===O7.ADD||A===O7.CHANGE)&&this._readyEmitted){let I=(Y,W)=>{if(Y)A=O7.ERROR,D[0]=Y,this.emitWithAll(A,D);else if(W){if(D.length>1)D[1]=W;else D.push(W);this.emitWithAll(A,D)}};return this._awaitWriteFinish(B,G.stabilityThreshold,A,I),this}if(A===O7.CHANGE){if(!this._throttle(O7.CHANGE,B,50))return this}if(Z.alwaysStat&&Q===void 0&&(A===O7.ADD||A===O7.ADD_DIR||A===O7.CHANGE)){let I=Z.cwd?K6.join(Z.cwd,B):B,Y;try{Y=await E3Q(I)}catch(W){}if(!Y||this.closed)return;D.push(Y)}return this.emitWithAll(A,D),this}_handleError(A){let B=A&&A.code;if(A&&B!==\"ENOENT\"&&B!==\"ENOTDIR\"&&(!this.options.ignorePermissionErrors||B!==\"EPERM\"&&B!==\"EACCES\"))this.emit(O7.ERROR,A);return A||this.closed}_throttle(A,B,Q){if(!this._throttled.has(A))this._throttled.set(A,new Map);let Z=this._throttled.get(A);if(!Z)throw new Error(\"invalid throttle\");let D=Z.get(B);if(D)return D.count++,!1;let G,F=()=>{let Y=Z.get(B),W=Y?Y.count:0;if(Z.delete(B),clearTimeout(G),Y)clearTimeout(Y.timeoutObject);return W};G=setTimeout(F,Q);let I={timeoutObject:G,clear:F,count:0};return Z.set(B,I),I}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(A,B,Q,Z){let D=this.options.awaitWriteFinish;if(typeof D!==\"object\")return;let G=D.pollInterval,F,I=A;if(this.options.cwd&&!K6.isAbsolute(A))I=K6.join(this.options.cwd,A);let Y=new Date,W=this._pendingWrites;function J(X){z3Q(I,(V,K)=>{if(V||!W.has(A)){if(V&&V.code!==\"ENOENT\")Z(V);return}let C=Number(new Date);if(X&&K.size!==X.size)W.get(A).lastChange=C;let H=W.get(A);if(C-H.lastChange>=B)W.delete(A),Z(void 0,K);else F=setTimeout(J,G,K)})}if(!W.has(A))W.set(A,{lastChange:Y,cancelWait:()=>{return W.delete(A),clearTimeout(F),Q}}),F=setTimeout(J,G)}_isIgnored(A,B){if(this.options.atomic&&M3Q.test(A))return!0;if(!this._userIgnored){let{cwd:Q}=this.options,D=(this.options.ignored||[]).map(sYA(Q)),F=[...[...this._ignoredPaths].map(sYA(Q)),...D];this._userIgnored=P3Q(F,void 0)}return this._userIgnored(A,B)}_isntIgnored(A,B){return!this._isIgnored(A,B)}_getWatchHelpers(A){return new eYA(A,this.options.followSymlinks,this)}_getWatchedDir(A){let B=K6.resolve(A);if(!this._watched.has(B))this._watched.set(B,new tYA(B,this._boundRemove));return this._watched.get(B)}_hasReadPermissions(A){if(this.options.ignorePermissionErrors)return!0;return Boolean(Number(A.mode)&256)}_remove(A,B,Q){let Z=K6.join(A,B),D=K6.resolve(Z);if(Q=Q!=null?Q:this._watched.has(Z)||this._watched.has(D),!this._throttle(\"remove\",Z,100))return;if(!Q&&this._watched.size===1)this.add(A,B,!0);this._getWatchedDir(Z).getChildren().forEach((X)=>this._remove(Z,X));let I=this._getWatchedDir(A),Y=I.has(B);if(I.remove(B),this._symlinkPaths.has(D))this._symlinkPaths.delete(D);let W=Z;if(this.options.cwd)W=K6.relative(this.options.cwd,Z);if(this.options.awaitWriteFinish&&this._pendingWrites.has(W)){if(this._pendingWrites.get(W).cancelWait()===O7.ADD)return}this._watched.delete(Z),this._watched.delete(D);let J=Q?O7.UNLINK_DIR:O7.UNLINK;if(Y&&!this._isIgnored(Z))this._emit(J,Z);this._closePath(Z)}_closePath(A){this._closeFile(A);let B=K6.dirname(A);this._getWatchedDir(B).remove(K6.basename(A))}_closeFile(A){let B=this._closers.get(A);if(!B)return;B.forEach((Q)=>Q()),this._closers.delete(A)}_addPathCloser(A,B){if(!B)return;let Q=this._closers.get(A);if(!Q)Q=[],this._closers.set(A,Q);Q.push(B)}_readdirp(A,B){if(this.closed)return;let Q={type:O7.ALL,alwaysStat:!0,lstat:!0,...B,depth:0},Z=hYA(A,Q);return this._streams.add(Z),Z.once(dYA,()=>{Z=void 0}),Z.once(sr1,()=>{if(Z)this._streams.delete(Z),Z=void 0}),Z}}function _3Q(A,B={}){let Q=new Ao1(B);return Q.add(A),Q}var AWA={watch:_3Q,FSWatcher:Ao1};import*as QWA from\"path\";var x3Q=1000,v3Q=500,b3Q=5000,ri=null,BWA=!1,ZWA=!1,lC1=new Map,a91=new Set;function f3Q(){if(BWA||ZWA)return;BWA=!0;let A=m3Q();if(A.length===0)return;F0(`Watching for changes in setting files ${A.join(\", \")}...`),ri=AWA.watch(A,{persistent:!0,ignoreInitial:!0,awaitWriteFinish:{stabilityThreshold:x3Q,pollInterval:v3Q},ignored:(B)=>B.split(QWA.sep).some((Q)=>Q===\".git\"),ignorePermissionErrors:!0,usePolling:!1,atomic:!0}),ri.on(\"change\",d3Q),ri.on(\"unlink\",c3Q)}function h3Q(){if(ZWA=!0,ri)ri.close(),ri=null;lC1.clear(),a91.clear()}function g3Q(A){return a91.add(A),()=>{a91.delete(A)}}function u3Q(A){let B=uO(A);if(B)lC1.set(B,Date.now())}function m3Q(){let A=k1();return $w.map((B)=>{let Q=uO(B);if(!Q)return;try{if(!A.statSync(Q).isFile())return}catch{return}return Q}).filter((B)=>B!==void 0)}function d3Q(A){let B=DWA(A);if(!B)return;let Q=lC1.get(A);if(Q&&Date.now()-Q<b3Q){lC1.delete(A);return}F0(`Detected change to ${A}`),a91.forEach((Z)=>Z(B))}function c3Q(A){let B=DWA(A);if(!B)return;F0(`Detected deletion of ${A}`),a91.forEach((Q)=>Q(B))}function DWA(A){return $w.find((B)=>uO(B)===A)}var pC1={initialize:f3Q,dispose:h3Q,subscribe:g3Q,markInternalWrite:u3Q};var r91=null;function Bo1(){switch(T9()){case\"macos\":return\"/Library/Application Support/ClaudeCode\";case\"windows\":return\"C:\\\\ProgramData\\\\ClaudeCode\";default:return\"/etc/claude-code\"}}function l3Q(){return o91(Bo1(),\"managed-settings.json\")}function p3Q(A){if(A.length===0)return\"unknown\";let B=A[0];if(!B)return\"unknown\";if(B.path.length>0)return B.path.join(\".\");return\"unknown\"}function i3Q(A,B){let Q=new Error(\"Invalid settings\"),Z=p3Q(B.issues);FWA.withScope((D)=>{if(A)D.setTag(\"settings_source\",u91(A));D.setTag(\"invalid_key\",Z),D.setContext(\"validation_error\",{errorMessage:B.message,issues:B.issues}),O1(Q)}),F0(`Invalid settings in ${A||\"unknown\"} source - key: ${Z}, error: ${B.message}`)}function n3Q(A,B){if(typeof A===\"object\"&&A&&\"code\"in A&&A.code===\"ENOENT\")F0(`Broken symlink or missing file encountered for settings.json at path: ${B}`);else O1(A instanceof Error?A:new Error(String(A)))}function IWA(A,B){let Q=k1();if(!Q.existsSync(A))return{settings:null,errors:[]};try{let{resolvedPath:Z}=CV(Q,A),D=TY(Z);if(D.trim()===\"\")return{settings:{},errors:[]};let G=R7(D),F=$YA.safeParse(G);if(!F.success)return i3Q(B,F.error),{settings:null,errors:PYA(F.error,A)};return{settings:F.data,errors:[]}}catch(Z){return n3Q(Z,A),{settings:null,errors:[]}}}function yC1(A){switch(A){case\"userSettings\":return s91(YQ());case\"policySettings\":case\"projectSettings\":case\"localSettings\":return s91(w9());case\"flagSettings\":{let B=nu1();return B?GWA(s91(B)):s91(w9())}}}function uO(A){switch(A){case\"userSettings\":return o91(yC1(A),\"settings.json\");case\"projectSettings\":case\"localSettings\":return o91(yC1(A),t91(A));case\"policySettings\":return l3Q();case\"flagSettings\":return nu1()}}function t91(A){switch(A){case\"projectSettings\":return o91(\".claude\",\"settings.json\");case\"localSettings\":return o91(\".claude\",\"settings.local.json\")}}function MY(A){let B=uO(A);if(!B)return null;let{settings:Q}=IWA(B,A);return Q}function h8(A,B){if(A===\"policySettings\"||A===\"flagSettings\")return{error:null};let Q=uO(A);if(!Q)return{error:null};try{let Z=GWA(Q);if(!k1().existsSync(Z))k1().mkdirSync(Z);let D=MY(A);if(!D&&k1().existsSync(Q)){let F=TY(Q),I=R7(F);if(I===null)return{error:new Error(`Invalid JSON syntax in settings file at ${Q}`)};if(I&&typeof I===\"object\")D=I,F0(`Using raw settings from ${Q} due to validation failure`)}let G=GW1(D||{},B,(F,I,Y,W)=>{if(I===void 0&&W&&typeof Y===\"string\"){delete W[Y];return}if(Array.isArray(I))return I;return});if(pC1.markInternalWrite(A),uN(Q,JSON.stringify(G,null,2)),e91(),A===\"localSettings\")ni(t91(\"localSettings\"),w9())}catch(Z){let D=new Error(`Failed to read raw settings from ${Q}: ${Z}`);return O1(D),{error:D}}return{error:null}}function a3Q(A,B){let Q=[...A,...B];return Array.from(new Set(Q))}function e91(){r91=null}function s3Q(){let A={},B=[],Q=new Set,Z=new Set;for(let G of $w){let F=uO(G);if(!F)continue;let I=s91(F);if(Z.has(I))continue;Z.add(I);let{settings:Y,errors:W}=IWA(F,G);for(let J of W){let X=`${J.file}:${J.path}:${J.message}`;if(!Q.has(X))Q.add(X),B.push(J)}if(Y)A=GW1(A,Y,(J,X)=>{if(Array.isArray(J)&&Array.isArray(X))return a3Q(J,X);return})}let D=[\"user\",\"project\",\"local\"];return B.push(...D.flatMap((G)=>nD(G).errors)),{settings:A,errors:B}}function W9(){let{settings:A}=dN();return A||{}}function dN(){if(r91!==null)return r91;return r91=s3Q(),r91}function Qo1(A,B=300000){let Q=new Map,Z=(...D)=>{let G=JSON.stringify(D),F=Q.get(G),I=Date.now();if(!F)Q.set(G,{value:A(...D),timestamp:I,refreshing:!1});if(F&&I-F.timestamp>B&&!F.refreshing)return F.refreshing=!0,Promise.resolve().then(()=>{let Y=A(...D);Q.set(G,{value:Y,timestamp:Date.now(),refreshing:!1})}).catch((Y)=>{O1(Y instanceof Error?Y:new Error(String(Y)));let W=Q.get(G);if(W)W.refreshing=!1}),F.value;return Q.get(G).value};return Z.cache={clear:()=>Q.clear()},Z}function YWA(A,B=300000){let Q=new Map,Z=async(...D)=>{let G=JSON.stringify(D),F=Q.get(G),I=Date.now();if(!F){let Y=await A(...D);return Q.set(G,{value:Y,timestamp:I,refreshing:!1}),Y}if(F&&I-F.timestamp>B&&!F.refreshing)return F.refreshing=!0,A(...D).then((Y)=>{Q.set(G,{value:Y,timestamp:Date.now(),refreshing:!1})}).catch((Y)=>{O1(Y instanceof Error?Y:new Error(String(Y)));let W=Q.get(G);if(W)W.refreshing=!1}),F.value;return Q.get(G).value};return Z.cache={clear:()=>Q.clear()},Z}function iC1(A,B){let Q=new Kw({max:1000}),Z=(...D)=>{let G=B(...D),F=Q.get(G);if(F!==void 0)return F;let I=A(...D);return Q.set(G,I),I};return Z.cache={clear:()=>Q.clear(),size:()=>Q.size},Z}import{createHash as r3Q}from\"crypto\";function AQ1(A=\"\"){let B=YQ(),Z=!process.env.CLAUDE_CONFIG_DIR?\"\":`-${r3Q(\"sha256\").update(B).digest(\"hex\").substring(0,8)}`;return`Claude Code${A}${Z}`}function WWA(){let A=AQ1(\"-credentials\");return{name:\"keychain\",read(){try{let B=FZ(`security find-generic-password -a $USER -w -s \"${A}\"`);if(B)return JSON.parse(B)}catch(B){return null}return null},update(B){try{let Z=JSON.stringify(B).replace(/\"/g,\"\\\\\\\"\"),D=`security add-generic-password -U -a $USER -s \"${A}\" -w \"${Z}\"`;return FZ(D),{success:!0}}catch(Q){return{success:!1}}},delete(){try{return FZ(`security delete-generic-password -a $USER -s \"${A}\"`),!0}catch(B){return!1}}}}import{join as o3Q}from\"path\";function Zo1(){let A=YQ(),B=\".credentials.json\",Q=o3Q(A,\".credentials.json\");return{name:\"plaintext\",read(){if(k1().existsSync(Q))try{let Z=k1().readFileSync(Q,{encoding:\"utf8\"});return JSON.parse(Z)}catch(Z){return null}return null},update(Z){try{if(!k1().existsSync(A))k1().mkdirSync(A);return k1().writeFileSync(Q,JSON.stringify(Z),{encoding:\"utf8\",flush:!1}),k1().chmodSync(Q,384),{success:!0,warning:\"Warning: Storing credentials in plaintext.\"}}catch(D){return{success:!1}}},delete(){if(k1().existsSync(Q))try{return k1().unlinkSync(Q),!0}catch(Z){return!1}return!0}}}function t3Q(A,B){return{name:`${A.name}-with-${B.name}-fallback`,read(){let Q=A.read();if(Q!==null&&Q!==void 0)return Q;return B.read()||{}},update(Q){let Z=A.read(),D=A.update(Q);if(D.success){if(Z===null)B.delete();return D}let G=B.update(Q);if(G.success)return{success:!0,warning:G.warning};return{success:!1}},delete(){let Q=A.delete(),Z=B.delete();return Q||Z}}}function GC(){if(process.platform===\"darwin\"){let A=WWA(),B=Zo1();return t3Q(A,B)}return Zo1()}async function JWA(A){let Q=E0().oauthAccount?.accountUuid,Z=SY(A);if(!Q||!Z)return;let D=`${j5().BASE_API_URL}/api/claude_cli_profile`;try{return(await x9.get(D,{headers:{\"x-api-key\":Z,\"anthropic-beta\":wp},params:{account_uuid:Q}})).data}catch(G){O1(G)}}async function BQ1(A){let B=`${j5().BASE_API_URL}/api/oauth/profile`;try{return(await x9.get(B,{headers:{Authorization:`Bearer ${A}`,\"Content-Type\":\"application/json\"}})).data}catch(Q){O1(Q)}}function cy(A){return Boolean(A?.includes(gV1))}function nC1(A){return A?.split(\" \").filter(Boolean)??[]}function Do1({codeChallenge:A,state:B,isManual:Q,loginWithClaudeAi:Z,inferenceOnly:D}){let G=Z?j5().CLAUDE_AI_AUTHORIZE_URL:j5().CONSOLE_AUTHORIZE_URL,F=new URL(G);F.searchParams.append(\"code\",\"true\"),F.searchParams.append(\"client_id\",j5().CLIENT_ID),F.searchParams.append(\"response_type\",\"code\"),F.searchParams.append(\"redirect_uri\",Q?j5().MANUAL_REDIRECT_URL:`http://localhost:${j5().REDIRECT_PORT}/callback`);let I=D?[gV1]:j5().SCOPES;return F.searchParams.append(\"scope\",I.join(\" \")),F.searchParams.append(\"code_challenge\",A),F.searchParams.append(\"code_challenge_method\",\"S256\"),F.searchParams.append(\"state\",B),F.toString()}async function XWA(A,B,Q,Z=!1,D){let G={grant_type:\"authorization_code\",code:A,redirect_uri:Z?j5().MANUAL_REDIRECT_URL:`http://localhost:${j5().REDIRECT_PORT}/callback`,client_id:j5().CLIENT_ID,code_verifier:Q,state:B};if(D!==void 0)G.expires_in=D;let F=await x9.post(j5().TOKEN_URL,G,{headers:{\"Content-Type\":\"application/json\"}});if(F.status!==200)throw new Error(F.status===401?\"Authentication failed: Invalid authorization code\":`Token exchange failed (${F.status}): ${F.statusText}`);return F.data}async function VWA(A){let B={grant_type:\"refresh_token\",refresh_token:A,client_id:j5().CLIENT_ID};try{let Q=await x9.post(j5().TOKEN_URL,B,{headers:{\"Content-Type\":\"application/json\"}});if(Q.status!==200)throw new Error(`Token refresh failed: ${Q.statusText}`);let Z=Q.data,{access_token:D,refresh_token:G=A,expires_in:F}=Z,I=Date.now()+F*1000,Y=nC1(Z.scope);K1(\"tengu_oauth_token_refresh_success\",{});let W=await Go1(D);return{accessToken:D,refreshToken:G,expiresAt:I,scopes:Y,subscriptionType:W}}catch(Q){throw K1(\"tengu_oauth_token_refresh_failure\",{}),Q}}async function KWA(A){let B=await x9.get(j5().ROLES_URL,{headers:{Authorization:`Bearer ${A}`}});if(B.status!==200)throw new Error(`Failed to fetch user roles: ${B.statusText}`);let Q=B.data,Z=E0();if(!Z.oauthAccount)throw new Error(\"OAuth account information not found in config\");Z.oauthAccount.organizationRole=Q.organization_role,Z.oauthAccount.workspaceRole=Q.workspace_role,Z.oauthAccount.organizationName=Q.organization_name,pA(Z),K1(\"tengu_oauth_roles_stored\",{org_role:Q.organization_role})}async function CWA(A){try{let B=await x9.post(j5().API_KEY_URL,null,{headers:{Authorization:`Bearer ${A}`}}),Q=B.data?.raw_key;if(Q)return HWA(Q),K1(\"tengu_oauth_api_key\",{status:\"success\",statusCode:B.status}),Q;return null}catch(B){throw K1(\"tengu_oauth_api_key\",{status:\"failure\",error:B instanceof Error?B.message:String(B)}),B}}function aC1(A){if(A===null)return!1;let B=300000;return Date.now()+B>=A}async function Go1(A){switch((await BQ1(A))?.organization?.organization_type){case\"claude_max\":return\"max\";case\"claude_pro\":return\"pro\";case\"claude_enterprise\":return\"enterprise\";case\"claude_team\":return\"team\";default:return null}}async function sC1(){let B=E0().oauthAccount?.organizationUuid;if(B)return B;let Q=IZ()?.accessToken;if(Q===void 0)return null;let D=(await BQ1(Q))?.organization?.uuid;if(!D)return null;return D}var FsA=F1(IH1(),1);var A$1=F1(hSA(),1),QsA=F1(PQ0(),1);function ZsA(A){return A?.name===\"CredentialsProviderError\"}function DsA(A){if(!A||typeof A!==\"object\")return!1;let B=A;if(!B.Credentials||typeof B.Credentials!==\"object\")return!1;let Q=B.Credentials;return typeof Q.AccessKeyId===\"string\"&&typeof Q.SecretAccessKey===\"string\"&&typeof Q.SessionToken===\"string\"&&Q.AccessKeyId.length>0&&Q.SecretAccessKey.length>0&&Q.SessionToken.length>0}var SQ0=async()=>{await new A$1.STSClient().send(new A$1.GetCallerIdentityCommand({}))};async function GsA(){try{F0(\"Clearing AWS credential provider cache\"),await QsA.fromIni({ignoreCache:!0})(),F0(\"AWS credential provider cache refreshed\")}catch(A){F0(\"Failed to clear AWS credential cache (this is expected if no credentials are configured)\")}}import{exec as MB4}from\"child_process\";var RB4=300000;function mz(){let A=process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX,Q=(W9()||{}).apiKeyHelper,Z=process.env.ANTHROPIC_AUTH_TOKEN||Q,{source:D}=ZX(Ql());return!(A||Z||(D===\"ANTHROPIC_API_KEY\"||D===\"apiKeyHelper\"))}function Vg(){if(process.env.ANTHROPIC_AUTH_TOKEN)return{source:\"ANTHROPIC_AUTH_TOKEN\",hasToken:!0};if(process.env.CLAUDE_CODE_OAUTH_TOKEN)return{source:\"CLAUDE_CODE_OAUTH_TOKEN\",hasToken:!0};if(Kg())return{source:\"apiKeyHelper\",hasToken:!0};let B=IZ();if(cy(B?.scopes)&&B?.accessToken)return{source:\"claude.ai\",hasToken:!0};return{source:\"none\",hasToken:!1}}function SY(A){let{key:B}=ZX(A);return B}function ZX(A){if(A&&process.env.ANTHROPIC_API_KEY)return{key:process.env.ANTHROPIC_API_KEY,source:\"ANTHROPIC_API_KEY\"};if(dQ(!1)){if(!process.env.ANTHROPIC_API_KEY&&!process.env.CLAUDE_CODE_OAUTH_TOKEN)throw new Error(\"ANTHROPIC_API_KEY or CLAUDE_CODE_OAUTH_TOKEN env var is required\");if(process.env.ANTHROPIC_API_KEY)return{key:process.env.ANTHROPIC_API_KEY,source:\"ANTHROPIC_API_KEY\"};return{key:null,source:\"none\"}}if(process.env.ANTHROPIC_API_KEY&&E0().customApiKeyResponses?.approved?.includes($C(process.env.ANTHROPIC_API_KEY)))return{key:process.env.ANTHROPIC_API_KEY,source:\"ANTHROPIC_API_KEY\"};let B=Kg();if(B)return{key:B,source:\"apiKeyHelper\"};let Q=l41();if(Q)return Q;return{key:null,source:\"none\"}}function OB4(){let A=process.env.CLAUDE_CODE_API_KEY_HELPER_TTL_MS;if(A){let B=parseInt(A,10);if(!Number.isNaN(B)&&B>=0)return B;N2(`Found CLAUDE_CODE_API_KEY_HELPER_TTL_MS env var, but it was not a valid number. Got ${A}`)}return RB4}var Kg=Qo1(()=>{let B=(W9()||{}).apiKeyHelper;if(!B)return null;try{let Q=FZ(B)?.toString().trim();if(!Q)throw new Error(\"apiKeyHelper did not return a valid value\");return Q}catch(Q){let Z=A0.red(\"Error getting API key from apiKeyHelper (in settings or ~/.claude.json):\");if(Q instanceof Error&&\"stderr\"in Q)console.error(Z,String(Q.stderr));else if(Q instanceof Error)console.error(Z,Q.message);else console.error(Z,Q);return\" \"}},OB4());function IsA(){Kg.cache.clear()}var TB4=3600000;async function PB4(){let A=W9()?.awsAuthRefresh;if(!A)return!1;try{return F0(\"Fetching AWS caller identity for AWS auth refresh command\"),await SQ0(),F0(\"Fetched AWS caller identity, skipping AWS auth refresh command\"),!1}catch{return F0(\"Running AWS auth refresh command\"),new Promise((B)=>{let Q=MB4(A);Q.stdout.on(\"data\",(Z)=>{console.log(Z)}),Q.stderr.on(\"data\",(Z)=>{console.error(Z)}),Q.on(\"close\",(Z)=>{if(Z===0)F0(\"AWS auth refresh completed successfully\"),B(!0);else{let D=A0.red(\"Error running awsAuthRefresh (in settings or ~/.claude.json):\");console.error(D),B(!1)}})})}}async function SB4(){let A=W9()?.awsCredentialExport;if(!A)return null;try{return F0(\"Fetching AWS caller identity for credential export command\"),await SQ0(),F0(\"Fetched AWS caller identity, skipping AWS credential export command\"),null}catch{try{F0(\"Running AWS credential export command\");let B=FZ(A)?.toString().trim();if(!B)throw new Error(\"awsCredentialExport did not return a valid value\");let Q=JSON.parse(B);if(!DsA(Q))throw new Error(\"awsCredentialExport did not return valid AWS STS output structure\");return F0(\"AWS credentials retrieved from awsCredentialExport\"),{accessKeyId:Q.Credentials.AccessKeyId,secretAccessKey:Q.Credentials.SecretAccessKey,sessionToken:Q.Credentials.SessionToken}}catch(B){let Q=A0.red(\"Error getting AWS credentials from awsCredentialExport (in settings or ~/.claude.json):\");if(B instanceof Error&&\"stderr\"in B)console.error(Q,String(B.stderr));else if(B instanceof Error)console.error(Q,B.message);else console.error(Q,B);return null}}}var c41=Qo1(async()=>{let A=await PB4(),B=await SB4();if(A||B)await GsA();return B},TB4);function YsA(){c41.cache.clear()}function $C(A){return A.slice(-20)}var l41=OA(()=>{if(process.platform===\"darwin\"){let B=AQ1();try{let Q=FZ(`security find-generic-password -a $USER -w -s \"${B}\"`);if(Q)return{key:Q,source:\"/login managed key\"}}catch(Q){O1(Q)}}let A=E0();if(!A.primaryApiKey)return null;return{key:A.primaryApiKey,source:\"/login managed key\"}});function jB4(A){return/^[a-zA-Z0-9-_]+$/.test(A)}function HWA(A){if(!jB4(A))throw new Error(\"Invalid API key format. API key must contain only alphanumeric characters, dashes, and underscores.\");let B=E0();if(XsA(),process.platform===\"darwin\")try{let Z=AQ1();FZ(`security add-generic-password -a $USER -s \"${Z}\" -w ${A}`)}catch(Z){O1(Z),B.primaryApiKey=A}else B.primaryApiKey=A;if(!B.customApiKeyResponses)B.customApiKeyResponses={approved:[],rejected:[]};if(!B.customApiKeyResponses.approved)B.customApiKeyResponses.approved=[];let Q=$C(A);if(!B.customApiKeyResponses.approved.includes(Q))B.customApiKeyResponses.approved.push(Q);pA(B),l41.cache.clear?.()}function WsA(A){let B=E0(),Q=$C(A);return B.customApiKeyResponses?.approved?.includes(Q)??!1}function JsA(){XsA();let A=E0();A.primaryApiKey=void 0,pA(A),l41.cache.clear?.()}function XsA(){if(process.platform===\"darwin\")try{let A=AQ1();FZ(`security delete-generic-password -a $USER -s \"${A}\"`)}catch(A){O1(A)}}function p41(A){if(!cy(A.scopes))return{success:!0};if(!A.refreshToken||!A.expiresAt)return{success:!0};try{let B=GC(),Q=B.read()||{};Q.claudeAiOauth={accessToken:A.accessToken,refreshToken:A.refreshToken,expiresAt:A.expiresAt,scopes:A.scopes,subscriptionType:A.subscriptionType};let Z=B.update(Q);return IZ.cache?.clear?.(),RV.cache?.clear?.(),Z}catch(B){return O1(B),{success:!1,warning:\"Failed to save OAuth tokens\"}}}var IZ=OA(()=>{if(process.env.CLAUDE_CODE_OAUTH_TOKEN)return{accessToken:process.env.CLAUDE_CODE_OAUTH_TOKEN,refreshToken:null,expiresAt:null,scopes:[\"user:inference\"],subscriptionType:null};try{let Q=GC().read()?.claudeAiOauth;if(!Q?.accessToken)return null;if(!Q.subscriptionType){let Z=Q.isMax===!1?\"pro\":\"max\";return{...Q,subscriptionType:Z}}return Q}catch(A){return O1(A),null}});async function na(A=0){let Q=IZ();if(!Q?.refreshToken||!aC1(Q.expiresAt))return!1;if(IZ.cache?.clear?.(),Q=IZ(),!Q?.refreshToken||!aC1(Q.expiresAt))return!1;let Z=YQ();k1().mkdirSync(Z);let G;try{G=await FsA.lock(Z)}catch(F){if(F.code===\"ELOCKED\"){if(A<5)return await new Promise((I)=>setTimeout(I,1000+Math.random()*1000)),na(A+1);return!1}return O1(F),!1}try{if(IZ.cache?.clear?.(),Q=IZ(),!Q?.refreshToken||!aC1(Q.expiresAt))return!1;let F=await VWA(Q.refreshToken);return p41({...F,scopes:Q.scopes}),IZ.cache?.clear?.(),!0}catch(F){return O1(F instanceof Error?F:new Error(String(F))),!1}finally{await G()}}function Q9(){if(!mz())return!1;return cy(IZ()?.scopes)}function VsA(){if(process.env.CLAUDE_CODE_USE_BEDROCK===\"true\"||process.env.CLAUDE_CODE_USE_VERTEX===\"true\")return!1;if(Q9())return!1;return!0}function pY(){let A=CsA();return A===\"max\"||A===\"enterprise\"||A===\"team\"}function KsA(){return pY()}function CsA(){if(!mz())return null;let A=IZ();if(!A)return null;return A.subscriptionType??null}function B$1(){switch(CsA()){case\"enterprise\":return\"Claude Enterprise\";case\"team\":return\"Claude Team\";case\"max\":return\"Claude Max\";case\"pro\":return\"Claude Pro\";default:return\"Claude API\"}}function aa(){return!!(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX)}function HsA(){let B=W9()?.otelHeadersHelper;if(!B)return{};try{let Q=FZ(B)?.toString().trim();if(!Q)throw new Error(\"otelHeadersHelper did not return a valid value\");let Z=JSON.parse(Q);if(typeof Z!==\"object\"||Z===null||Array.isArray(Z))throw new Error(\"otelHeadersHelper must return a JSON object with string key-value pairs\");for(let[D,G]of Object.entries(Z))if(typeof G!==\"string\")throw new Error(`otelHeadersHelper returned non-string value for key \"${D}\": ${typeof G}`);return Z}catch(Q){throw O1(new Error(`Error getting OpenTelemetry headers from otelHeadersHelper (in settings): ${Q instanceof Error?Q.message:String(Q)}`)),Q}}function yB4(A){let B=mZ();if(B===\"bedrock\")return!1;else if(B===\"firstParty\")return!A.includes(\"claude-3-\");else return A.includes(\"claude-opus-4\")||A.includes(\"claude-sonnet-4\")}var RV=OA((A)=>{let B=[],Q=A.includes(\"haiku\");if(!Q)B.push(qo0);if(Q9())B.push(wp);if(!dQ(process.env.DISABLE_INTERLEAVED_THINKING)&&yB4(A))B.push(hV1);if(mZ()===\"firstParty\"&&!dQ(process.env.CLAUDE_CODE_DISABLE_FINE_GRAINED_TOOL_STREAMING))B.push(No0);if(dQ(process.env.USE_API_CONTEXT_MANAGEMENT),process.env.ANTHROPIC_BETAS&&!Q)B.push(...process.env.ANTHROPIC_BETAS.split(\",\").map((D)=>D.trim()).filter(Boolean));return B});var Cg={firstParty:\"claude-3-7-sonnet-20250219\",bedrock:\"us.anthropic.claude-3-7-sonnet-20250219-v1:0\",vertex:\"claude-3-7-sonnet@20250219\"},Hg={firstParty:\"claude-3-5-sonnet-20241022\",bedrock:\"anthropic.claude-3-5-sonnet-20241022-v2:0\",vertex:\"claude-3-5-sonnet-v2@20241022\"},i41={firstParty:\"claude-3-5-haiku-20241022\",bedrock:\"us.anthropic.claude-3-5-haiku-20241022-v1:0\",vertex:\"claude-3-5-haiku@20241022\"},bw={firstParty:\"claude-sonnet-4-20250514\",bedrock:\"us.anthropic.claude-sonnet-4-20250514-v1:0\",vertex:\"claude-sonnet-4@20250514\"};var ST={firstParty:\"claude-opus-4-20250514\",bedrock:\"us.anthropic.claude-opus-4-20250514-v1:0\",vertex:\"claude-opus-4@20250514\"},jT={firstParty:\"claude-opus-4-1-20250805\",bedrock:\"us.anthropic.claude-opus-4-1-20250805-v1:0\",vertex:\"claude-opus-4-1@20250805\"};function zsA(A){let B=A.toLowerCase();if(B.includes(\"claude-sonnet-4\"))return\"Sonnet 4\";if(B.includes(\"claude-opus-4-1\"))return\"Opus 4.1\";if(B.includes(\"claude-opus-4\"))return\"Opus 4\";if(B.includes(\"claude-3-7-sonnet\"))return\"Claude 3.7 Sonnet\";if(B.includes(\"claude-3-5-sonnet\"))return\"Claude 3.5 Sonnet\";if(B.includes(\"claude-3-5-haiku\"))return\"Claude 3.5 Haiku\";return}var vM1=F1(P42(),1);var pw2=F1($70(),1),iw2=F1(_3(),1);var _M1=F1(N70(),1);var xM1=F1(pD0(),1);import{Agent as Rl4}from\"https\";var mw2=F1(pD0(),1);var GP=OA(()=>{let A={};if(process.env.CLAUDE_CODE_CLIENT_CERT)try{A.cert=k1().readFileSync(process.env.CLAUDE_CODE_CLIENT_CERT,{encoding:\"utf8\"}),F0(\"mTLS: Loaded client certificate from CLAUDE_CODE_CLIENT_CERT\")}catch(B){N2(`mTLS: Failed to load client certificate: ${B}`)}if(process.env.CLAUDE_CODE_CLIENT_KEY)try{A.key=k1().readFileSync(process.env.CLAUDE_CODE_CLIENT_KEY,{encoding:\"utf8\"}),F0(\"mTLS: Loaded client key from CLAUDE_CODE_CLIENT_KEY\")}catch(B){N2(`mTLS: Failed to load client key: ${B}`)}if(process.env.CLAUDE_CODE_CLIENT_KEY_PASSPHRASE)A.passphrase=process.env.CLAUDE_CODE_CLIENT_KEY_PASSPHRASE,F0(\"mTLS: Using client key passphrase\");if(Object.keys(A).length===0)return;return A}),dw2=OA(()=>{let A=GP();if(!A)return;let B={...A,keepAlive:!0};return F0(\"mTLS: Creating HTTPS agent with custom certificates\"),new Rl4(B)});function cw2(){let A=GP();if(!A)return;return{cert:A.cert,key:A.key,passphrase:A.passphrase}}function Au(){let A=GP();if(!A)return{};let B={cert:A.cert,key:A.key,passphrase:A.passphrase},Q=new mw2.Agent({connect:B,pipelining:1});return F0(\"mTLS: Created undici agent with custom certificates\"),{dispatcher:Q}}function lw2(){if(!GP())return;if(process.env.NODE_EXTRA_CA_CERTS)F0(\"NODE_EXTRA_CA_CERTS detected - Node.js will automatically append to built-in CAs\")}function Z51(){return process.env.https_proxy||process.env.HTTPS_PROXY||process.env.http_proxy||process.env.HTTP_PROXY}var nw2=OA((A)=>{let B=GP(),Q={uri:A,pipelining:1};if(B)Q.requestTls={cert:B.cert,key:B.key,passphrase:B.passphrase};return new xM1.default.ProxyAgent(Q)});function aw2(){let A=Z51(),B=Au();if(A)return{dispatcher:nw2(A)};return B}function sw2(){let A=Z51(),B=dw2(),Q=GP();if(A){if(x9.defaults.proxy=!1,Q)x9.defaults.httpsAgent=new _M1.default.HttpsProxyAgent(A,{cert:Q.cert,key:Q.key,passphrase:Q.passphrase});else x9.defaults.httpsAgent=new _M1.default.HttpsProxyAgent(A);xM1.default.setGlobalDispatcher(nw2(A))}else if(B){x9.defaults.httpsAgent=B;let Z=Au();if(Z.dispatcher)xM1.default.setGlobalDispatcher(Z.dispatcher)}}function rw2(){let A=Z51();if(!A)return{};let B=new _M1.default.HttpsProxyAgent(A),Q=new iw2.NodeHttpHandler({httpAgent:B,httpsAgent:B});return{requestHandler:Q,credentials:pw2.defaultProvider({clientConfig:{requestHandler:Q}})}}var ow2=OA(async function(){let A=Ep(),B=await c41(),Q={region:A,...rw2()};if(B)Q.credentials={accessKeyId:B.accessKeyId,secretAccessKey:B.secretAccessKey,sessionToken:B.sessionToken};let Z=new vM1.BedrockClient(Q),D=new vM1.ListInferenceProfilesCommand;try{return((await Z.send(D)).inferenceProfileSummaries||[]).filter((W)=>W.inferenceProfileId?.includes(\"anthropic\")).map((W)=>W.inferenceProfileId).filter(Boolean)}catch(G){throw O1(G),G}});function Bu(A,B){return A.find((Q)=>Q.includes(B))??null}function bM1(A){let B=[],Q=!1;async function Z(){if(Q)return;if(B.length===0)return;Q=!0;while(B.length>0){let{args:D,resolve:G,reject:F,context:I}=B.shift();try{let Y=await A.apply(I,D);G(Y)}catch(Y){F(Y)}}if(Q=!1,B.length>0)Z()}return function(...D){return new Promise((G,F)=>{B.push({args:D,resolve:G,reject:F,context:this}),Z()})}}function fM1(A){return{haiku35:i41[A],sonnet35:Hg[A],sonnet37:Cg[A],sonnet40:bw[A],opus40:ST[A],opus41:jT[A]}}async function Ol4(){let A;try{A=await ow2()}catch(I){return O1(I),fM1(\"bedrock\")}if(!A?.length)return fM1(\"bedrock\");let B=Bu(A,\"claude-3-5-haiku-20241022\"),Q=Bu(A,\"claude-3-5-sonnet-20241022\"),Z=Bu(A,\"claude-3-7-sonnet-20250219\"),D=Bu(A,\"claude-sonnet-4-20250514\"),G=Bu(A,\"claude-opus-4-20250514\"),F=Bu(A,\"claude-opus-4-1-20250805\");return{haiku35:B||i41.bedrock,sonnet35:Q||Hg.bedrock,sonnet37:Z||Cg.bedrock,sonnet40:D||bw.bedrock,opus40:G||ST.bedrock,opus41:F||jT.bedrock}}var Tl4=bM1(async()=>{if(HW1()!==null)return;try{let A=await Ol4();cu1(A)}catch(A){O1(A)}});function Pl4(){if(HW1()!==null)return;if(mZ()!==\"bedrock\"){cu1(fM1(mZ()));return}Tl4()}function wI(){let A=HW1();if(A===null)return Pl4(),fM1(mZ());return A}var tw2=[\"sonnet\",\"opus\",\"haiku\",...[]],Sl4=bw,ew2=Sl4.firstParty,D51=[...tw2,\"inherit\"],nD0=\"sonnet\";function Zu(){return process.env.ANTHROPIC_SMALL_FAST_MODEL||wI().haiku35}function Go(A){return A===wI().opus40||A===wI().opus41}function Fo(){let A,B=A21();if(B!==void 0)A=B;else{let Q=W9()||{};A=process.env.ANTHROPIC_MODEL||Q.model||void 0}if(Q9()&&!pY()&&A?.includes(\"opus\"))return;return A}function WG(){let A=Fo();if(A!==void 0&&A!==null)return N_(A);if(A===null&&Al())return FP();return G51()}function A$2(){if(mZ()===\"bedrock\")return wI().sonnet37;return wI().sonnet40}function hM1(A){let{permissionMode:B,mainLoopModel:Q}=A;return Q}var Qq5=OA(()=>{return null});function G51(A={}){let{forDisplay:B=!1}=A;if(pY())return wI().opus41;return A$2()}function FP(){return A$2()}function tw(A){if(A.includes(\"claude-opus-4-1\"))return\"claude-opus-4-1\";if(A.includes(\"claude-opus-4\"))return\"claude-opus-4\";let B=A.match(/(claude-(\\d+-\\d+-)?\\w+)/);if(B&&B[1])return B[1];return A}function gM1(){if(Q9()&&!pY())return uM1.description;let A=E0().fallbackAvailableWarningThreshold;if(A===void 0)return\"Use Opus 4.1 or Sonnet 4 based on Max usage limits\";return`Opus 4.1 for up to ${(A*100).toFixed(0)}% of usage limits, then use Sonnet 4`}function IP(A){if(A===wI().opus41)return\"Opus 4.1\";if(A===wI().opus40)return\"Opus 4\";if(A===wI().sonnet40)return\"Sonnet 4\";if(A===wI().sonnet37)return\"Sonnet 3.7\";if(A===wI().sonnet35)return\"Sonnet 3.5\";if(A===wI().haiku35)return\"Haiku 3.5\";return A}function Qu(){if(Q9()&&!pY())return{value:null,label:\"Sonnet\",description:uM1.description};if(pY())return{value:null,label:\"Default (recommended)\",description:gM1()};return{value:null,label:\"Default (recommended)\",description:`Use the default model (currently ${IP(G51({forDisplay:!0}))}) · $3/$15 per Mtok`}}var B$2={value:\"sonnet\",label:\"Sonnet\",description:\"Sonnet 4 for daily use · $3/$15 per Mtok\"};var iD0={value:\"opus\",label:\"Opus\",description:\"Opus 4.1 for complex tasks · $15/$75 per Mtok\"},jl4={value:\"opus\",label:\"Opus\",description:\"Opus 4.1 for complex tasks · Reaches usage limits faster\"},uM1={value:\"sonnet\",label:\"Sonnet\",description:\"Sonnet 4 for daily use\"};function yl4(){if(Q9()&&!pY())return[Qu()];if(pY())return[Qu(),jl4,uM1];if(mZ()===\"bedrock\")return[Qu(),B$2,iD0];return[Qu(),iD0]}function Q$2(){let A=yl4(),B=null,Q=Fo(),Z=CW1();if(Q!==void 0&&Q!==null)B=Q;else if(Z!==null)B=Z;if(B===null||A.some((D)=>D.value===B))return A;if(Z$2(B))A.push(B===\"sonnet\"?B$2:iD0);else A.push({value:B,label:B,description:\"Custom model\"});return A}function Z$2(A){return tw2.includes(A)}function N_(A){let B=A.toLowerCase().trim();if(Z$2(B))switch(B){case\"sonnet\":return wI().sonnet40;case\"opus\":return wI().opus41;case\"haiku\":return wI().haiku35}return B}function Du(A){if(A===null){if(Q9()&&!pY())return`Sonnet (${uM1.description})`;else if(Q9())return`Default (${gM1()})`;return`Default (${G51({forDisplay:!0})})`}let B=N_(A);return A===B?B:`${A} (${B})`}function D$2(A){return A}function G$2(A,B){if(process.env.CLAUDE_CODE_SUBAGENT_MODEL)return process.env.CLAUDE_CODE_SUBAGENT_MODEL;if(!A)return N_(nD0);return A===\"inherit\"?B:N_(A)}function mM1(A){if(!A)return\"Sonnet (default)\";if(A===\"inherit\")return\"Inherit from parent\";return A.charAt(0).toUpperCase()+A.slice(1)}function F$2(){let A=[{value:\"sonnet\",label:\"Sonnet\",description:\"Balanced performance - best for most agents\"}];if(!(Q9()&&!pY()))A.push({value:\"opus\",label:\"Opus\",description:\"Most capable for complex reasoning tasks\"});return A.push({value:\"haiku\",label:\"Haiku\",description:\"Fast and efficient for simple tasks\"},{value:\"inherit\",label:\"Inherit from parent\",description:\"Use the same model as the main conversation\"}),A}var I$2={},Gu=null,Y$2=OA(()=>{if(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX||process.env.DISABLE_TELEMETRY||process.env.CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC)return null;let A=hl(),B={networkConfig:{api:\"https://statsig.anthropic.com/v1/\"},environment:{tier:[\"test\",\"dev\"].includes(\"production\")?\"development\":\"production\"},includeCurrentPageUrlWithEvents:!1,logLevel:dM1.LogLevel.None,storageProvider:new Li1,customUserCacheKeyFunc:(Z,D)=>{return kl4(\"sha1\").update(Z).update(D.userID||\"\").digest(\"hex\").slice(0,10)}};Gu=new dM1.StatsigClient(rl0,A,B),Gu.on(\"error\",()=>{x9.head(\"https://api.anthropic.com/api/hello\").catch(()=>{})});let Q=Gu.initializeAsync().then(()=>{});return process.on(\"beforeExit\",async()=>{await Gu?.flush()}),process.on(\"exit\",()=>{Gu?.flush()}),{client:Gu,initialized:Q}}),Fu=OA(async()=>{let A=Y$2();if(!A)return null;return await A.initialized,A.client});function W$2(){Gu=null,Y$2.cache?.clear?.(),Fu.cache?.clear?.(),xl4.cache?.clear?.(),gV.cache?.clear?.()}async function _l4(A,B){if(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX||process.env.DISABLE_TELEMETRY||process.env.CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC)return;try{let Q=B.model?String(B.model):WG(),Z=RV(Q),[D,G,F]=await Promise.all([Fu(),MA.getPackageManagers(),MA.getRuntimes()]);if(!D)return;let I={...B,model:Q,sessionId:NB(),userType:\"external\",...Z.length>0?{betas:Z.join(\",\")}:{},env:JSON.stringify({platform:MA.platform,nodeVersion:MA.nodeVersion,terminal:MA.terminal,packageManagers:G.join(\",\"),runtimes:F.join(\",\"),isRunningWithBun:MA.isRunningWithBun(),isCi:dQ(!1),isClaubbit:process.env.CLAUBBIT===\"true\",isGithubAction:process.env.GITHUB_ACTIONS===\"true\",isClaudeCodeAction:process.env.CLAUDE_CODE_ACTION===\"1\"||process.env.CLAUDE_CODE_ACTION===\"true\",isClaudeAiAuth:Q9(),version:{ISSUES_EXPLAINER:\"report the issue at https://github.com/anthropics/claude-code/issues\",PACKAGE_URL:\"@anthropic-ai/claude-code\",README_URL:\"https://docs.anthropic.com/s/claude-code\",VERSION:\"1.0.73\"}.VERSION,...process.env.GITHUB_ACTIONS===\"true\"&&{githubEventName:process.env.GITHUB_EVENT_NAME,githubActionsRunnerEnvironment:process.env.RUNNER_ENVIRONMENT,githubActionsRunnerOs:process.env.RUNNER_OS},...vB1()&&{wslVersion:vB1()}}),entrypoint:process.env.CLAUDE_CODE_ENTRYPOINT,isInteractive:String(nj0()),clientType:sj0(),...void 0,sweBenchRunId:process.env.SWE_BENCH_RUN_ID||\"\",sweBenchInstanceId:process.env.SWE_BENCH_INSTANCE_ID||\"\",sweBenchTaskId:process.env.SWE_BENCH_TASK_ID||\"\"},Y={eventName:A,metadata:I};D.logEvent(Y),await D.flush()}catch(Q){}}function K1(A,B){_l4(A,B)}var gV=OA(async(A)=>{if(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX||process.env.DISABLE_TELEMETRY||process.env.CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC)return!1;let B=await Fu();if(!B)return!1;let Q=B.checkGate(A);return I$2[A]=Q,Q});var cM1=(A,B)=>{let[Q,Z]=aD0.default.useState(B);return aD0.default.useEffect(()=>{ew(A,B).then(Z)},[A,B]),Q};function J$2(){return{...I$2}}var xl4=OA(async(A,B)=>{if(process.env.CLAUDE_CODE_USE_BEDROCK||process.env.CLAUDE_CODE_USE_VERTEX||process.env.DISABLE_TELEMETRY||process.env.CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC)return B;let Q=await Fu();if(!Q)return B;let Z=Q.getExperiment(A);if(Object.keys(Z.value).length===0)return B;return Z.value});async function ew(A,B){if(process.env.CLAUDE_CODE_USE_Bnode:fs:574\n  return binding.open(\n                 ^\n\nError: EACCES: permission denied, open '/root/.claude.json'\n    at Module.openSync (node:fs:574:18)\n    at Object.writeFileSync (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:689:9320)\n    at uN (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:748:967)\n    at R$2 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:756:2376)\n    at pA (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:756:1312)\n    at P$2 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:770:1138)\n    at file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:820:1164\n    at Q (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:677:13339)\n    at yR8 (file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:3361:10024)\n    at file:///usr/lib/node_modules/@anthropic-ai/claude-code/cli.js:3404:1373 {\n  errno: -13,\n  code: 'EACCES',\n  syscall: 'open',\n  path: '/root/.claude.json'\n}\n\nNode.js v20.19.4"
            }
          }
        },
        {
          "display": "im still getting \"failed to get response from Claude\"",
          "pastedContents": {}
        },
        {
          "display": "we should be able to select plan mode or edit mode... is that possible?",
          "pastedContents": {}
        },
        {
          "display": "it doesnt need to be TUI. As long as i can manage the claude",
          "pastedContents": {}
        },
        {
          "display": "nestogy:claude 🤖 test\n🤖 Starting Claude TUI session...\n❌ Failed to start Claude: Unexpected non-whitespace character after JSON at position 107 (line 1 column 108)\nnestogy:claude 🤖 ",
          "pastedContents": {}
        },
        {
          "display": "I want to be able to use the claude command, which is an interactive TUI app",
          "pastedContents": {}
        },
        {
          "display": "this is only for the admin to be able to interact with claude via the app itself. not all the users. it should only be in the admin console",
          "pastedContents": {}
        },
        {
          "display": "the claude cli app is already logged in",
          "pastedContents": {}
        },
        {
          "display": "no i really only want to use the claude code SDK",
          "pastedContents": {}
        },
        {
          "display": "i want to allow claude as a command",
          "pastedContents": {}
        },
        {
          "display": "we should include it with compose",
          "pastedContents": {}
        },
        {
          "display": "i want a more responsive console. what javascript options are available for this",
          "pastedContents": {}
        },
        {
          "display": "i dont see a console(terminal)",
          "pastedContents": {}
        },
        {
          "display": "it doesnt seem comprehensive enough. I want more javascript components for the service and produc creation",
          "pastedContents": {}
        },
        {
          "display": "does it work with services as well as products?",
          "pastedContents": {}
        },
        {
          "display": "finish the rest of the todos",
          "pastedContents": {}
        },
        {
          "display": "dont run tests",
          "pastedContents": {}
        },
        {
          "display": "[Pasted text #1 +77 lines]",
          "pastedContents": {
            "1": {
              "id": 1,
              "type": "text",
              "content": "Internal Server Error\n\nIlluminate\\Database\\QueryException\nSQLSTATE[42S22]: Column not found: 1054 Unknown column 'products.archived_at' in 'WHERE' (Connection: mysql, SQL: select count(*) as aggregate from `products` where `company_id` = 1 and `products`.`archived_at` is null)\nGET 129.212.186.114\nPHP 8.4.11 — Laravel 12.22.1\n\nExpand\nvendor frames\n10 vendor frames collapsed\n\napp/Domains/Product/Controllers/ProductController.php\n:59\nindex\n10 vendor frames collapsed\n\nApp\\Http\\Middleware\\RememberTokenMiddleware\n:38\nhandle\n47 vendor frames collapsed\n\npublic/index.php\n:20\napp/Domains/Product/Controllers/ProductController.php :59\n        // Apply sorting\n        $sortBy = $request->get('sort_by', 'name');\n        $sortOrder = $request->get('sort_order', 'asc');\n        $query->orderBy($sortBy, $sortOrder);\n \n        $products = $query->paginate(20)->appends($request->query());\n \n        $categories = Category::where('company_id', auth()->user()->company_id)\n            ->orderBy('name')\n            ->get();\n \n        return view('products.index', compact('products', 'categories'));\n    }\n \n    public function show(Product $product)\n    {\n        $this->authorize('view', $product);\nRequest\nGET /products\nHeaders\nhost\n129.212.186.114\nconnection\nkeep-alive\nupgrade-insecure-requests\n1\nuser-agent\nMozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0\naccept\ntext/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\nreferer\nhttp://129.212.186.114/products/create\naccept-encoding\ngzip, deflate\naccept-language\nen-US,en;q=0.9\ncookie\n__stripe_mid=7b02b76c-322f-4759-a79d-9881f900027415bfe0; remember_web_59ba36addc2b2f9401580f014c7f58ea4e30989d=eyJpdiI6InZPSDhRcTg5eHF1NVpIVkhWZzFtTFE9PSIsInZhbHVlIjoiUndnU0plYUk0M2d6Y2dxUjdFcVJTOWFDU2d3ZXVFNG14RTZldzRmSzlyckFHa011bnQ0NTFOVzNvYjQvMlg5TVAwOWFRRHZtSXgzelVQSkY5VXFiVjdtWnRydWZmWGxINis1RFRRQlJLTTFIU1hvaWFQYnZkcWIxaDlNczVIMFEzNTBFNUxYdXNNckFRc0tXd29ESlhHbmNVREIyalJjOWJKblFiNXVEbnFrOEJtajVxSUs4cDlqbUxXMklTb3IvT09xOXRHbUpkelFOSy9uelhNM1dqUWZQVzZTNU1sM1hIakMycEN0M0doRT0iLCJtYWMiOiJlODUxZjgyYzc5MzlhYzQ1MThlM2QwYzU4ZDZmMTZkMWNjY2VlMjY3OTdlOTc3YmQ1MTg5MjU1ZGYyNGRiYjljIiwidGFnIjoiIn0%3D; XSRF-TOKEN=eyJpdiI6InhvVWdxVjI5KzdITUlqWTM1Qi9UVEE9PSIsInZhbHVlIjoiejRkMDE2VUQvd3Rza1RwRUcwbVdvTVBaSUNQbkFmWDRtaCtCSjdGbm5jcmlEZkZ6aUhyOEtBbEx4djNmUzhqSWtRK1pZdlVFM1ZNUnNLWFpacnUrVC9tNTc0NWlycllYbGRYOXZuN2VJRkdDVzFPU3ZjajJTenFIb3BmRUJDOUsiLCJtYWMiOiIxOTIyZDVjYWJkYzQwZjVhMjg2MzI3OTQzNjZhNTlkMThjMzAzNTBjODYzOGQ1ZTk3MDczOGEwY2E0Y2NhYzc4IiwidGFnIjoiIn0%3D; laravel_session=eyJpdiI6ImMwZDk0ZXIvbkNoQ3p6YWllcERnN1E9PSIsInZhbHVlIjoiWFpRdGRXZkRFSmlRNjUrSUc4Y2dQcmZKQWJLblJaVWFxelNvcThHZU5uZlN1RW5LRVR0T0s3VzVVQ0x0VTZKbk0zaVliTHljQmxZK2JXU3o5K2xrMWt0SW1yc25ZZEx0TTgyUTRBU1ZlYkV6SGEwYlRGd0NUNXE4OGgvUytnTDQiLCJtYWMiOiI2OTBkNzY4NmM0YzFiNzY5NmZmNzhhNzc3MjQyMjg5ZGY3YTcyZWU2MTMzYmE4ZjRiZTRiODQwYTc2YTg2YzI0IiwidGFnIjoiIn0%3D\nBody\nNo body data\nApplication\nRouting\ncontroller\nApp\\Domains\\Product\\Controllers\\ProductController@index\nroute name\nproducts.index\nmiddleware\nweb, auth, verified\nDatabase Queries\nmysql (1.25 ms)\nselect * from `sessions` where `id` = 'ujVwXrLgZur10fS7wGnWNxt5VAW4ftor7jwuvMDi' limit 1\nmysql (0.48 ms)\nselect * from `users` where `id` = 1 and `users`.`archived_at` is null limit 1\n"
            }
          }
        },
        {
          "display": "all one phase please, but looks good.",
          "pastedContents": {}
        },
        {
          "display": "if the user is id = 1, i want to include a console(terminal) aswell.",
          "pastedContents": {}
        },
        {
          "display": "we still need those though... imlpement them, and the others if they make sense. Compact first.",
          "pastedContents": {}
        },
        {
          "display": "[Pasted text #1 +156 lines]",
          "pastedContents": {
            "1": {
              "id": 1,
              "type": "text",
              "content": "Internal Server Error\n\nSymfony\\Component\\Routing\\Exception\\RouteNotFoundException\nRoute [settings.accounting] not defined.\nGET 129.212.186.114\nPHP 8.4.11 — Laravel 12.22.1\n\nExpand\nvendor frames\n2 vendor frames collapsed\n\nresources/views/settings/partials/navigation.blade.php\n:42\nrequire\n7 vendor frames collapsed\n\nresources/views/settings/general.blade.php\n:39\nrequire\n17 vendor frames collapsed\n\nApp\\Http\\Middleware\\RememberTokenMiddleware\n:38\nhandle\n47 vendor frames collapsed\n\npublic/index.php\n:20\nresources/views/settings/partials/navigation.blade.php :42\n                   href=\"{{ route('settings.billing-financial') }}\">\n                    <i class=\"fas fa-dollar-sign me-2\"></i> Billing & Financial\n                </a>\n                \n                <a class=\"nav-link {{ request()->routeIs('settings.accounting') ? 'active' : '' }}\" \n                   href=\"{{ route('settings.accounting') }}\">\n                    <i class=\"fas fa-calculator me-2\"></i> Accounting Integration\n                </a>\n                \n                <a class=\"nav-link {{ request()->routeIs('settings.payment-gateways') ? 'active' : '' }}\" \n                   href=\"{{ route('settings.payment-gateways') }}\">\n                    <i class=\"fas fa-credit-card me-2\"></i> Payment Gateways\n                </a>\n            </div>\n \n            <!-- Service Delivery -->\n            <div class=\"nav-section\">\nRequest\nGET /settings\nHeaders\nhost\n129.212.186.114\nconnection\nkeep-alive\nupgrade-insecure-requests\n1\nuser-agent\nMozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0\naccept\ntext/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\nreferer\nhttp://129.212.186.114/dashboard\naccept-encoding\ngzip, deflate\naccept-language\nen-US,en;q=0.9\ncookie\n__stripe_mid=7b02b76c-322f-4759-a79d-9881f900027415bfe0; remember_web_59ba36addc2b2f9401580f014c7f58ea4e30989d=eyJpdiI6InZPSDhRcTg5eHF1NVpIVkhWZzFtTFE9PSIsInZhbHVlIjoiUndnU0plYUk0M2d6Y2dxUjdFcVJTOWFDU2d3ZXVFNG14RTZldzRmSzlyckFHa011bnQ0NTFOVzNvYjQvMlg5TVAwOWFRRHZtSXgzelVQSkY5VXFiVjdtWnRydWZmWGxINis1RFRRQlJLTTFIU1hvaWFQYnZkcWIxaDlNczVIMFEzNTBFNUxYdXNNckFRc0tXd29ESlhHbmNVREIyalJjOWJKblFiNXVEbnFrOEJtajVxSUs4cDlqbUxXMklTb3IvT09xOXRHbUpkelFOSy9uelhNM1dqUWZQVzZTNU1sM1hIakMycEN0M0doRT0iLCJtYWMiOiJlODUxZjgyYzc5MzlhYzQ1MThlM2QwYzU4ZDZmMTZkMWNjY2VlMjY3OTdlOTc3YmQ1MTg5MjU1ZGYyNGRiYjljIiwidGFnIjoiIn0%3D; XSRF-TOKEN=eyJpdiI6IitEYjZlOTRDOXpFWUVEYlY4UlVsUVE9PSIsInZhbHVlIjoiV290bHdmM0tvL05TZGU4dE55SGt5T2Q1N3A1eHNZVTFwNlhQbTUzTndVaEVWbG5Ma3l2QXJuM2pJckRGekg3WnpQamtzckwwYVE4ei9VS1NjY0wvNFlyY2lLRkNPYVh5YVc2ZDNjTEIybEU5bjZaRE5HV3pEeHQ2ZThGUk4vZy8iLCJtYWMiOiI0YmUzMWEzY2Y1YzQxZjcxNTM3NGMzZTZjNDY3MGM2NDEyZTIyN2JhMGE0NTk3ZGIzYzUyODY0NTRhMzNiYWM2IiwidGFnIjoiIn0%3D; laravel_session=eyJpdiI6IjQ5d2huL2V0VXMvdjVOakQ1ejluNnc9PSIsInZhbHVlIjoicXVPSnZrcG9oc1h6U1UzQ2Y2ZUZUSFJ0S1ZTQnlwbHZ5Q1QycUpMN2xzNFpTWGNVdUs1VGYwazNBOVpoWTVBZDZaOHp5UFhuQTdyQ0EwNnhqc29QOUVXY2t4RHMyM2MxNkFKWmtzb0dDclpRdnRBRFpjMG5hcEtRekQ1WG50UFQiLCJtYWMiOiJiMjA3NDc2MDA2ODYyZjIwZWU1YTFkMTRkNjBiZDQ0ZDhkYjAxOWFiZTJiN2ViZjgwNmRhZTRkZmZmZjc3MDVjIiwidGFnIjoiIn0%3D\nBody\nNo body data\nApplication\nRouting\ncontroller\nApp\\Http\\Controllers\\SettingsController@index\nroute name\nsettings.index\nmiddleware\nweb, auth, verified\nDatabase Queries\nmysql (0.92 ms)\nselect * from `sessions` where `id` = 'ujVwXrLgZur10fS7wGnWNxt5VAW4ftor7jwuvMDi' limit 1\nmysql (0.18 ms)\nselect * from `users` where `id` = 1 and `users`.`archived_at` is null limit 1\nmysql (0.22 ms)\nselect * from `companies` where `companies`.`id` = 1 limit 1\nmysql (0.72 ms)\nselect * from `settings` where `settings`.`company_id` = 1 and `settings`.`company_id` is not null limit 1\n193ms\n6MB\n12.x\nGET settings\nstatus\n500 Internal Server Error\nfull_url\nhttp://129.212.186.114/settings\naction_name\nsettings.index\ncontroller_action\nApp\\Http\\Controllers\\SettingsController@index\nuri\nGET settings\ncontroller\nApp\\Http\\Controllers\\SettingsController@index\nprefix\n/settings\nfile\napp/Http/Controllers/SettingsController.php:32-35\nmiddleware\nweb, auth, verified\nduration\n200ms\npeak_memory\n8MB\nresponse\ntext/html; charset=UTF-8\nrequest_format\nhtml\nrequest_query\n[]\nrequest_request\n[]\nrequest_headers\narray:9 [▼\n  \"host\" => array:1 [▶]\n  \"connection\" => array:1 [▶]\n  \"upgrade-insecure-requests\" => array:1 [▶]\n  \"user-agent\" => array:1 [▶]\n  \"accept\" => array:1 [▶]\n  \"referer\" => array:1 [▶]\n  \"accept-encoding\" => array:1 [▶]\n  \"accept-language\" => array:1 [▶]\n  \"cookie\" => array:1 [▶]\n]\nrequest_cookies\narray:4 [▼\n  \"__stripe_mid\" => null\n  \"remember_web_59ba36addc2b2f9401580f014c7f58ea4e30989d\" => \"1|ukxrBUCzgfTvc4cZ4bsxI5ktKArmJBInozb4BuAWkGxSRI1ukDMAzNpsbinS|$2y$12$MRVW8GLYgApdVRu0YaN7KOB7QlqpYEMOvJnqFoLVeiPJ11e/e.7bm\"\n  \"XSRF-TOKEN\" => \"arCbuBcHTMt2vJJM3LKEbFoDd0ywfuTL1GKqCjN3\"\n  \"laravel_session\" => \"ujVwXrLgZur10fS7wGnWNxt5VAW4ftor7jwuvMDi\"\n]\nresponse_headers\narray:3 [▼\n  \"cache-control\" => array:1 [▶]\n  \"date\" => array:1 [▶]\n  \"content-type\" => array:1 [▶]\n]\nsession_attributes\narray:9 [▼\n  \"_token\" => \"arCbuBcHTMt2vJJM3LKEbFoDd0ywfuTL1GKqCjN3\"\n  \"url\" => []\n  \"_previous\" => array:1 [▶]\n  \"_flash\" => array:2 [▶]\n  \"login_web_59ba36addc2b2f9401580f014c7f58ea4e30989d\" => 1\n  \"current_workflow\" => \"default\"\n  \"company_id\" => 1\n  \"selected_client_id\" => 1\n  \"PHPDEBUGBAR_STACK_DATA\" => []\n]"
            }
          }
        },
        {
          "display": "[Pasted text #1 +72 lines]",
          "pastedContents": {
            "1": {
              "id": 1,
              "type": "text",
              "content": "403\nThis action is unauthorized.\n28.41ms\n3MB\n12.x\nGET products/create\nstatus\n403 Forbidden\nfull_url\nhttp://129.212.186.114/products/create\naction_name\nproducts.create\ncontroller_action\nApp\\Domains\\Product\\Controllers\\ProductController@create\nuri\nGET products/create\ncontroller\nApp\\Domains\\Product\\Controllers\\ProductController@create\nprefix\n/products\nfile\napp/Domains/Product/Controllers/ProductController.php:86-95\nmiddleware\nweb, auth, verified\nduration\n31.19ms\npeak_memory\n4MB\nresponse\ntext/html; charset=UTF-8\nrequest_format\nhtml\nrequest_query\n[]\nrequest_request\n[]\nrequest_headers\narray:9 [▼\n  \"host\" => array:1 [▶]\n  \"connection\" => array:1 [▶]\n  \"upgrade-insecure-requests\" => array:1 [▶]\n  \"user-agent\" => array:1 [▶]\n  \"accept\" => array:1 [▶]\n  \"referer\" => array:1 [▶]\n  \"accept-encoding\" => array:1 [▶]\n  \"accept-language\" => array:1 [▶]\n  \"cookie\" => array:1 [▶]\n]\nrequest_cookies\narray:4 [▼\n  \"__stripe_mid\" => null\n  \"remember_web_59ba36addc2b2f9401580f014c7f58ea4e30989d\" => \"1|ukxrBUCzgfTvc4cZ4bsxI5ktKArmJBInozb4BuAWkGxSRI1ukDMAzNpsbinS|$2y$12$MRVW8GLYgApdVRu0YaN7KOB7QlqpYEMOvJnqFoLVeiPJ11e/e.7bm\"\n  \"XSRF-TOKEN\" => \"arCbuBcHTMt2vJJM3LKEbFoDd0ywfuTL1GKqCjN3\"\n  \"laravel_session\" => \"ujVwXrLgZur10fS7wGnWNxt5VAW4ftor7jwuvMDi\"\n]\nresponse_headers\narray:3 [▼\n  \"cache-control\" => array:1 [▶]\n  \"date\" => array:1 [▶]\n  \"content-type\" => array:1 [▶]\n]\nsession_attributes\narray:9 [▼\n  \"_token\" => \"arCbuBcHTMt2vJJM3LKEbFoDd0ywfuTL1GKqCjN3\"\n  \"url\" => []\n  \"_previous\" => array:1 [▶]\n  \"_flash\" => array:2 [▶]\n  \"login_web_59ba36addc2b2f9401580f014c7f58ea4e30989d\" => 1\n  \"current_workflow\" => \"default\"\n  \"company_id\" => 1\n  \"selected_client_id\" => 1\n  \"PHPDEBUGBAR_STACK_DATA\" => []\n]"
            }
          }
        },
        {
          "display": "update the navigation menu",
          "pastedContents": {}
        },
        {
          "display": "we need pages to manage the products, and add it to the command",
          "pastedContents": {}
        },
        {
          "display": "that seems that its missimg a bunch. keep it comprehensive.",
          "pastedContents": {}
        },
        {
          "display": "but everything that you mentioned should be included.",
          "pastedContents": {}
        },
        {
          "display": "i just want one phase.",
          "pastedContents": {}
        },
        {
          "display": "can we make the settings much more comprehensive? plan out everthing that is needed, and refer to the documentation.",
          "pastedContents": {}
        },
        {
          "display": "/clear ",
          "pastedContents": {}
        },
        {
          "display": "dont test that way",
          "pastedContents": {}
        },
        {
          "display": "i dont think you finished\n",
          "pastedContents": {}
        },
        {
          "display": "i dont think you finished",
          "pastedContents": {}
        },
        {
          "display": "nope, im stil getting sample data. if there is 0, show me 0",
          "pastedContents": {}
        },
        {
          "display": "I dont want any sample data in the database!!!",
          "pastedContents": {}
        },
        {
          "display": "the charts are using sample data still",
          "pastedContents": {}
        },
        {
          "display": "the executive dashboard still shows 0 active clients[Pasted text #1 +91 lines]",
          "pastedContents": {
            "1": {
              "id": 1,
              "type": "text",
              "content": "FoleyBridge Solutions\n\nBu\nBurkhart Peterson\n🔥\nUrgent\nCritical items requiring immediate attention\n⚡\nToday\nScheduled tasks for today\n📋\nScheduled\nUpcoming work and appointments\n💰\nFinancial\nInvoices and payments\n\nSearch\nCtrl+/\n\nSystem Administrator\nExecutive Dashboard\nBurkhart Peterson • Monday, August 11, 2025 at 11:08 PM\n\n\nAuto Refresh On\n\n\nTotal Revenue\n$0\n↗ 0%\nvs last month\nMonthly Recurring\n$0\n↗ 0%\nvs last month\nActive Clients\n0\n↗ 0%\nvs last month\nOpen Tickets\n0\n↘ 0%\nvs last month\nRevenue Trends\nMonthly performance overview\n\nLive Data\nSupport Overview\nTicket status distribution\n\nReal-time\nAdd New Client\nCreate a new client profile and start managing their services\n\nGet Started\nCreate Invoice\nGenerate professional invoices and track payments\n\nCreate Now\nView Reports\nAccess detailed analytics and business intelligence reports\n\nExplore\n7\n\n#7 realtime?type=all (ajax) (04:07:52)\n54.88ms\n3MB\n12.x\nGET api/dashboard/realtime\n20 statements were executed18.28ms\nDatabaseSessionHandler.php#96nestogy11.85msselect * from `sessions` where `id` = 'ujVwXrLgZur10fS7wGnWNxt5VAW4ftor7jwuvMDi' limit 1\nEloquentUserProvider.php#58nestogy360μsselect * from `users` where `id` = 1 and `users`.`archived_at` is null limit 1\nDatabaseStore.php#130nestogy180μsselect * from `cache` where `key` in ('laravel-cache-voip_tax:rates')\nDatabaseStore.php#130nestogy130μsselect * from `cache` where `key` in ('laravel-cache-voip_tax:rules')\nDashboardController.php#140nestogy3.01msselect count(*) as aggregate from `clients` where `company_id` = 1 and `archived_at` is null and `clients`.`deleted_at` is null\nDashboardController.php#144nestogy270μsselect count(*) as aggregate from `tickets` where `company_id` = 1 and `status` in ('Open', 'In Progress', 'Waiting') and `tickets`.`company_id` = 1 and `tickets`.`archived_at` is null\nDashboardController.php#149nestogy190μsselect count(*) as aggregate from `invoices` where `company_id` = 1 and `status` = 'Sent' and `due_date` < '2025-08-12 04:07:52' and `invoices`.`archived_at` is null\nDashboardController.php#153nestogy170μsselect count(*) as aggregate from `assets` where `company_id` = 1 and `archived_at` is null and `assets`.`company_id` = 1 and `assets`.`archived_at` is null\nDashboardController.php#159nestogy190μsselect sum(`amount`) as aggregate from `invoices` where `company_id` = 1 and `status` = 'Paid' and month(`created_at`) = '08' and year(`created_at`) = 2025 and `invoices`.`archived_at` is null\nDashboardController.php#163nestogy160μsselect sum(`amount`) as aggregate from `invoices` where `company_id` = 1 and `status` in ('Draft', 'Sent') and `invoices`.`archived_at` is null\nDatabaseStore.php#130nestogy170μsselect * from `cache` where `key` in ('laravel-cache-dashboard_data:1:kpi:total_revenue')\nDatabaseStore.php#130nestogy170μsselect * from `cache` where `key` in ('laravel-cache-dashboard_data:1:kpi:mrr')\nDatabaseStore.php#130nestogy130μsselect * from `cache` where `key` in ('laravel-cache-dashboard_data:1:kpi:new_customers')\nDatabaseStore.php#130nestogy110μsselect * from `cache` where `key` in ('laravel-cache-dashboard_data:1:kpi:churn_rate')\nDashboardController.php#176nestogy230μsselect * from `tickets` where `company_id` = 1 and `tickets`.`company_id` = 1 and `tickets`.`archived_at` is null order by `created_at` desc limit 5\nDashboardController.php#188nestogy170μsselect * from `invoices` where `company_id` = 1 and `invoices`.`archived_at` is null order by `created_at` desc limit 5\nDashboardController.php#235nestogy200μsselect YEAR(created_at) as year, MONTH(created_at) as month, SUM(amount) as total from `invoices` where `company_id` = 1 and `status` = 'Paid' and `created_at` >= '2024-08-12 04:07:52' and `invoices`.`archived_at` is null group by `year`, `month` order by `year` asc, `month` asc\nDashboardController.php#215nestogy190μsselect DATE(created_at) as date, COUNT(*) as count from `tickets` where `company_id` = 1 and `created_at` >= '2025-07-13 04:07:52' and `tickets`.`company_id` = 1 and `tickets`.`archived_at` is null group by `date` order by `date` asc\nDashboardController.php#446nestogy210μsselect count(*) as aggregate from `invoices` where `company_id` = 1 and `status` = 'Sent' and `due_date` < '2025-08-05 04:07:52' and `invoices`.`archived_at` is null\nDashboardController.php#464nestogy190μsselect count(*) as aggregate from `tickets` where `company_id` = 1 and `status` in ('Open', 'New') and `assigned_to` is null and `tickets`.`company_id` = 1 and `tickets`.`archived_at` is null"
            }
          }
        },
        {
          "display": "I dont want a phased approach. just take all the steps needed.",
          "pastedContents": {}
        },
        {
          "display": "I want it to pull from the list of products, and the list of services, and change how its billing based on how the user wants. focus on UX, plan it fully.",
          "pastedContents": {}
        },
        {
          "display": "the executive dashboard controller or view doesnt seem to be pulling in live data. Troubleshoot it, and make it a bit more advanced. Im thinking customization that is saved to the local storage of the browser.",
          "pastedContents": {}
        },
        {
          "display": "i want to make it more advanced and feature rich",
          "pastedContents": {}
        },
        {
          "display": "they dont look good. lots of errors in the console. Can we clean it up?",
          "pastedContents": {}
        },
        {
          "display": "how does the invoices and quotes view work",
          "pastedContents": {}
        },
        {
          "display": "the quote/invoice UI and UX are all sorts of messed up.",
          "pastedContents": {}
        },
        {
          "display": "the profile picture is not the one i see at in the navbar. can we use gravatar or is that ancient?",
          "pastedContents": {}
        },
        {
          "display": "[Pasted text #1 +60 lines]",
          "pastedContents": {
            "1": {
              "id": 1,
              "type": "text",
              "content": "Internal Server Error\n\nSymfony\\Component\\ErrorHandler\\Error\\FatalError\nCannot redeclare App\\Http\\Controllers\\UserController::updatePassword()\nGET 129.212.186.114\nPHP 8.4.11 — Laravel 12.22.1\n\nExpand\nvendor frames\n\nApp\\Http\\Controllers\\UserController\n:607\napp/Http/Controllers/UserController.php :607\n    }\n \n    /**\n     * Update user password\n     */\n    public function updatePassword(Request $request)\n    {\n        $user = Auth::user();\n \n        $request->validate([\n            'current_password' => 'required|current_password',\n            'password' => 'required|string|min:8|confirmed',\n        ]);\n \n        try {\n            $user->update([\n                'password' => Hash::make($request->password)\nRequest\nGET /users/profile\nHeaders\nhost\n129.212.186.114\nconnection\nkeep-alive\nupgrade-insecure-requests\n1\nuser-agent\nMozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0\naccept\ntext/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\nreferer\nhttp://129.212.186.114/dashboard\naccept-encoding\ngzip, deflate\naccept-language\nen-US,en;q=0.9\ncookie\n__stripe_mid=7b02b76c-322f-4759-a79d-9881f900027415bfe0; remember_web_59ba36addc2b2f9401580f014c7f58ea4e30989d=eyJpdiI6Im1ib0k3S0VwaEVzY0hRWU5wUm5Wc0E9PSIsInZhbHVlIjoiQU1ScDZLZjc0TWpQZ0xkdnVMUnhMYzYxMGRCU3Z0ZTVxdFNTc0hzOHRRRHNzTnBuOXA3cDRUdkU0UjZ0b0hTT08rRjVTYUpHOHNsVW1oUEVxVVVEVW9reGlZeGZHdzM2WGszTUQ2d2RaNVRnTU1sM3hRMDMvNzdHQWp4VTFUV09kQVVZMU1BNjZRQ1pnc0UvTEl4cVorYTBMcWtVMGw0TVpFcnFOeEYvSVVYbHF6aTloL3E0NlhXYTlnYnZMd3k1SldiRDdmTVhuYSttSjk5QVB1eThEaVMrMnVBbi80L0FqNU4wZWZSOEg3VT0iLCJtYWMiOiIxZmZiZTU0ZDMwZTFmM2UxZmEyMDg3ZjQ5ZWJkYThiZDYwNjg5M2YyYjc2OTkyYWJjZjM4MGNjMDA5Y2ZkOTA4IiwidGFnIjoiIn0%3D; XSRF-TOKEN=eyJpdiI6InNZYWVhb1d4ekMveXBrV00xNmozTkE9PSIsInZhbHVlIjoiVjdPdzZzdVZ5R1U4dUxhQUEydjlhTVZXMVExamVmZUNiV01ZZXRLck1NVE5NdzI5Unk4TDZHMEFLTms5SFNQM3c0d0l5ZzcyTWVLZ2lNWDNjem85aDZ3ZHdiQUIyL0xNKytJcFl1aVByd21iR2hBTi9zMzJKYW1XNDVrL3pRUi8iLCJtYWMiOiI1NDY2Y2FiMWU3NDE1ZTVlZTY2NWVhMWIwNjU0NjJlNDgzMDUyMzY0YzUxZDc3ODAwMWQ2ODQ4MDAxMDMwZTU0IiwidGFnIjoiIn0%3D; laravel_session=eyJpdiI6IkU5MnJBTm81ZkdUMm9PTjhqN3RYUUE9PSIsInZhbHVlIjoiRnMwN3V1M2FwV2RwT1k2cWtqQm9uYkd2alB2UTJKVWxqL3FEK2N4M2FxVDluOTJDZnRNV1hBZmRRbXJKMDFsMk1QTXUvVTUxWDhJd0Jvc29hZE5hNmM0emtIaTI3aUhabmNoWjFDRVRLVUdLaWtPeXNrcW5lZ3pGVWxkdTR4cEoiLCJtYWMiOiI5ZTRiODZkZWRiNWIwNDYyM2QwYmFhMGY1YmYzZTc0Zjk2N2I5NGFjYzYzN2U2Y2Y3NzM2ZWU4OTZjNGZiMGEyIiwidGFnIjoiIn0%3D\nBody\nNo body data\nApplication\nRouting\ncontroller\nApp\\Http\\Controllers\\UserController@profile\nroute name\nusers.profile\nDatabase Queries\nNo query data"
            }
          }
        },
        {
          "display": "think harder and plan fully",
          "pastedContents": {}
        },
        {
          "display": "Think harder, and dig deeper",
          "pastedContents": {}
        },
        {
          "display": "[Pasted text #1 +72 lines]",
          "pastedContents": {
            "1": {
              "id": 1,
              "type": "text",
              "content": "Internal Server Error\n\nInvalidArgumentException\nAuth guard [client] is not defined.\nGET 129.212.186.114\nPHP 8.4.11 — Laravel 12.22.1\n\nExpand\nvendor frames\n7 vendor frames collapsed\n\nApp\\Http\\Middleware\\RememberTokenMiddleware\n:32\nhandle\n45 vendor frames collapsed\n\npublic/index.php\n:20\napp/Http/Middleware/RememberTokenMiddleware.php :32\n        // Only process if user is not already authenticated\n        if (!Auth::check()) {\n            $this->attemptRememberLogin($request);\n        }\n \n        return $next($request);\n    }\n \n    /**\n     * Attempt to log in user using remember token.\n     */\n    protected function attemptRememberLogin(Request $request): void\n    {\n        $rememberToken = $request->cookie(Auth::guard()->getRecallerName());\n \n        if (!$rememberToken) {\n            return;\nRequest\nGET /client-portal/login\nHeaders\nhost\n129.212.186.114\nconnection\nkeep-alive\nupgrade-insecure-requests\n1\nuser-agent\nMozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0\naccept\ntext/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\nreferer\nhttp://129.212.186.114/\naccept-encoding\ngzip, deflate\naccept-language\nen-US,en;q=0.9\ncookie\n__stripe_mid=7b02b76c-322f-4759-a79d-9881f900027415bfe0; remember_web_59ba36addc2b2f9401580f014c7f58ea4e30989d=eyJpdiI6InhnZ1A3WEwvNzVqWjR2dEcxM2NRSUE9PSIsInZhbHVlIjoiQ2ZSdVZodjdiUC9zSENqNWxxd2lPUExkeEhoTk8wUlZyeEQvTjRkVFhIaUhBK1l3OGdOOVQ1L1FORS9zZTlVSzNieXZHN3pJUU1DK0xwOE1QL1JuYXJ2M2VBQ2RyMGRIY2RCTGR2L1l2bWx6R0g3WS9OU3dwU3g5eFMwVVpZb2ppbUFJUlUyNDRlZHlIa0ZUeG4ybDZwUytaSzhqT0thS0hsKzFsS3lBQzFFREJjY3NFNWpBV1liMWlFT29jYllYVzR6TXFiblhCcDdoTjM4MVZiSUxFZldJQWNuM2lGeXE5RXhHNkxkaTAvaz0iLCJtYWMiOiJlMTg1NzZhM2Y5NDAzMDZlMjUwNzgwZGIyM2IyMjgxNDVlZTU5NzM0MWZiOTM1NTIxZGIzMDNjYjg0NWUyYzdiIiwidGFnIjoiIn0%3D; XSRF-TOKEN=eyJpdiI6IjRwb1VRS0IrZjYxV1doVGMwYTRjcUE9PSIsInZhbHVlIjoiVlNqdXk4K25UL202NVp2bkRnK3NBejV2K045STJXcnhhUUp2TFFGQS9qeUNXRzRNZDRqdUQ4a1h4a1Iyc0xyeWhjTWJxNXhRNjJtWm9ZcTI3MXlWMWxVZWVLeG1GWUl2SFlSeGNSQytBYkl6MXhBVGpxQnBhN1VNVVh4K1lYMkUiLCJtYWMiOiJjZWM0YWM0NWFhZDc1Y2E3NTI4YmZkNmYxZDY3Y2VkZGQ4ZWU3MDBkZTU5Y2U4NjE4NTEyNTM0MWQ3YmRlMjUxIiwidGFnIjoiIn0%3D; laravel_session=eyJpdiI6IlRjOGFQRDBUNWZ1S29lUU5GVFMveEE9PSIsInZhbHVlIjoiOXRqWmRWUURqWWF1S2haeGhUUDBBbjl3NkNaMkQ2ZC8rR3JzYU5DVHV5cThTTkhqNGVtazh4Y1ljcWVkOC85c1JDcnNxZEJiVlN6d2xzRGdRYzdVdytoWUg3blFxNk5lNXlNa3lSOGNwQmd4Z0lyOEREdkgyOEVkS2dGZEdvVHIiLCJtYWMiOiJiYTc4YzlkZjk5ZWU5NjQ1OTNkYTliZDQ3ODgwYmM3MDcxNDI3Y2JjMDQzMzhiOWI4M2M1MTVkMWYwNjQ2MTA1IiwidGFnIjoiIn0%3D\nBody\nNo body data\nApplication\nRouting\ncontroller\nApp\\Domains\\Client\\Controllers\\ClientPortalController@showLogin\nroute name\nclient.login\nmiddleware\nweb, guest:client\nDatabase Queries\nmysql (1.87 ms)\nselect * from `sessions` where `id` = 'z6aZpfxt6XfFessqrbANDXP8M25u8iCldfY6tr0z' limit 1\nmysql (0.58 ms)\nselect * from `users` where `id` = 1 and `users`.`archived_at` is null limit 1\n"
            }
          }
        },
        {
          "display": "[Pasted text #1 +79 lines]",
          "pastedContents": {
            "1": {
              "id": 1,
              "type": "text",
              "content": "Internal Server Error\n\nInvalidArgumentException\nView [users.profile] not found.\nGET 129.212.186.114\nPHP 8.4.11 — Laravel 12.22.1\n\nExpand\nvendor frames\n4 vendor frames collapsed\n\nApp\\Http\\Controllers\\UserController\n:507\nprofile\n10 vendor frames collapsed\n\nApp\\Http\\Middleware\\RememberTokenMiddleware\n:32\nhandle\n47 vendor frames collapsed\n\npublic/index.php\n:20\napp/Http/Controllers/UserController.php :507\n \n        if ($request->wantsJson()) {\n            return response()->json($user);\n        }\n \n        return view('users.profile', compact('user'));\n    }\n \n    /**\n     * Update user profile\n     */\n    public function updateProfile(Request $request)\n    {\n        $user = Auth::user();\n \n        $request->validate([\n            'name' => 'required|string|max:255',\nRequest\nGET /users/profile\nHeaders\nhost\n129.212.186.114\nconnection\nkeep-alive\nupgrade-insecure-requests\n1\nuser-agent\nMozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0\naccept\ntext/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\nreferer\nhttp://129.212.186.114/settings/integrations\naccept-encoding\ngzip, deflate\naccept-language\nen-US,en;q=0.9\ncookie\n__stripe_mid=7b02b76c-322f-4759-a79d-9881f900027415bfe0; remember_web_59ba36addc2b2f9401580f014c7f58ea4e30989d=eyJpdiI6InhnZ1A3WEwvNzVqWjR2dEcxM2NRSUE9PSIsInZhbHVlIjoiQ2ZSdVZodjdiUC9zSENqNWxxd2lPUExkeEhoTk8wUlZyeEQvTjRkVFhIaUhBK1l3OGdOOVQ1L1FORS9zZTlVSzNieXZHN3pJUU1DK0xwOE1QL1JuYXJ2M2VBQ2RyMGRIY2RCTGR2L1l2bWx6R0g3WS9OU3dwU3g5eFMwVVpZb2ppbUFJUlUyNDRlZHlIa0ZUeG4ybDZwUytaSzhqT0thS0hsKzFsS3lBQzFFREJjY3NFNWpBV1liMWlFT29jYllYVzR6TXFiblhCcDdoTjM4MVZiSUxFZldJQWNuM2lGeXE5RXhHNkxkaTAvaz0iLCJtYWMiOiJlMTg1NzZhM2Y5NDAzMDZlMjUwNzgwZGIyM2IyMjgxNDVlZTU5NzM0MWZiOTM1NTIxZGIzMDNjYjg0NWUyYzdiIiwidGFnIjoiIn0%3D; XSRF-TOKEN=eyJpdiI6Img1TmtVdnF0MEgvQlI3Tkg3eFh3NGc9PSIsInZhbHVlIjoicjV4UVhvck1uR3RWdWJFOG4yWW1EZEE1NWMxbjl4cUptQjR3UCsrMElkdHhRRkpadzhpaGszWU52WDJKUmxjTXFZUzBKeENpOThKRG53YXlBMjRJOE9CajdCWExROSswOU0rUldaeGhkcWkyaWpYMjBuVmtraUpKT0xVTFl2QnoiLCJtYWMiOiIyMDY1NDY1MGIyZTI5M2E0ZjJiNTdmNjUzZTFmNWE0ZGQyZmMxNDg0YjQ3NWRiNzMyNzkyNDAxOWFmMGU3MmQ2IiwidGFnIjoiIn0%3D; laravel_session=eyJpdiI6Ild5ZFpGTHhYYnFXU0w4UFhHZFY3SGc9PSIsInZhbHVlIjoiRVVjTGtSRnBYTFBhRWxIL3hFRDFjVlZqUy9pMDNSS1JUZkZtU0xNdFpRdTFoWXgzemgyclhWbm1Cc29HcEtPUkZJd0tRMUQ0WEMvODVodEllMnBSaStxSnNiR0p1Tllnd21PWEQ2Y2k5QzF1OGhpLzludTVscnN2MUlqekpsVVoiLCJtYWMiOiIxNTNhMzg5ZWE0NTRmMGY3Nzc1ZjZkYTRjOTExZDY1MDlhOTdjMmRkOTE0YjcwMjdiZDZlYzNkNThiYmVlMzYzIiwidGFnIjoiIn0%3D\nBody\nNo body data\nApplication\nRouting\ncontroller\nApp\\Http\\Controllers\\UserController@profile\nroute name\nusers.profile\nmiddleware\nweb, auth, verified\nDatabase Queries\nmysql (2.03 ms)\nselect * from `sessions` where `id` = 'z6aZpfxt6XfFessqrbANDXP8M25u8iCldfY6tr0z' limit 1\nmysql (0.55 ms)\nselect * from `users` where `id` = 1 and `users`.`archived_at` is null limit 1\nmysql (0.4 ms)\nselect * from `companies` where `companies`.`id` in (1)\n"
            }
          }
        },
        {
          "display": "we should add a button to the client portal on the welcome blade",
          "pastedContents": {}
        },
        {
          "display": "Lets make the rest of the views for the settings:[Pasted text #1 +77 lines]",
          "pastedContents": {
            "1": {
              "id": 1,
              "type": "text",
              "content": "Internal Server Error\n\nInvalidArgumentException\nView [settings.security] not found.\nGET 129.212.186.114\nPHP 8.4.11 — Laravel 12.22.1\n\nExpand\nvendor frames\n4 vendor frames collapsed\n\nroutes/web.php\n:190\n{closure:{closure:{closure:/var/www/html/Nestogy/routes/web.php:53}:186}:190}\n9 vendor frames collapsed\n\nApp\\Http\\Middleware\\RememberTokenMiddleware\n:32\nhandle\n47 vendor frames collapsed\n\npublic/index.php\n:20\nroutes/web.php :190\n    // Settings routes\n    Route::prefix('settings')->name('settings.')->group(function () {\n        Route::get('/', [\\App\\Http\\Controllers\\SettingsController::class, 'index'])->name('index');\n        Route::put('/', [\\App\\Http\\Controllers\\SettingsController::class, 'update'])->name('update');\n        Route::get('/general', fn() => view('settings.general'))->name('general');\n        Route::get('/security', fn() => view('settings.security'))->name('security');\n        Route::get('/email', fn() => view('settings.email'))->name('email');\n        Route::get('/integrations', fn() => view('settings.integrations'))->name('integrations');\n    });\n    \n    // Admin routes (Company 1 super-admins only)\n    Route::prefix('admin')->name('admin.')->middleware('can:manage-subscriptions')->group(function () {\n        Route::prefix('subscriptions')->name('subscriptions.')->group(function () {\n            Route::get('/', [\\App\\Http\\Controllers\\Admin\\SubscriptionManagementController::class, 'index'])->name('index');\n            Route::get('/analytics', [\\App\\Http\\Controllers\\Admin\\SubscriptionManagementController::class, 'analytics'])->name('analytics');\n            Route::get('/export', [\\App\\Http\\Controllers\\Admin\\SubscriptionManagementController::class, 'export'])->name('export');\n            Route::get('/{client}', [\\App\\Http\\Controllers\\Admin\\SubscriptionManagementController::class, 'show'])->name('show');\nRequest\nGET /settings/security\nHeaders\nhost\n129.212.186.114\nconnection\nkeep-alive\nupgrade-insecure-requests\n1\nuser-agent\nMozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0\naccept\ntext/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\nreferer\nhttp://129.212.186.114/settings\naccept-encoding\ngzip, deflate\naccept-language\nen-US,en;q=0.9\ncookie\n__stripe_mid=7b02b76c-322f-4759-a79d-9881f900027415bfe0; remember_web_59ba36addc2b2f9401580f014c7f58ea4e30989d=eyJpdiI6InhnZ1A3WEwvNzVqWjR2dEcxM2NRSUE9PSIsInZhbHVlIjoiQ2ZSdVZodjdiUC9zSENqNWxxd2lPUExkeEhoTk8wUlZyeEQvTjRkVFhIaUhBK1l3OGdOOVQ1L1FORS9zZTlVSzNieXZHN3pJUU1DK0xwOE1QL1JuYXJ2M2VBQ2RyMGRIY2RCTGR2L1l2bWx6R0g3WS9OU3dwU3g5eFMwVVpZb2ppbUFJUlUyNDRlZHlIa0ZUeG4ybDZwUytaSzhqT0thS0hsKzFsS3lBQzFFREJjY3NFNWpBV1liMWlFT29jYllYVzR6TXFiblhCcDdoTjM4MVZiSUxFZldJQWNuM2lGeXE5RXhHNkxkaTAvaz0iLCJtYWMiOiJlMTg1NzZhM2Y5NDAzMDZlMjUwNzgwZGIyM2IyMjgxNDVlZTU5NzM0MWZiOTM1NTIxZGIzMDNjYjg0NWUyYzdiIiwidGFnIjoiIn0%3D; XSRF-TOKEN=eyJpdiI6Im90MmdENk5vL0J5M09XZndCRytCTkE9PSIsInZhbHVlIjoiUXpEOXFmWVJBeGhVS1pEMnlZWUsrVGQwRnNLTzNNd3QrYlJRZmhRNkZFK3VpMGl4RW1YSFl6TWN0NVJNdEI0ejVrazdqdEpMZ2c3WnlHeC94amZOOWVQTGJwYmpBQVN2Q28xSzUyclUxbS82NUErUjkvb0FqTDlBbnNrb0JPNXAiLCJtYWMiOiI4OGFmMWRhYmZjZDc2ODg0ODEyNjQ4MzY1OWUwMGFkMjM5ZDUzNjYwMDQ3ZDdiZmJlNzYwYTJkZjIzOTY1MDAzIiwidGFnIjoiIn0%3D; laravel_session=eyJpdiI6ImdkZ2JEWllMamdVSjJEQlFlK0ZiSXc9PSIsInZhbHVlIjoiTENtLzdzTHVyTll4N2VNbjRvUzFWcjVpeXhKckY2azdOT1hEdCtxQkRKYVNiWVVCclphejJDSFNDbUV4U2l6NHV2eHRwVldUZVBONkwrRUh2UXo4YkFnS3Y1L3hiY0x2Y2paV2xVWG9tUm1reW9BekN2MWFYSW9Ta3cvYzBRSS8iLCJtYWMiOiI3ZmQwNzlkNWFlYTI5OTdjZWRjNWFmMTY0MzE4NTcxMDJmZGE2OGMzOTNlYmI0ZDM3MDY3YjFjMWYxYmUzMjg3IiwidGFnIjoiIn0%3D\nBody\nNo body data\nApplication\nRouting\ncontroller\nClosure\nroute name\nsettings.security\nmiddleware\nweb, auth, verified\nDatabase Queries\nmysql (1.41 ms)\nselect * from `sessions` where `id` = 'z6aZpfxt6XfFessqrbANDXP8M25u8iCldfY6tr0z' limit 1\nmysql (0.44 ms)\nselect * from `users` where `id` = 1 and `users`.`archived_at` is null limit 1\n"
            }
          }
        },
        {
          "display": "the name in the top nav doesnt reflect the company name. as it should",
          "pastedContents": {}
        },
        {
          "display": "I want you to think hard",
          "pastedContents": {}
        },
        {
          "display": "plan it fully",
          "pastedContents": {}
        },
        {
          "display": "[Pasted text #1 +63 lines]",
          "pastedContents": {
            "1": {
              "id": 1,
              "type": "text",
              "content": "Method Not Allowed\n\nSymfony\\Component\\HttpKernel\\Exception\\MethodNotAllowedHttpException\nThe PUT method is not supported for route settings. Supported methods: GET, HEAD.\nPUT 129.212.186.114\nPHP 8.4.11 — Laravel 12.22.1\n\nExpand\nvendor frames\n33 vendor frames collapsed\n\npublic/index.php\n:20\npublic/index.php :20\n \n// Bootstrap Laravel and handle the request...\n/** @var Application $app */\n$app = require_once __DIR__.'/../bootstrap/app.php';\n \n$app->handleRequest(Request::capture());\nRequest\nPUT /settings\nHeaders\nhost\n129.212.186.114\nconnection\nkeep-alive\ncontent-length\n138\ncache-control\nmax-age=0\norigin\nhttp://129.212.186.114\ncontent-type\napplication/x-www-form-urlencoded\nupgrade-insecure-requests\n1\nuser-agent\nMozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36 Edg/139.0.0.0\naccept\ntext/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\nreferer\nhttp://129.212.186.114/settings\naccept-encoding\ngzip, deflate\naccept-language\nen-US,en;q=0.9\ncookie\n__stripe_mid=7b02b76c-322f-4759-a79d-9881f900027415bfe0; remember_web_59ba36addc2b2f9401580f014c7f58ea4e30989d=eyJpdiI6InhnZ1A3WEwvNzVqWjR2dEcxM2NRSUE9PSIsInZhbHVlIjoiQ2ZSdVZodjdiUC9zSENqNWxxd2lPUExkeEhoTk8wUlZyeEQvTjRkVFhIaUhBK1l3OGdOOVQ1L1FORS9zZTlVSzNieXZHN3pJUU1DK0xwOE1QL1JuYXJ2M2VBQ2RyMGRIY2RCTGR2L1l2bWx6R0g3WS9OU3dwU3g5eFMwVVpZb2ppbUFJUlUyNDRlZHlIa0ZUeG4ybDZwUytaSzhqT0thS0hsKzFsS3lBQzFFREJjY3NFNWpBV1liMWlFT29jYllYVzR6TXFiblhCcDdoTjM4MVZiSUxFZldJQWNuM2lGeXE5RXhHNkxkaTAvaz0iLCJtYWMiOiJlMTg1NzZhM2Y5NDAzMDZlMjUwNzgwZGIyM2IyMjgxNDVlZTU5NzM0MWZiOTM1NTIxZGIzMDNjYjg0NWUyYzdiIiwidGFnIjoiIn0%3D; XSRF-TOKEN=eyJpdiI6IjZwZEVhT05PalBjaUZaL3F0Wm5KVHc9PSIsInZhbHVlIjoiMVIxVHpvbjF6RGRxT3V4cmwvVlZwbms1akJuVm1nTmZleTRraEpwOTN2YndzelRnQ1dUb3NLbTM0eHZqYng2REtiS0RqMDR0T3pOMGxpU1NhendtUGlRMGpnNE1VSmlxSXh2eitZb2dJWHRlMGd5S1R5eDR2WFByVG0wRG9JTCsiLCJtYWMiOiJjY2RhNWM0NzA5OGJjM2IzZjgzMjhhZjhjNTBiZGU5MzUzMTU2YWUwMGViOGQ4OGY1N2U0OTRjMjhjZGFmNjIwIiwidGFnIjoiIn0%3D; laravel_session=eyJpdiI6IjVab25DUGhacEpMUXFhSWxYL2pGZ0E9PSIsInZhbHVlIjoidmFFSjBBWUt2dFYyN2xiUUxNR2Z0SmZZeEpDbnc0WkZ4YmNacXhBVVd5UytsdGdLazNTS0tPRmI5MlBab3oyNlBFYVBoZUF2b09sV25HMlovM2ZyeThyb2ppR2lmL1BlZS9LOUk3OTIyZVM4VnZ2eFN0RDF1WGVJUXR6bjE3RmMiLCJtYWMiOiIyY2Y3NDdiMjQzNWU3MWQ2YmFjMmE3YmFiZjdiYWRlYzM4OTFiZTgxZGYyMWY4ZmE5M2Y0NjczODk0Mzk1MDhmIiwidGFnIjoiIn0%3D\nBody\n{\n    \"_token\": \"l5Mf3IRHg9wOvCQNxlpKj66tCPe36k87T3tWSqLJ\",\n    \"_method\": \"PUT\",\n    \"company_name\": \"FoleyBridge Solutions\",\n    \"timezone\": \"UTC\",\n    \"date_format\": \"Y-m-d\",\n    \"currency\": \"USD\"\n}\nApplication\nRouting\nNo routing data\nDatabase Queries\nNo query data\n"
            }
          }
        },
        {
          "display": "/ide ",
          "pastedContents": {}
        },
        {
          "display": "I said per command. I want more than one quick action",
          "pastedContents": {}
        },
        {
          "display": "I should only see one quick action command ",
          "pastedContents": {}
        },
        {
          "display": "the quotes and invoices arent quite all the way there.",
          "pastedContents": {}
        },
        {
          "display": "i dont see any quickactions, nor does anything show up when i search for something. I also want to be able to search for objects. refer to the documentation. think it through.",
          "pastedContents": {}
        },
        {
          "display": "[Pasted text #1 +347 lines]",
          "pastedContents": {
            "1": {
              "id": 1,
              "type": "text",
              "content": "\nInternal Server Error\nIlluminate\\Database\\Eloquent\\RelationNotFoundException\nCall to undefined relationship [addresses] on model [App\\Models\\Contact].\nGET nestogy.foleybridge.solutions\nPHP 8.4.11 — Laravel 12.22.1\n7 vendor frames collapsed\n6 vendor frames collapsed\n1 vendor frame collapsed\n5 vendor frames collapsed\n47 vendor frames collapsed\napp/Domains/Client/Controllers/ContactController.php :167\n\n        // Additional permission check\n\n        if (!auth()->user()->hasPermission('clients.contacts.view')) {\n\n            abort(403, 'Insufficient permissions to view contacts');\n\n        }\n\n \n\n        $contact->load('client', 'addresses');\n\n \n\n        return view('clients.contacts.show', compact('contact', 'client'));\n\n    }\n\n \n\n    /**\n\n     * Show the form for editing the specified contact for a specific client\n\n     */\n\n    public function edit(Client $client, Contact $contact)\n\n    {\n\n        // Verify contact belongs to client\n\n        if ($contact->client_id !== $client->id) {\n\nRequest\nGET /clients/1/contacts/1\nHeaders\n\nhost\n\nnestogy.foleybridge.solutions\n\nuser-agent\n\nMozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0\n\naccept\n\ntext/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\n\naccept-language\n\nen-US,en;q=0.5\n\naccept-encoding\n\ngzip, deflate\n\nreferer\n\nhttp://nestogy.foleybridge.solutions/clients/1/contacts\n\nconnection\n\nkeep-alive\n\ncookie\n\nXSRF-TOKEN=eyJpdiI6IkFXMGcrYU5kc3k3NExRSmFwb3pTcEE9PSIsInZhbHVlIjoiaGRaVEdhd24wT3U0aExEcHdXTVBpZFk0anNNd2dpOWRZdGFnZ01SZWNmYXNqUnFDNDlZWStqSkZYbGpHUmRJamhlSEVYMm14aDFjWC9NOTF0ejJyVC9HbXlmWXRlQVhYWGFGV24rOS9MaUpMRHorQUFlS3VuWWNzdExqNFFrNkYiLCJtYWMiOiI5NjlhNzYxNGQzYTE1YjFlNDhhNDIxMDU1N2Y2MGZiYmVjZDc2ZWU5ZDdjMTczOWZlODY1MzVlNWZiM2UxNjVhIiwidGFnIjoiIn0%3D; laravel_session=eyJpdiI6ImhmYk1nNENyMFNWZE1ONkZBQmdrWmc9PSIsInZhbHVlIjoiZTRwQmpqd0F4Qm05WnZ6ZGFlVVNtV1JwNk9QdldBdWU5bldsc1FtTiszTDFyeFl6WmFGYTNPWTV0ZVloNDFrN3ZCQ1FVRnF6NloyYkh6Ylp0U21uZkpTNDJxclBKa0x4cm0yMDZ5QW04VTJqeU1WdWs0RG5pWWNvTklhVVJBWmQiLCJtYWMiOiJiYzc5YzI1OWQ2MzUzNGUwMTM3NjAwODI5ZmE2OWZiYTdhMjBlMjk4NjU0ZWM0Y2E2ZWIzODI1YjIzYjkzZDZhIiwidGFnIjoiIn0%3D; remember_web_59ba36addc2b2f9401580f014c7f58ea4e30989d=eyJpdiI6ImtVTU5IbEhONEpuVmdnSXFlYjF6NFE9PSIsInZhbHVlIjoiQTQ0NzRUMkRQa3YrUk9LRTl5Sy9uZ0Q0NnkrSzlrUCthTHdubXF0dmJkZHJ2ejJ1Q0g5eEtVcjlUZDVHL2pCUlFvVmJMZ0F1a3BVUFZPa3BNeDFSWnkvdzNLOCtTTkNoaU1IZjk4SGx5cnEwS1NvMzYvRjVqRzlqdy84V09pd3E1QzFQd3RTcjM5YmtON3lycTFYaklSZ0Fpb0t1VnZEMnV4ZUZhUGloL0dhMWJ4L3hVRVBHOFZ4cm5rVUZCa3grWEpla3JZSHNtVXpoUXRmT2RONUpUNEcwYVdoaDRlZkQ1RGRKcERKakkrWT0iLCJtYWMiOiIwMzQ0Zjk0ZDdlODhjZWQyYTYwODc3ZGQyZmQ3YjNkNGVlMGE2NTEwODRkOTc2ZmJmMjM0ZDNjZDM0OTY0NTQwIiwidGFnIjoiIn0%3D\n\nupgrade-insecure-requests\n\n1\n\npriority\n\nu=0, i\n\nBody\n\nNo body data\n\nApplication\nRouting\n\ncontroller\n\nApp\\Domains\\Client\\Controllers\\ContactController@show\n\nroute name\n\nclients.contacts.show\n\nmiddleware\n\nweb, auth, verified, company, permission:clients.contacts.view\n\nRouting Parameters\n\n{\n    \"client\": {\n        \"id\": 1,\n        \"company_id\": 1,\n        \"lead\": false,\n        \"name\": \"BurkhartPeterson\",\n        \"company_name\": null,\n        \"type\": \"business\",\n        \"email\": \"aaguilar@burkhartpeterson.com\",\n        \"phone\": null,\n        \"address\": null,\n        \"city\": null,\n        \"state\": null,\n        \"zip_code\": null,\n        \"country\": \"US\",\n        \"website\": null,\n        \"referral\": null,\n        \"rate\": null,\n        \"currency_code\": \"USD\",\n        \"net_terms\": 30,\n        \"tax_id_number\": null,\n        \"rmm_id\": null,\n        \"notes\": null,\n        \"status\": \"active\",\n        \"hourly_rate\": null,\n        \"billing_contact\": null,\n        \"technical_contact\": null,\n        \"custom_fields\": null,\n        \"contract_start_date\": null,\n        \"contract_end_date\": null,\n        \"created_at\": \"2025-08-11T23:22:46.000000Z\",\n        \"updated_at\": \"2025-08-11T23:31:31.000000Z\",\n        \"deleted_at\": null,\n        \"archived_at\": null,\n        \"accessed_at\": \"2025-08-11T23:31:31.000000Z\",\n        \"created_by\": null\n    },\n    \"contact\": {\n        \"id\": 1,\n        \"company_id\": 1,\n        \"name\": \"Claudia Funari\",\n        \"title\": \"Controller\",\n        \"email\": \"cfunari@burkhartpeterson.com\",\n        \"phone\": \"2103773311\",\n        \"extension\": null,\n        \"mobile\": null,\n        \"photo\": null,\n        \"notes\": null,\n        \"auth_method\": null,\n        \"token_expire\": null,\n        \"primary\": false,\n        \"important\": true,\n        \"billing\": true,\n        \"technical\": false,\n        \"department\": null,\n        \"created_at\": \"2025-08-11T23:44:44.000000Z\",\n        \"updated_at\": \"2025-08-11T23:44:44.000000Z\",\n        \"archived_at\": null,\n        \"accessed_at\": null,\n        \"client_id\": 1,\n        \"location_id\": null,\n        \"vendor_id\": null\n    }\n}\n\nDatabase Queries\n\nmysql (1.81 ms)\n\nselect * from `sessions` where `id` = '1mg8dlPhmGWVMKgo9YvMGPWBoPbQMPdh7q9SzK9q' limit 1\n\nmysql (0.62 ms)\n\nselect * from `users` where `id` = 1 and `users`.`archived_at` is null limit 1\n\nmysql (0.68 ms)\n\nselect * from `clients` where `id` = '1' and `clients`.`deleted_at` is null limit 1\n\nmysql (0.61 ms)\n\nselect * from `contacts` where `id` = '1' and `contacts`.`archived_at` is null and `contacts`.`company_id` = 1 limit 1\n\nmysql (0.45 ms)\n\nselect * from `companies` where `companies`.`id` = 1 limit 1\n\nmysql (0.5 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.contacts.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '') as `exists`\n\nmysql (0.38 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.contacts.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '1') as `exists`\n\nmysql (0.83 ms)\n\nselect exists(select * from `permissions` where `slug` = 'clients.contacts.view' and exists (select * from `roles` inner join `role_permissions` on `roles`.`id` = `role_permissions`.`role_id` where `permissions`.`id` = `role_permissions`.`permission_id` and exists (select * from `users` inner join `user_roles` on `users`.`id` = `user_roles`.`user_id` where `roles`.`id` = `user_roles`.`role_id` and `users`.`id` = 1 and `user_roles`.`company_id` = 1 and `users`.`archived_at` is null))) as `exists`\n\nmysql (0.88 ms)\n\nselect * from `permissions` where exists (select * from `roles` inner join `role_permissions` on `roles`.`id` = `role_permissions`.`role_id` where `permissions`.`id` = `role_permissions`.`permission_id` and exists (select * from `users` inner join `user_roles` on `users`.`id` = `user_roles`.`user_id` where `roles`.`id` = `user_roles`.`role_id` and `users`.`id` = 1 and `user_roles`.`company_id` = 1 and `users`.`archived_at` is null))\n\nmysql (0.67 ms)\n\nselect `permissions`.*, `user_permissions`.`user_id` as `pivot_user_id`, `user_permissions`.`permission_id` as `pivot_permission_id`, `user_permissions`.`company_id` as `pivot_company_id`, `user_permissions`.`granted` as `pivot_granted`, `user_permissions`.`created_at` as `pivot_created_at`, `user_permissions`.`updated_at` as `pivot_updated_at` from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '1'\n\nmysql (0.52 ms)\n\nselect `slug` from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = ''\n\nmysql (0.55 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '') as `exists`\n\nmysql (0.51 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '1') as `exists`\n\nmysql (0.95 ms)\n\nselect exists(select * from `permissions` where `slug` = 'clients.view' and exists (select * from `roles` inner join `role_permissions` on `roles`.`id` = `role_permissions`.`role_id` where `permissions`.`id` = `role_permissions`.`permission_id` and exists (select * from `users` inner join `user_roles` on `users`.`id` = `user_roles`.`user_id` where `roles`.`id` = `user_roles`.`role_id` and `users`.`id` = 1 and `user_roles`.`company_id` = 1 and `users`.`archived_at` is null))) as `exists`\n\nmysql (0.53 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.contacts.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '') as `exists`\n\nmysql (0.42 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.contacts.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '1') as `exists`\n\nmysql (0.86 ms)\n\nselect exists(select * from `permissions` where `slug` = 'clients.contacts.view' and exists (select * from `roles` inner join `role_permissions` on `roles`.`id` = `role_permissions`.`role_id` where `permissions`.`id` = `role_permissions`.`permission_id` and exists (select * from `users` inner join `user_roles` on `users`.`id` = `user_roles`.`user_id` where `roles`.`id` = `user_roles`.`role_id` and `users`.`id` = 1 and `user_roles`.`company_id` = 1 and `users`.`archived_at` is null))) as `exists`\n\nmysql (0.58 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.contacts.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '') as `exists`\n\nmysql (0.4 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.contacts.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '1') as `exists`\n\nmysql (0.96 ms)\n\nselect exists(select * from `permissions` where `slug` = 'clients.contacts.view' and exists (select * from `roles` inner join `role_permissions` on `roles`.`id` = `role_permissions`.`role_id` where `permissions`.`id` = `role_permissions`.`permission_id` and exists (select * from `users` inner join `user_roles` on `users`.`id` = `user_roles`.`user_id` where `roles`.`id` = `user_roles`.`role_id` and `users`.`id` = 1 and `user_roles`.`company_id` = 1 and `users`.`archived_at` is null))) as `exists`\n\nmysql (0.65 ms)\n\nselect * from `clients` where `clients`.`id` in (1) and `clients`.`deleted_at` is null\n\n324ms\n7MB\n12.x\nGET clients/{client}/contacts/{contact}\n\nstatus\n    500 Internal Server Error\nfull_url\n    http://nestogy.foleybridge.solutions/clients/1/contacts/1\naction_name\n    clients.contacts.show\ncontroller_action\n    App\\Domains\\Client\\Controllers\\ContactController@show\nuri\n    GET clients/{client}/contacts/{contact}\ncontroller\n    App\\Domains\\Client\\Controllers\\ContactController@show\nprefix\n    /clients/{client}\nfile\n    app/Domains/Client/Controllers/ContactController.php:151-170\nmiddleware\n    web, auth, verified\nduration\n    331ms\npeak_memory\n    10MB\nresponse\n    text/html; charset=UTF-8\nrequest_format\n    html\nrequest_query\n\n    []\n\nrequest_request\n\n    []\n\nrequest_headers\n\n    array:10 [▼\n      \"host\" => array:1 [▶]\n      \"user-agent\" => array:1 [▶]\n      \"accept\" => array:1 [▶]\n      \"accept-language\" => array:1 [▶]\n      \"accept-encoding\" => array:1 [▶]\n      \"referer\" => array:1 [▶]\n      \"connection\" => array:1 [▶]\n      \"cookie\" => array:1 [▶]\n      \"upgrade-insecure-requests\" => array:1 [▶]\n      \"priority\" => array:1 [▶]\n    ]\n\nrequest_cookies\n\n    array:3 [▼\n      \"XSRF-TOKEN\" => \"niCMFwoh2J23Z5U2llceZyaVdDczj5iNIBc57eBE\"\n      \"laravel_session\" => \"1mg8dlPhmGWVMKgo9YvMGPWBoPbQMPdh7q9SzK9q\"\n      \"remember_web_59ba36addc2b2f9401580f014c7f58ea4e30989d\" => \"1|cn651XmgyXRTitiNgKjoY4Uiw7W9Y4wQ9mskaa51whkqich8lAObT1GeP6nF|$2y$12$nYtt2vzDWOjep9Tw7LjanejSOPShzfJBw.OzDrWFgTAGQY9SMr64m\"\n    ]\n\nresponse_headers\n\n    array:3 [▼\n      \"cache-control\" => array:1 [▶]\n      \"date\" => array:1 [▶]\n      \"content-type\" => array:1 [▶]\n    ]\n\nsession_attributes\n\n    array:9 [▼\n      \"_token\" => \"niCMFwoh2J23Z5U2llceZyaVdDczj5iNIBc57eBE\"\n      \"url\" => []\n      \"_previous\" => array:1 [▶]\n      \"_flash\" => array:2 [▶]\n      \"login_web_59ba36addc2b2f9401580f014c7f58ea4e30989d\" => 1\n      \"current_workflow\" => \"financial\"\n      \"selected_client_id\" => 1\n      \"company_id\" => 1\n      \"PHPDEBUGBAR_STACK_DATA\" => []\n    ]\n\n"
            }
          }
        },
        {
          "display": "what other verbs should we use.",
          "pastedContents": {}
        },
        {
          "display": "contacts should be assigned to locations assigned to clients, but contacts also assigned to client",
          "pastedContents": {}
        },
        {
          "display": "[Pasted text #1 +347 lines]",
          "pastedContents": {
            "1": {
              "id": 1,
              "type": "text",
              "content": "\nInternal Server Error\nIlluminate\\Database\\Eloquent\\RelationNotFoundException\nCall to undefined relationship [addresses] on model [App\\Models\\Contact].\nGET nestogy.foleybridge.solutions\nPHP 8.4.11 — Laravel 12.22.1\n7 vendor frames collapsed\n6 vendor frames collapsed\n1 vendor frame collapsed\n5 vendor frames collapsed\n47 vendor frames collapsed\napp/Domains/Client/Controllers/ContactController.php :167\n\n        // Additional permission check\n\n        if (!auth()->user()->hasPermission('clients.contacts.view')) {\n\n            abort(403, 'Insufficient permissions to view contacts');\n\n        }\n\n \n\n        $contact->load('client', 'addresses');\n\n \n\n        return view('clients.contacts.show', compact('contact', 'client'));\n\n    }\n\n \n\n    /**\n\n     * Show the form for editing the specified contact for a specific client\n\n     */\n\n    public function edit(Client $client, Contact $contact)\n\n    {\n\n        // Verify contact belongs to client\n\n        if ($contact->client_id !== $client->id) {\n\nRequest\nGET /clients/1/contacts/1\nHeaders\n\nhost\n\nnestogy.foleybridge.solutions\n\nuser-agent\n\nMozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0\n\naccept\n\ntext/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\n\naccept-language\n\nen-US,en;q=0.5\n\naccept-encoding\n\ngzip, deflate\n\nreferer\n\nhttp://nestogy.foleybridge.solutions/clients/1/contacts\n\nconnection\n\nkeep-alive\n\ncookie\n\nXSRF-TOKEN=eyJpdiI6ImNvNzRWZEx5bmNraWxnczJnbERQWVE9PSIsInZhbHVlIjoiVi9rUGhvYXRvajJ6b1ZGT0RaME9vbXFhd1JEdWgwS2U1em0zSkxZS2xwN1o5WXB1ZmNBOXdxeUcyRUxaZXphR3V2b3ZXYmxpREh3ZHdHbTE0dXloZFJSbFJIaERrOUlTb2lOR3NEL1FXZzdVRC9JQkM3QXFhZUJ0UjF6SEsxS08iLCJtYWMiOiJmMzZlN2RmOGExZWM3Njc2MTE4MGM5ZjRlYzFjZWIwYTVmZTlhNTUzMzViZWE1OWYxNGE4ZDBlOGZkMzQzNTQwIiwidGFnIjoiIn0%3D; laravel_session=eyJpdiI6IlNGR3pOMnJXdUNIUWR1ZC9MWmR2aXc9PSIsInZhbHVlIjoiUFltU0YzM0FWVlhEakFBaUdaZmtxcUw5WEJQa3R5MFVaMmh6U1FQSmlKNVlBMk9rSlNPMXhrN0FIWXpqNkQ3a2JLN1FNNzk1eWlvSnVBbDdySElNRGtsOFdTUlEwekNnSXFkenk5bllwaTRJTGhsNGFPUjhHK1BDY3dRR09zaVQiLCJtYWMiOiJhMDM5ZGRlNzFjNTk2ZTRkYTBiM2UxNDI3MjA3MDg0MTNmOWZmNTdiN2M5YzAxZDZjYjgzODU5OWRiMzJhOWFiIiwidGFnIjoiIn0%3D; remember_web_59ba36addc2b2f9401580f014c7f58ea4e30989d=eyJpdiI6ImtVTU5IbEhONEpuVmdnSXFlYjF6NFE9PSIsInZhbHVlIjoiQTQ0NzRUMkRQa3YrUk9LRTl5Sy9uZ0Q0NnkrSzlrUCthTHdubXF0dmJkZHJ2ejJ1Q0g5eEtVcjlUZDVHL2pCUlFvVmJMZ0F1a3BVUFZPa3BNeDFSWnkvdzNLOCtTTkNoaU1IZjk4SGx5cnEwS1NvMzYvRjVqRzlqdy84V09pd3E1QzFQd3RTcjM5YmtON3lycTFYaklSZ0Fpb0t1VnZEMnV4ZUZhUGloL0dhMWJ4L3hVRVBHOFZ4cm5rVUZCa3grWEpla3JZSHNtVXpoUXRmT2RONUpUNEcwYVdoaDRlZkQ1RGRKcERKakkrWT0iLCJtYWMiOiIwMzQ0Zjk0ZDdlODhjZWQyYTYwODc3ZGQyZmQ3YjNkNGVlMGE2NTEwODRkOTc2ZmJmMjM0ZDNjZDM0OTY0NTQwIiwidGFnIjoiIn0%3D\n\nupgrade-insecure-requests\n\n1\n\npriority\n\nu=0, i\n\nBody\n\nNo body data\n\nApplication\nRouting\n\ncontroller\n\nApp\\Domains\\Client\\Controllers\\ContactController@show\n\nroute name\n\nclients.contacts.show\n\nmiddleware\n\nweb, auth, verified, company, permission:clients.contacts.view\n\nRouting Parameters\n\n{\n    \"client\": {\n        \"id\": 1,\n        \"company_id\": 1,\n        \"lead\": false,\n        \"name\": \"BurkhartPeterson\",\n        \"company_name\": null,\n        \"type\": \"business\",\n        \"email\": \"aaguilar@burkhartpeterson.com\",\n        \"phone\": null,\n        \"address\": null,\n        \"city\": null,\n        \"state\": null,\n        \"zip_code\": null,\n        \"country\": \"US\",\n        \"website\": null,\n        \"referral\": null,\n        \"rate\": null,\n        \"currency_code\": \"USD\",\n        \"net_terms\": 30,\n        \"tax_id_number\": null,\n        \"rmm_id\": null,\n        \"notes\": null,\n        \"status\": \"active\",\n        \"hourly_rate\": null,\n        \"billing_contact\": null,\n        \"technical_contact\": null,\n        \"custom_fields\": null,\n        \"contract_start_date\": null,\n        \"contract_end_date\": null,\n        \"created_at\": \"2025-08-11T23:22:46.000000Z\",\n        \"updated_at\": \"2025-08-11T23:31:31.000000Z\",\n        \"deleted_at\": null,\n        \"archived_at\": null,\n        \"accessed_at\": \"2025-08-11T23:31:31.000000Z\",\n        \"created_by\": null\n    },\n    \"contact\": {\n        \"id\": 1,\n        \"company_id\": 1,\n        \"name\": \"Claudia Funari\",\n        \"title\": \"Controller\",\n        \"email\": \"cfunari@burkhartpeterson.com\",\n        \"phone\": \"2103773311\",\n        \"extension\": null,\n        \"mobile\": null,\n        \"photo\": null,\n        \"notes\": null,\n        \"auth_method\": null,\n        \"token_expire\": null,\n        \"primary\": false,\n        \"important\": true,\n        \"billing\": true,\n        \"technical\": false,\n        \"department\": null,\n        \"created_at\": \"2025-08-11T23:44:44.000000Z\",\n        \"updated_at\": \"2025-08-11T23:44:44.000000Z\",\n        \"archived_at\": null,\n        \"accessed_at\": null,\n        \"client_id\": 1,\n        \"location_id\": null,\n        \"vendor_id\": null\n    }\n}\n\nDatabase Queries\n\nmysql (1.68 ms)\n\nselect * from `sessions` where `id` = '1mg8dlPhmGWVMKgo9YvMGPWBoPbQMPdh7q9SzK9q' limit 1\n\nmysql (0.76 ms)\n\nselect * from `users` where `id` = 1 and `users`.`archived_at` is null limit 1\n\nmysql (0.53 ms)\n\nselect * from `clients` where `id` = '1' and `clients`.`deleted_at` is null limit 1\n\nmysql (0.47 ms)\n\nselect * from `contacts` where `id` = '1' and `contacts`.`archived_at` is null and `contacts`.`company_id` = 1 limit 1\n\nmysql (0.39 ms)\n\nselect * from `companies` where `companies`.`id` = 1 limit 1\n\nmysql (0.42 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.contacts.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '') as `exists`\n\nmysql (0.33 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.contacts.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '1') as `exists`\n\nmysql (0.82 ms)\n\nselect exists(select * from `permissions` where `slug` = 'clients.contacts.view' and exists (select * from `roles` inner join `role_permissions` on `roles`.`id` = `role_permissions`.`role_id` where `permissions`.`id` = `role_permissions`.`permission_id` and exists (select * from `users` inner join `user_roles` on `users`.`id` = `user_roles`.`user_id` where `roles`.`id` = `user_roles`.`role_id` and `users`.`id` = 1 and `user_roles`.`company_id` = 1 and `users`.`archived_at` is null))) as `exists`\n\nmysql (0.75 ms)\n\nselect * from `permissions` where exists (select * from `roles` inner join `role_permissions` on `roles`.`id` = `role_permissions`.`role_id` where `permissions`.`id` = `role_permissions`.`permission_id` and exists (select * from `users` inner join `user_roles` on `users`.`id` = `user_roles`.`user_id` where `roles`.`id` = `user_roles`.`role_id` and `users`.`id` = 1 and `user_roles`.`company_id` = 1 and `users`.`archived_at` is null))\n\nmysql (0.42 ms)\n\nselect `permissions`.*, `user_permissions`.`user_id` as `pivot_user_id`, `user_permissions`.`permission_id` as `pivot_permission_id`, `user_permissions`.`company_id` as `pivot_company_id`, `user_permissions`.`granted` as `pivot_granted`, `user_permissions`.`created_at` as `pivot_created_at`, `user_permissions`.`updated_at` as `pivot_updated_at` from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '1'\n\nmysql (0.65 ms)\n\nselect `slug` from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = ''\n\nmysql (0.53 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '') as `exists`\n\nmysql (0.4 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '1') as `exists`\n\nmysql (0.81 ms)\n\nselect exists(select * from `permissions` where `slug` = 'clients.view' and exists (select * from `roles` inner join `role_permissions` on `roles`.`id` = `role_permissions`.`role_id` where `permissions`.`id` = `role_permissions`.`permission_id` and exists (select * from `users` inner join `user_roles` on `users`.`id` = `user_roles`.`user_id` where `roles`.`id` = `user_roles`.`role_id` and `users`.`id` = 1 and `user_roles`.`company_id` = 1 and `users`.`archived_at` is null))) as `exists`\n\nmysql (0.41 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.contacts.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '') as `exists`\n\nmysql (0.36 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.contacts.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '1') as `exists`\n\nmysql (0.64 ms)\n\nselect exists(select * from `permissions` where `slug` = 'clients.contacts.view' and exists (select * from `roles` inner join `role_permissions` on `roles`.`id` = `role_permissions`.`role_id` where `permissions`.`id` = `role_permissions`.`permission_id` and exists (select * from `users` inner join `user_roles` on `users`.`id` = `user_roles`.`user_id` where `roles`.`id` = `user_roles`.`role_id` and `users`.`id` = 1 and `user_roles`.`company_id` = 1 and `users`.`archived_at` is null))) as `exists`\n\nmysql (0.41 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.contacts.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '') as `exists`\n\nmysql (0.38 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.contacts.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '1') as `exists`\n\nmysql (0.72 ms)\n\nselect exists(select * from `permissions` where `slug` = 'clients.contacts.view' and exists (select * from `roles` inner join `role_permissions` on `roles`.`id` = `role_permissions`.`role_id` where `permissions`.`id` = `role_permissions`.`permission_id` and exists (select * from `users` inner join `user_roles` on `users`.`id` = `user_roles`.`user_id` where `roles`.`id` = `user_roles`.`role_id` and `users`.`id` = 1 and `user_roles`.`company_id` = 1 and `users`.`archived_at` is null))) as `exists`\n\nmysql (0.43 ms)\n\nselect * from `clients` where `clients`.`id` in (1) and `clients`.`deleted_at` is null\n\n232ms\n7MB\n12.x\nGET clients/{client}/contacts/{contact}\n\nstatus\n    500 Internal Server Error\nfull_url\n    http://nestogy.foleybridge.solutions/clients/1/contacts/1\naction_name\n    clients.contacts.show\ncontroller_action\n    App\\Domains\\Client\\Controllers\\ContactController@show\nuri\n    GET clients/{client}/contacts/{contact}\ncontroller\n    App\\Domains\\Client\\Controllers\\ContactController@show\nprefix\n    /clients/{client}\nfile\n    app/Domains/Client/Controllers/ContactController.php:151-170\nmiddleware\n    web, auth, verified\nduration\n    237ms\npeak_memory\n    10MB\nresponse\n    text/html; charset=UTF-8\nrequest_format\n    html\nrequest_query\n\n    []\n\nrequest_request\n\n    []\n\nrequest_headers\n\n    array:10 [▼\n      \"host\" => array:1 [▶]\n      \"user-agent\" => array:1 [▶]\n      \"accept\" => array:1 [▶]\n      \"accept-language\" => array:1 [▶]\n      \"accept-encoding\" => array:1 [▶]\n      \"referer\" => array:1 [▶]\n      \"connection\" => array:1 [▶]\n      \"cookie\" => array:1 [▶]\n      \"upgrade-insecure-requests\" => array:1 [▶]\n      \"priority\" => array:1 [▶]\n    ]\n\nrequest_cookies\n\n    array:3 [▼\n      \"XSRF-TOKEN\" => \"niCMFwoh2J23Z5U2llceZyaVdDczj5iNIBc57eBE\"\n      \"laravel_session\" => \"1mg8dlPhmGWVMKgo9YvMGPWBoPbQMPdh7q9SzK9q\"\n      \"remember_web_59ba36addc2b2f9401580f014c7f58ea4e30989d\" => \"1|cn651XmgyXRTitiNgKjoY4Uiw7W9Y4wQ9mskaa51whkqich8lAObT1GeP6nF|$2y$12$nYtt2vzDWOjep9Tw7LjanejSOPShzfJBw.OzDrWFgTAGQY9SMr64m\"\n    ]\n\nresponse_headers\n\n    array:3 [▼\n      \"cache-control\" => array:1 [▶]\n      \"date\" => array:1 [▶]\n      \"content-type\" => array:1 [▶]\n    ]\n\nsession_attributes\n\n    array:9 [▼\n      \"_token\" => \"niCMFwoh2J23Z5U2llceZyaVdDczj5iNIBc57eBE\"\n      \"url\" => []\n      \"_previous\" => array:1 [▶]\n      \"_flash\" => array:2 [▶]\n      \"login_web_59ba36addc2b2f9401580f014c7f58ea4e30989d\" => 1\n      \"current_workflow\" => \"financial\"\n      \"selected_client_id\" => 1\n      \"company_id\" => 1\n      \"PHPDEBUGBAR_STACK_DATA\" => []\n    ]\n\n"
            }
          }
        },
        {
          "display": "[Pasted text #1 +87 lines]",
          "pastedContents": {
            "1": {
              "id": 1,
              "type": "text",
              "content": "\n403\nThis action is unauthorized.\n66.98ms\n3MB\n12.x\nGET clients/{client}/contacts/{contact}\n\nstatus\n    403 Forbidden\nfull_url\n    http://nestogy.foleybridge.solutions/clients/1/contacts/1\naction_name\n    clients.contacts.show\ncontroller_action\n    App\\Domains\\Client\\Controllers\\ContactController@show\nuri\n    GET clients/{client}/contacts/{contact}\ncontroller\n    App\\Domains\\Client\\Controllers\\ContactController@show\nprefix\n    /clients/{client}\nfile\n    app/Domains/Client/Controllers/ContactController.php:151-170\nmiddleware\n    web, auth, verified\nduration\n    72.32ms\npeak_memory\n    4MB\nresponse\n    text/html; charset=UTF-8\nrequest_format\n    html\nrequest_query\n\n    []\n\nrequest_request\n\n    []\n\nrequest_headers\n\n    array:10 [▼\n      \"host\" => array:1 [▶]\n      \"user-agent\" => array:1 [▶]\n      \"accept\" => array:1 [▶]\n      \"accept-language\" => array:1 [▶]\n      \"accept-encoding\" => array:1 [▶]\n      \"referer\" => array:1 [▶]\n      \"connection\" => array:1 [▶]\n      \"cookie\" => array:1 [▶]\n      \"upgrade-insecure-requests\" => array:1 [▶]\n      \"priority\" => array:1 [▶]\n    ]\n\nrequest_cookies\n\n    array:3 [▼\n      \"XSRF-TOKEN\" => \"niCMFwoh2J23Z5U2llceZyaVdDczj5iNIBc57eBE\"\n      \"laravel_session\" => \"1mg8dlPhmGWVMKgo9YvMGPWBoPbQMPdh7q9SzK9q\"\n      \"remember_web_59ba36addc2b2f9401580f014c7f58ea4e30989d\" => \"1|cn651XmgyXRTitiNgKjoY4Uiw7W9Y4wQ9mskaa51whkqich8lAObT1GeP6nF|$2y$12$nYtt2vzDWOjep9Tw7LjanejSOPShzfJBw.OzDrWFgTAGQY9SMr64m\"\n    ]\n\nresponse_headers\n\n    array:3 [▼\n      \"cache-control\" => array:1 [▶]\n      \"date\" => array:1 [▶]\n      \"content-type\" => array:1 [▶]\n    ]\n\nsession_attributes\n\n    array:9 [▼\n      \"_token\" => \"niCMFwoh2J23Z5U2llceZyaVdDczj5iNIBc57eBE\"\n      \"url\" => []\n      \"_previous\" => array:1 [▶]\n      \"_flash\" => array:2 [▶]\n      \"login_web_59ba36addc2b2f9401580f014c7f58ea4e30989d\" => 1\n      \"current_workflow\" => \"financial\"\n      \"selected_client_id\" => 1\n      \"company_id\" => 1\n      \"PHPDEBUGBAR_STACK_DATA\" => []\n    ]\n\n"
            }
          }
        },
        {
          "display": "/clear ",
          "pastedContents": {}
        },
        {
          "display": "[Pasted text #1 +233 lines]",
          "pastedContents": {
            "1": {
              "id": 1,
              "type": "text",
              "content": "\nInternal Server Error\nErrorException\nforeach() argument must be of type array|object, null given\nGET nestogy.foleybridge.solutions\nPHP 8.4.11 — Laravel 12.22.1\n13 vendor frames collapsed\n1 vendor frame collapsed\n5 vendor frames collapsed\n47 vendor frames collapsed\nresources/views/clients/contacts/index.blade.php :158\n\n                                            @endif\n\n                                        </div>\n\n                                    </td>\n\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n\n                                        <div class=\"flex flex-wrap gap-1\">\n\n                                            @foreach($contact->type_labels as $type)\n\n                                                <span class=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \n\n                                                    @if($type === 'Primary') bg-blue-100 text-blue-800\n\n                                                    @elseif($type === 'Billing') bg-green-100 text-green-800\n\n                                                    @elseif($type === 'Technical') bg-purple-100 text-purple-800\n\n                                                    @elseif($type === 'Important') bg-red-100 text-red-800\n\n                                                    @else bg-gray-100 text-gray-800\n\n                                                    @endif\">\n\n                                                    {{ $type }}\n\n                                                </span>\n\n                                            @endforeach\n\n                                        </div>\n\nRequest\nGET /clients/1/contacts\nHeaders\n\nhost\n\nnestogy.foleybridge.solutions\n\nuser-agent\n\nMozilla/5.0 (Windows NT 10.0; Win64; x64; rv:142.0) Gecko/20100101 Firefox/142.0\n\naccept\n\ntext/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\n\naccept-language\n\nen-US,en;q=0.5\n\naccept-encoding\n\ngzip, deflate\n\nreferer\n\nhttp://nestogy.foleybridge.solutions/clients/1/contacts/create\n\nconnection\n\nkeep-alive\n\ncookie\n\nXSRF-TOKEN=eyJpdiI6Ii83MDZTdWFzV1hFTSt5RnFrSlJSbkE9PSIsInZhbHVlIjoibHZLR21xM1ZPR2MyNHZxcWNsMEI4a0Eya2JMQTM1WHNxVHlxUTFDbUdTWHM0aGUxczUwbDI0aWhGaUpSbmVxMlVlRCs5bTd0QVpUTHF5NVAzeGI1aS83ODU4M2FhRGRHUVlxdENwZ1ZudjQvd2lKNi9CT1RzQnluTDZ1YmJrTUgiLCJtYWMiOiJhNDA0NTI4YWYyZDVjY2I1MDk5Y2M0NjQzNjEyOTA4NjE4ZmIzMmIyOGIyODVkNjFiZTQ2MmU2MDg2YWI5OGUwIiwidGFnIjoiIn0%3D; laravel_session=eyJpdiI6IjZ0MmkzdVRhdjZGaVFJNVVGQm9HWkE9PSIsInZhbHVlIjoieGJsWmlhRUZJWVpSWTR2aVYzM3l2eHp5RFE2d0pQZHhUbTl1MXBqZzhEYjBmbTdldjZ4UVpjSXE3NTUrUjI4OG5tSFNrS1JXc2lwZXZqVWNBQ2xqL25IcnNNZXIzRVBFR21tckl2SjZRUjlhL0lrR2RSaE9menJ4dFJwcjArTTUiLCJtYWMiOiI2Y2U5MjM1NmQ2M2YzNDllOWFlZTg1NDgyYWYzZDU0MzM3MWU3MDc3NWJlMjczZGM3ZTExNDY5OTg2NzJjMGE1IiwidGFnIjoiIn0%3D; remember_web_59ba36addc2b2f9401580f014c7f58ea4e30989d=eyJpdiI6ImtVTU5IbEhONEpuVmdnSXFlYjF6NFE9PSIsInZhbHVlIjoiQTQ0NzRUMkRQa3YrUk9LRTl5Sy9uZ0Q0NnkrSzlrUCthTHdubXF0dmJkZHJ2ejJ1Q0g5eEtVcjlUZDVHL2pCUlFvVmJMZ0F1a3BVUFZPa3BNeDFSWnkvdzNLOCtTTkNoaU1IZjk4SGx5cnEwS1NvMzYvRjVqRzlqdy84V09pd3E1QzFQd3RTcjM5YmtON3lycTFYaklSZ0Fpb0t1VnZEMnV4ZUZhUGloL0dhMWJ4L3hVRVBHOFZ4cm5rVUZCa3grWEpla3JZSHNtVXpoUXRmT2RONUpUNEcwYVdoaDRlZkQ1RGRKcERKakkrWT0iLCJtYWMiOiIwMzQ0Zjk0ZDdlODhjZWQyYTYwODc3ZGQyZmQ3YjNkNGVlMGE2NTEwODRkOTc2ZmJmMjM0ZDNjZDM0OTY0NTQwIiwidGFnIjoiIn0%3D\n\nupgrade-insecure-requests\n\n1\n\npriority\n\nu=0, i\n\nBody\n\nNo body data\n\nApplication\nRouting\n\ncontroller\n\nApp\\Domains\\Client\\Controllers\\ContactController@index\n\nroute name\n\nclients.contacts.index\n\nmiddleware\n\nweb, auth, verified, company, permission:clients.contacts.view\n\nRouting Parameters\n\n{\n    \"client\": {\n        \"id\": 1,\n        \"company_id\": 1,\n        \"lead\": false,\n        \"name\": \"BurkhartPeterson\",\n        \"company_name\": null,\n        \"type\": \"business\",\n        \"email\": \"aaguilar@burkhartpeterson.com\",\n        \"phone\": null,\n        \"address\": null,\n        \"city\": null,\n        \"state\": null,\n        \"zip_code\": null,\n        \"country\": \"US\",\n        \"website\": null,\n        \"referral\": null,\n        \"rate\": null,\n        \"currency_code\": \"USD\",\n        \"net_terms\": 30,\n        \"tax_id_number\": null,\n        \"rmm_id\": null,\n        \"notes\": null,\n        \"status\": \"active\",\n        \"hourly_rate\": null,\n        \"billing_contact\": null,\n        \"technical_contact\": null,\n        \"custom_fields\": null,\n        \"contract_start_date\": null,\n        \"contract_end_date\": null,\n        \"created_at\": \"2025-08-11T23:22:46.000000Z\",\n        \"updated_at\": \"2025-08-11T23:31:31.000000Z\",\n        \"deleted_at\": null,\n        \"archived_at\": null,\n        \"accessed_at\": \"2025-08-11T23:31:31.000000Z\",\n        \"created_by\": null\n    }\n}\n\nDatabase Queries\n\nmysql (1.62 ms)\n\nselect * from `sessions` where `id` = '1mg8dlPhmGWVMKgo9YvMGPWBoPbQMPdh7q9SzK9q' limit 1\n\nmysql (0.49 ms)\n\nselect * from `users` where `id` = 1 and `users`.`archived_at` is null limit 1\n\nmysql (0.46 ms)\n\nselect * from `clients` where `id` = '1' and `clients`.`deleted_at` is null limit 1\n\nmysql (0.36 ms)\n\nselect * from `companies` where `companies`.`id` = 1 limit 1\n\nmysql (0.4 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.contacts.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '') as `exists`\n\nmysql (0.3 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.contacts.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '1') as `exists`\n\nmysql (0.78 ms)\n\nselect exists(select * from `permissions` where `slug` = 'clients.contacts.view' and exists (select * from `roles` inner join `role_permissions` on `roles`.`id` = `role_permissions`.`role_id` where `permissions`.`id` = `role_permissions`.`permission_id` and exists (select * from `users` inner join `user_roles` on `users`.`id` = `user_roles`.`user_id` where `roles`.`id` = `user_roles`.`role_id` and `users`.`id` = 1 and `user_roles`.`company_id` = 1 and `users`.`archived_at` is null))) as `exists`\n\nmysql (0.79 ms)\n\nselect * from `permissions` where exists (select * from `roles` inner join `role_permissions` on `roles`.`id` = `role_permissions`.`role_id` where `permissions`.`id` = `role_permissions`.`permission_id` and exists (select * from `users` inner join `user_roles` on `users`.`id` = `user_roles`.`user_id` where `roles`.`id` = `user_roles`.`role_id` and `users`.`id` = 1 and `user_roles`.`company_id` = 1 and `users`.`archived_at` is null))\n\nmysql (0.47 ms)\n\nselect `permissions`.*, `user_permissions`.`user_id` as `pivot_user_id`, `user_permissions`.`permission_id` as `pivot_permission_id`, `user_permissions`.`company_id` as `pivot_company_id`, `user_permissions`.`granted` as `pivot_granted`, `user_permissions`.`created_at` as `pivot_created_at`, `user_permissions`.`updated_at` as `pivot_updated_at` from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '1'\n\nmysql (0.37 ms)\n\nselect `slug` from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = ''\n\nmysql (0.36 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '') as `exists`\n\nmysql (0.35 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '1') as `exists`\n\nmysql (0.64 ms)\n\nselect exists(select * from `permissions` where `slug` = 'clients.view' and exists (select * from `roles` inner join `role_permissions` on `roles`.`id` = `role_permissions`.`role_id` where `permissions`.`id` = `role_permissions`.`permission_id` and exists (select * from `users` inner join `user_roles` on `users`.`id` = `user_roles`.`user_id` where `roles`.`id` = `user_roles`.`role_id` and `users`.`id` = 1 and `user_roles`.`company_id` = 1 and `users`.`archived_at` is null))) as `exists`\n\nmysql (0.36 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.contacts.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '') as `exists`\n\nmysql (0.33 ms)\n\nselect exists(select * from `permissions` inner join `user_permissions` on `permissions`.`id` = `user_permissions`.`permission_id` where `user_permissions`.`user_id` = 1 and `slug` = 'clients.contacts.view' and `user_permissions`.`company_id` = 1 and `user_permissions`.`granted` = '1') as `exists`\n\nmysql (0.6 ms)\n\nselect exists(select * from `permissions` where `slug` = 'clients.contacts.view' and exists (select * from `roles` inner join `role_permissions` on `roles`.`id` = `role_permissions`.`role_id` where `permissions`.`id` = `role_permissions`.`permission_id` and exists (select * from `users` inner join `user_roles` on `users`.`id` = `user_roles`.`user_id` where `roles`.`id` = `user_roles`.`role_id` and `users`.`id` = 1 and `user_roles`.`company_id` = 1 and `users`.`archived_at` is null))) as `exists`\n\nmysql (0.44 ms)\n\nselect count(*) as aggregate from `contacts` where `client_id` = 1 and `contacts`.`archived_at` is null and `contacts`.`company_id` = 1\n\nmysql (0.51 ms)\n\nselect * from `contacts` where `client_id` = 1 and `contacts`.`archived_at` is null and `contacts`.`company_id` = 1 order by `primary` desc, `name` asc limit 20 offset 0\n\nmysql (0.42 ms)\n\nselect * from `clients` where `id` = 1 and `company_id` = 1 and `clients`.`deleted_at` is null limit 1\n\n2\n249ms\n6MB\n12.x\nGET clients/{client}/contacts\n"
            }
          }
        },
        {
          "display": "/clear ",
          "pastedContents": {}
        },
        {
          "display": "this should be part of the NLP protion of the command system",
          "pastedContents": {}
        },
        {
          "display": "\n\nNo results found for \"new Client\"\n\nTry a different search term or command",
          "pastedContents": {}
        },
        {
          "display": "continue with phase 2 and 3 after compaction",
          "pastedContents": {}
        },
        {
          "display": "we need to update the commands's shortcuts too. How does the JS know what commands to listen to. Is it robust and expandable?",
          "pastedContents": {}
        },
        {
          "display": "i dont want any of the sequential shortcuts. they are aggrevating",
          "pastedContents": {}
        },
        {
          "display": "update the documentation.",
          "pastedContents": {}
        },
        {
          "display": "I want to overhaul how the quote and invoice creation work. it needs to be robust to handle all edge cases, and not too specific in any one area. focus on UX in the UI. Plan the feature, and refer to existing documentation.",
          "pastedContents": {}
        },
        {
          "display": "we should have some docs on it. If the docs are not satisfactory, update them. and we need a comprehsive plan on how to decode user intent.",
          "pastedContents": {}
        },
        {
          "display": "lets overhaul the commands. The current implementation is clunky. Scope it out, think it though, be creative, prioritize UX, and plan it fully.",
          "pastedContents": {}
        },
        {
          "display": "yes but think it fully out.",
          "pastedContents": {}
        },
        {
          "display": "it seems these are used by firefox. lets make sure we arent using anything thats already in common use. Lets try to give most commands a keyboard shortcut, and make sure the javascript is always listening for a command. All commands should include the CTRL key, some can be CTRL+SHIFT or CTRL+ALT, but all need CTRL for the commands",
          "pastedContents": {}
        },
        {
          "display": "Yes but all categories in one table.",
          "pastedContents": {}
        },
        {
          "display": "Alt+U and Alt+T are bad shortcuts that arent working, but we have commands that are suggesting them",
          "pastedContents": {}
        },
        {
          "display": "I want to update the categories system to allow for ,\bmultiple category types all in one table. We will need to update the existing migrations and a\bseeders, and run a migrate:fresh --seed",
          "pastedContents": {}
        },
        {
          "display": "the hotkeys guides are hard to read with the current colors.",
          "pastedContents": {}
        },
        {
          "display": "There are no quote categories. I assume there arent other categories too. We need the categories filled in the seed too.",
          "pastedContents": {}
        },
        {
          "display": "when you create a client, it should automatically select it for you.",
          "pastedContents": {}
        },
        {
          "display": "dont test",
          "pastedContents": {}
        },
        {
          "display": "in the search/command thing, it doesnt scroll as you use the arrow keys to navigate, so you end up not being able to see what you have \"selected\"",
          "pastedContents": {}
        }
      ],
      "mcpContextUris": [],
      "mcpServers": {},
      "enabledMcpjsonServers": [],
      "disabledMcpjsonServers": [],
      "hasTrustDialogAccepted": true,
      "hasTrustDialogHooksAccepted": false,
      "projectOnboardingSeenCount": 4,
      "hasClaudeMdExternalIncludesApproved": false,
      "hasClaudeMdExternalIncludesWarningShown": false,
      "exampleFiles": [
        "ticket.php",
        "invoice.php",
        "clients.php",
        "functions.php",
        "ajax.php"
      ],
      "exampleFilesGeneratedAt": 1754850574831,
      "lastTotalWebSearchRequests": 0,
      "hasCompletedProjectOnboarding": true
    },
    "/root": {
      "allowedTools": [],
      "history": [],
      "mcpContextUris": [],
      "mcpServers": {},
      "enabledMcpjsonServers": [],
      "disabledMcpjsonServers": [],
      "hasTrustDialogAccepted": false,
      "hasTrustDialogHooksAccepted": false,
      "projectOnboardingSeenCount": 1,
      "hasClaudeMdExternalIncludesApproved": false,
      "hasClaudeMdExternalIncludesWarningShown": false,
      "lastCost": 0,
      "lastAPIDuration": 0,
      "lastDuration": 10597,
      "lastLinesAdded": 0,
      "lastLinesRemoved": 0,
      "lastTotalInputTokens": 0,
      "lastTotalOutputTokens": 0,
      "lastTotalCacheCreationInputTokens": 0,
      "lastTotalCacheReadInputTokens": 0,
      "lastTotalWebSearchRequests": 0,
      "lastSessionId": "f2ad49d3-97bd-4267-a118-799456cb5aa2"
    },
    "/var/www/html/Nestogy/claudia/claudia": {
      "allowedTools": [],
      "history": [],
      "mcpContextUris": [],
      "mcpServers": {},
      "enabledMcpjsonServers": [],
      "disabledMcpjsonServers": [],
      "hasTrustDialogAccepted": false,
      "hasTrustDialogHooksAccepted": false,
      "projectOnboardingSeenCount": 0,
      "hasClaudeMdExternalIncludesApproved": false,
      "hasClaudeMdExternalIncludesWarningShown": false
    },
    "/var/www/html/Nestogy/claudia/src-tauri": {
      "allowedTools": [],
      "history": [],
      "mcpContextUris": [],
      "mcpServers": {},
      "enabledMcpjsonServers": [],
      "disabledMcpjsonServers": [],
      "hasTrustDialogAccepted": false,
      "hasTrustDialogHooksAccepted": false,
      "projectOnboardingSeenCount": 0,
      "hasClaudeMdExternalIncludesApproved": false,
      "hasClaudeMdExternalIncludesWarningShown": false
    },
    "/var/www/html/Nestogy/claudia": {
      "allowedTools": [],
      "history": [],
      "mcpContextUris": [],
      "mcpServers": {},
      "enabledMcpjsonServers": [],
      "disabledMcpjsonServers": [],
      "hasTrustDialogAccepted": false,
      "hasTrustDialogHooksAccepted": false,
      "projectOnboardingSeenCount": 1,
      "hasClaudeMdExternalIncludesApproved": false,
      "hasClaudeMdExternalIncludesWarningShown": false,
      "lastCost": 0,
      "lastAPIDuration": 0,
      "lastDuration": 9756,
      "lastLinesAdded": 0,
      "lastLinesRemoved": 0,
      "lastTotalInputTokens": 0,
      "lastTotalOutputTokens": 0,
      "lastTotalCacheCreationInputTokens": 0,
      "lastTotalCacheReadInputTokens": 0,
      "lastTotalWebSearchRequests": 0,
      "lastSessionId": "123dd53e-c9a6-48c7-b280-2b4b2930764e"
    }
  },
  "isQualifiedForDataSharing": false,
  "hasCompletedOnboarding": true,
  "lastOnboardingVersion": "1.0.72",
  "subscriptionNoticeCount": 0,
  "hasAvailableSubscription": false,
  "cachedChangelog": "# Changelog\n\n## 1.0.73\n\n- MCP: Support multiple config files with `--mcp-config file1.json file2.json`\n- MCP: Press Esc to cancel OAuth authentication flows\n- Bash: Improved command validation and reduced false security warnings\n- UI: Enhanced spinner animations and status line visual hierarchy\n- Linux: Added support for Alpine and musl-based distributions (requires separate ripgrep installation)\n\n## 1.0.72\n\n- Ask permissions: have Claude Code always ask for confirmation to use specific tools with /permissions\n\n## 1.0.71\n\n- Background commands: (Ctrl-b) to run any Bash command in the background so Claude can keep working (great for dev servers, tailing logs, etc.)\n- Customizable status line: add your terminal prompt to Claude Code with /statusline\n\n## 1.0.70\n\n- Performance: Optimized message rendering for better performance with large contexts\n- Windows: Fixed native file search, ripgrep, and subagent functionality\n- Added support for @-mentions in slash command arguments\n\n## 1.0.69\n\n- Upgraded Opus to version 4.1\n\n## 1.0.68\n\n- Fix incorrect model names being used for certain commands like `/pr-comments`\n- Windows: improve permissions checks for allow / deny tools and project trust. This may create a new project entry in `.claude.json` - manually merge the history field if desired.\n- Windows: improve sub-process spawning to eliminate \"No such file or directory\" when running commands like pnpm\n- Enhanced /doctor command with CLAUDE.md and MCP tool context for self-serve debugging\n- SDK: Added canUseTool callback support for tool confirmation\n- Added `disableAllHooks` setting\n- Improved file suggestions performance in large repos\n\n## 1.0.65\n\n- IDE: Fixed connection stability issues and error handling for diagnostics\n- Windows: Fixed shell environment setup for users without .bashrc files\n\n## 1.0.64\n\n- Agents: Added model customization support - you can now specify which model an agent should use\n- Agents: Fixed unintended access to the recursive agent tool\n- Hooks: Added systemMessage field to hook JSON output for displaying warnings and context\n- SDK: Fixed user input tracking across multi-turn conversations\n- Added hidden files to file search and @-mention suggestions\n\n## 1.0.63\n\n- Windows: Fixed file search, @agent mentions, and custom slash commands functionality\n\n## 1.0.62\n\n- Added @-mention support with typeahead for custom agents. @<your-custom-agent> to invoke it\n- Hooks: Added SessionStart hook for new session initialization\n- /add-dir command now supports typeahead for directory paths\n- Improved network connectivity check reliability\n\n## 1.0.61\n\n- Transcript mode (Ctrl+R): Changed Esc to exit transcript mode rather than interrupt\n- Settings: Added `--settings` flag to load settings from a JSON file\n- Settings: Fixed resolution of settings files paths that are symlinks\n- OTEL: Fixed reporting of wrong organization after authentication changes\n- Slash commands: Fixed permissions checking for allowed-tools with Bash\n- IDE: Added support for pasting images in VSCode MacOS using ⌘+V\n- IDE: Added `CLAUDE_CODE_AUTO_CONNECT_IDE=false` for disabling IDE auto-connection\n- Added `CLAUDE_CODE_SHELL_PREFIX` for wrapping Claude and user-provided shell commands run by Claude Code\n\n## 1.0.60\n\n- You can now create custom subagents for specialized tasks! Run /agents to get started\n\n## 1.0.59\n\n- SDK: Added tool confirmation support with canUseTool callback\n- SDK: Allow specifying env for spawned process\n- Hooks: Exposed PermissionDecision to hooks (including \"ask\")\n- Hooks: UserPromptSubmit now supports additionalContext in advanced JSON output\n- Fixed issue where some Max users that specified Opus would still see fallback to Sonnet\n\n## 1.0.58\n\n- Added support for reading PDFs\n- MCP: Improved server health status display in 'claude mcp list'\n- Hooks: Added CLAUDE_PROJECT_DIR env var for hook commands\n\n## 1.0.57\n\n- Added support for specifying a model in slash commands\n- Improved permission messages to help Claude understand allowed tools\n- Fix: Remove trailing newlines from bash output in terminal wrapping\n\n## 1.0.56\n\n- Windows: Enabled shift+tab for mode switching on versions of Node.js that support terminal VT mode\n- Fixes for WSL IDE detection\n- Fix an issue causing awsRefreshHelper changes to .aws directory not to be picked up\n\n## 1.0.55\n\n- Clarified knowledge cutoff for Opus 4 and Sonnet 4 models\n- Windows: fixed Ctrl+Z crash\n- SDK: Added ability to capture error logging\n- Add --system-prompt-file option to override system prompt in print mode\n\n## 1.0.54\n\n- Hooks: Added UserPromptSubmit hook and the current working directory to hook inputs\n- Custom slash commands: Added argument-hint to frontmatter\n- Windows: OAuth uses port 45454 and properly constructs browser URL\n- Windows: mode switching now uses alt + m, and plan mode renders properly\n- Shell: Switch to in-memory shell snapshot to fix file-related errors\n\n## 1.0.53\n\n- Updated @-mention file truncation from 100 lines to 2000 lines\n- Add helper script settings for AWS token refresh: awsAuthRefresh (for foreground operations like aws sso login) and awsCredentialExport (for background operation with STS-like response).\n\n## 1.0.52\n\n- Added support for MCP server instructions\n\n## 1.0.51\n\n- Added support for native Windows (requires Git for Windows)\n- Added support for Bedrock API keys through environment variable AWS_BEARER_TOKEN_BEDROCK\n- Settings: /doctor can now help you identify and fix invalid setting files\n- `--append-system-prompt` can now be used in interactive mode, not just --print/-p.\n- Increased auto-compact warning threshold from 60% to 80%\n- Fixed an issue with handling user directories with spaces for shell snapshots\n- OTEL resource now includes os.type, os.version, host.arch, and wsl.version (if running on Windows Subsystem for Linux)\n- Custom slash commands: Fixed user-level commands in subdirectories\n- Plan mode: Fixed issue where rejected plan from sub-task would get discarded\n\n## 1.0.48\n\n- Fixed a bug in v1.0.45 where the app would sometimes freeze on launch\n- Added progress messages to Bash tool based on the last 5 lines of command output\n- Added expanding variables support for MCP server configuration\n- Moved shell snapshots from /tmp to ~/.claude for more reliable Bash tool calls\n- Improved IDE extension path handling when Claude Code runs in WSL\n- Hooks: Added a PreCompact hook\n- Vim mode: Added c, f/F, t/T\n\n## 1.0.45\n\n- Redesigned Search (Grep) tool with new tool input parameters and features\n- Disabled IDE diffs for notebook files, fixing \"Timeout waiting after 1000ms\" error\n- Fixed config file corruption issue by enforcing atomic writes\n- Updated prompt input undo to Ctrl+\\_ to avoid breaking existing Ctrl+U behavior, matching zsh's undo shortcut\n- Stop Hooks: Fixed transcript path after /clear and fixed triggering when loop ends with tool call\n- Custom slash commands: Restored namespacing in command names based on subdirectories. For example, .claude/commands/frontend/component.md is now /frontend:component, not /component.\n\n## 1.0.44\n\n- New /export command lets you quickly export a conversation for sharing\n- MCP: resource_link tool results are now supported\n- MCP: tool annotations and tool titles now display in /mcp view\n- Changed Ctrl+Z to suspend Claude Code. Resume by running `fg`. Prompt input undo is now Ctrl+U.\n\n## 1.0.43\n\n- Fixed a bug where the theme selector was saving excessively\n- Hooks: Added EPIPE system error handling\n\n## 1.0.42\n\n- Added tilde (`~`) expansion support to `/add-dir` command\n\n## 1.0.41\n\n- Hooks: Split Stop hook triggering into Stop and SubagentStop\n- Hooks: Enabled optional timeout configuration for each command\n- Hooks: Added \"hook_event_name\" to hook input\n- Fixed a bug where MCP tools would display twice in tool list\n- New tool parameters JSON for Bash tool in `tool_decision` event\n\n## 1.0.40\n\n- Fixed a bug causing API connection errors with UNABLE_TO_GET_ISSUER_CERT_LOCALLY if `NODE_EXTRA_CA_CERTS` was set\n\n## 1.0.39\n\n- New Active Time metric in OpenTelemetry logging\n\n## 1.0.38\n\n- Released hooks. Special thanks to community input in https://github.com/anthropics/claude-code/issues/712. Docs: https://docs.anthropic.com/en/docs/claude-code/hooks\n\n## 1.0.37\n\n- Remove ability to set `Proxy-Authorization` header via ANTHROPIC_AUTH_TOKEN or apiKeyHelper\n\n## 1.0.36\n\n- Web search now takes today's date into context\n- Fixed a bug where stdio MCP servers were not terminating properly on exit\n\n## 1.0.35\n\n- Added support for MCP OAuth Authorization Server discovery\n\n## 1.0.34\n\n- Fixed a memory leak causing a MaxListenersExceededWarning message to appear\n\n## 1.0.33\n\n- Improved logging functionality with session ID support\n- Added prompt input undo functionality (Ctrl+Z and vim 'u' command)\n- Improvements to plan mode\n\n## 1.0.32\n\n- Updated loopback config for litellm\n- Added forceLoginMethod setting to bypass login selection screen\n\n## 1.0.31\n\n- Fixed a bug where ~/.claude.json would get reset when file contained invalid JSON\n\n## 1.0.30\n\n- Custom slash commands: Run bash output, @-mention files, enable thinking with thinking keywords\n- Improved file path autocomplete with filename matching\n- Added timestamps in Ctrl-r mode and fixed Ctrl-c handling\n- Enhanced jq regex support for complex filters with pipes and select\n\n## 1.0.29\n\n- Improved CJK character support in cursor navigation and rendering\n\n## 1.0.28\n\n- Slash commands: Fix selector display during history navigation\n- Resizes images before upload to prevent API size limit errors\n- Added XDG_CONFIG_HOME support to configuration directory\n- Performance optimizations for memory usage\n- New attributes (terminal.type, language) in OpenTelemetry logging\n\n## 1.0.27\n\n- Streamable HTTP MCP servers are now supported\n- Remote MCP servers (SSE and HTTP) now support OAuth\n- MCP resources can now be @-mentioned\n- /resume slash command to switch conversations within Claude Code\n\n## 1.0.25\n\n- Slash commands: moved \"project\" and \"user\" prefixes to descriptions\n- Slash commands: improved reliability for command discovery\n- Improved support for Ghostty\n- Improved web search reliability\n\n## 1.0.24\n\n- Improved /mcp output\n- Fixed a bug where settings arrays got overwritten instead of merged\n\n## 1.0.23\n\n- Released TypeScript SDK: import @anthropic-ai/claude-code to get started\n- Released Python SDK: pip install claude-code-sdk to get started\n\n## 1.0.22\n\n- SDK: Renamed `total_cost` to `total_cost_usd`\n\n## 1.0.21\n\n- Improved editing of files with tab-based indentation\n- Fix for tool_use without matching tool_result errors\n- Fixed a bug where stdio MCP server processes would linger after quitting Claude Code\n\n## 1.0.18\n\n- Added --add-dir CLI argument for specifying additional working directories\n- Added streaming input support without require -p flag\n- Improved startup performance and session storage performance\n- Added CLAUDE_BASH_MAINTAIN_PROJECT_WORKING_DIR environment variable to freeze working directory for bash commands\n- Added detailed MCP server tools display (/mcp)\n- MCP authentication and permission improvements\n- Added auto-reconnection for MCP SSE connections on disconnect\n- Fixed issue where pasted content was lost when dialogs appeared\n\n## 1.0.17\n\n- We now emit messages from sub-tasks in -p mode (look for the parent_tool_use_id property)\n- Fixed crashes when the VS Code diff tool is invoked multiple times quickly\n- MCP server list UI improvements\n- Update Claude Code process title to display \"claude\" instead of \"node\"\n\n## 1.0.11\n\n- Claude Code can now also be used with a Claude Pro subscription\n- Added /upgrade for smoother switching to Claude Max plans\n- Improved UI for authentication from API keys and Bedrock/Vertex/external auth tokens\n- Improved shell configuration error handling\n- Improved todo list handling during compaction\n\n## 1.0.10\n\n- Added markdown table support\n- Improved streaming performance\n\n## 1.0.8\n\n- Fixed Vertex AI region fallback when using CLOUD_ML_REGION\n- Increased default otel interval from 1s -> 5s\n- Fixed edge cases where MCP_TIMEOUT and MCP_TOOL_TIMEOUT weren't being respected\n- Fixed a regression where search tools unnecessarily asked for permissions\n- Added support for triggering thinking non-English languages\n- Improved compacting UI\n\n## 1.0.7\n\n- Renamed /allowed-tools -> /permissions\n- Migrated allowedTools and ignorePatterns from .claude.json -> settings.json\n- Deprecated claude config commands in favor of editing settings.json\n- Fixed a bug where --dangerously-skip-permissions sometimes didn't work in --print mode\n- Improved error handling for /install-github-app\n- Bugfixes, UI polish, and tool reliability improvements\n\n## 1.0.6\n\n- Improved edit reliability for tab-indented files\n- Respect CLAUDE_CONFIG_DIR everywhere\n- Reduced unnecessary tool permission prompts\n- Added support for symlinks in @file typeahead\n- Bugfixes, UI polish, and tool reliability improvements\n\n## 1.0.4\n\n- Fixed a bug where MCP tool errors weren't being parsed correctly\n\n## 1.0.1\n\n- Added `DISABLE_INTERLEAVED_THINKING` to give users the option to opt out of interleaved thinking.\n- Improved model references to show provider-specific names (Sonnet 3.7 for Bedrock, Sonnet 4 for Console)\n- Updated documentation links and OAuth process descriptions\n\n## 1.0.0\n\n- Claude Code is now generally available\n- Introducing Sonnet 4 and Opus 4 models\n\n## 0.2.125\n\n- Breaking change: Bedrock ARN passed to `ANTHROPIC_MODEL` or `ANTHROPIC_SMALL_FAST_MODEL` should no longer contain an escaped slash (specify `/` instead of `%2F`)\n- Removed `DEBUG=true` in favor of `ANTHROPIC_LOG=debug`, to log all requests\n\n## 0.2.117\n\n- Breaking change: --print JSON output now returns nested message objects, for forwards-compatibility as we introduce new metadata fields\n- Introduced settings.cleanupPeriodDays\n- Introduced CLAUDE_CODE_API_KEY_HELPER_TTL_MS env var\n- Introduced --debug mode\n\n## 0.2.108\n\n- You can now send messages to Claude while it works to steer Claude in real-time\n- Introduced BASH_DEFAULT_TIMEOUT_MS and BASH_MAX_TIMEOUT_MS env vars\n- Fixed a bug where thinking was not working in -p mode\n- Fixed a regression in /cost reporting\n- Deprecated MCP wizard interface in favor of other MCP commands\n- Lots of other bugfixes and improvements\n\n## 0.2.107\n\n- CLAUDE.md files can now import other files. Add @path/to/file.md to ./CLAUDE.md to load additional files on launch\n\n## 0.2.106\n\n- MCP SSE server configs can now specify custom headers\n- Fixed a bug where MCP permission prompt didn't always show correctly\n\n## 0.2.105\n\n- Claude can now search the web\n- Moved system & account status to /status\n- Added word movement keybindings for Vim\n- Improved latency for startup, todo tool, and file edits\n\n## 0.2.102\n\n- Improved thinking triggering reliability\n- Improved @mention reliability for images and folders\n- You can now paste multiple large chunks into one prompt\n\n## 0.2.100\n\n- Fixed a crash caused by a stack overflow error\n- Made db storage optional; missing db support disables --continue and --resume\n\n## 0.2.98\n\n- Fixed an issue where auto-compact was running twice\n\n## 0.2.96\n\n- Claude Code can now also be used with a Claude Max subscription (https://claude.ai/upgrade)\n\n## 0.2.93\n\n- Resume conversations from where you left off from with \"claude --continue\" and \"claude --resume\"\n- Claude now has access to a Todo list that helps it stay on track and be more organized\n\n## 0.2.82\n\n- Added support for --disallowedTools\n- Renamed tools for consistency: LSTool -> LS, View -> Read, etc.\n\n## 0.2.75\n\n- Hit Enter to queue up additional messages while Claude is working\n- Drag in or copy/paste image files directly into the prompt\n- @-mention files to directly add them to context\n- Run one-off MCP servers with `claude --mcp-config <path-to-file>`\n- Improved performance for filename auto-complete\n\n## 0.2.74\n\n- Added support for refreshing dynamically generated API keys (via apiKeyHelper), with a 5 minute TTL\n- Task tool can now perform writes and run bash commands\n\n## 0.2.72\n\n- Updated spinner to indicate tokens loaded and tool usage\n\n## 0.2.70\n\n- Network commands like curl are now available for Claude to use\n- Claude can now run multiple web queries in parallel\n- Pressing ESC once immediately interrupts Claude in Auto-accept mode\n\n## 0.2.69\n\n- Fixed UI glitches with improved Select component behavior\n- Enhanced terminal output display with better text truncation logic\n\n## 0.2.67\n\n- Shared project permission rules can be saved in .claude/settings.json\n\n## 0.2.66\n\n- Print mode (-p) now supports streaming output via --output-format=stream-json\n- Fixed issue where pasting could trigger memory or bash mode unexpectedly\n\n## 0.2.63\n\n- Fixed an issue where MCP tools were loaded twice, which caused tool call errors\n\n## 0.2.61\n\n- Navigate menus with vim-style keys (j/k) or bash/emacs shortcuts (Ctrl+n/p) for faster interaction\n- Enhanced image detection for more reliable clipboard paste functionality\n- Fixed an issue where ESC key could crash the conversation history selector\n\n## 0.2.59\n\n- Copy+paste images directly into your prompt\n- Improved progress indicators for bash and fetch tools\n- Bugfixes for non-interactive mode (-p)\n\n## 0.2.54\n\n- Quickly add to Memory by starting your message with '#'\n- Press ctrl+r to see full output for long tool results\n- Added support for MCP SSE transport\n\n## 0.2.53\n\n- New web fetch tool lets Claude view URLs that you paste in\n- Fixed a bug with JPEG detection\n\n## 0.2.50\n\n- New MCP \"project\" scope now allows you to add MCP servers to .mcp.json files and commit them to your repository\n\n## 0.2.49\n\n- Previous MCP server scopes have been renamed: previous \"project\" scope is now \"local\" and \"global\" scope is now \"user\"\n\n## 0.2.47\n\n- Press Tab to auto-complete file and folder names\n- Press Shift + Tab to toggle auto-accept for file edits\n- Automatic conversation compaction for infinite conversation length (toggle with /config)\n\n## 0.2.44\n\n- Ask Claude to make a plan with thinking mode: just say 'think' or 'think harder' or even 'ultrathink'\n\n## 0.2.41\n\n- MCP server startup timeout can now be configured via MCP_TIMEOUT environment variable\n- MCP server startup no longer blocks the app from starting up\n\n## 0.2.37\n\n- New /release-notes command lets you view release notes at any time\n- `claude config add/remove` commands now accept multiple values separated by commas or spaces\n\n## 0.2.36\n\n- Import MCP servers from Claude Desktop with `claude mcp add-from-claude-desktop`\n- Add MCP servers as JSON strings with `claude mcp add-json <n> <json>`\n\n## 0.2.34\n\n- Vim bindings for text input - enable with /vim or /config\n\n## 0.2.32\n\n- Interactive MCP setup wizard: Run \"claude mcp add\" to add MCP servers with a step-by-step interface\n- Fix for some PersistentShell issues\n\n## 0.2.31\n\n- Custom slash commands: Markdown files in .claude/commands/ directories now appear as custom slash commands to insert prompts into your conversation\n- MCP debug mode: Run with --mcp-debug flag to get more information about MCP server errors\n\n## 0.2.30\n\n- Added ANSI color theme for better terminal compatibility\n- Fixed issue where slash command arguments weren't being sent properly\n- (Mac-only) API keys are now stored in macOS Keychain\n\n## 0.2.26\n\n- New /approved-tools command for managing tool permissions\n- Word-level diff display for improved code readability\n- Fuzzy matching for slash commands\n\n## 0.2.21\n\n- Fuzzy matching for /commands\n",
  "changelogLastFetched": 1754966281872,
  "fallbackAvailableWarningThreshold": 0.5,
  "lastReleaseNotesSeen": "1.0.73",
  "oauthAccount": {
    "accountUuid": "fbb66396-e013-4475-b576-7daf3b87552d",
    "emailAddress": "andrew@malsbury.tech",
    "organizationUuid": "19205ae5-68c0-45d2-97d0-7e9433807ff4"
  }
}